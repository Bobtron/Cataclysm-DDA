<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm DDA: src/character_body.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm DDA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">character_body.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="character__body_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="activity__tracker_8h.html">activity_tracker.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avatar_8h.html">avatar.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bodypart_8h.html">bodypart.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="calendar_8h.html">calendar.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cata__utility_8h.html">cata_utility.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="catacharset_8h.html">catacharset.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="character_8h.html">character.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="character__attire_8h.html">character_attire.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="color_8h.html">color.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="creature_8h.html">creature.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="display_8h.html">display.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="effect_8h.html">effect.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="enums_8h.html">enums.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="flag_8h.html">flag.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="game_8h.html">game.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="game__constants_8h.html">game_constants.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="magic_8h.html">magic.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="magic__enchantment_8h.html">magic_enchantment.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="make__static_8h.html">make_static.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="map_8h.html">map.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mapdata_8h.html">mapdata.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="messages_8h.html">messages.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="morale__types_8h.html">morale_types.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="output_8h.html">output.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="overmapbuffer_8h.html">overmapbuffer.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pimpl_8h.html">pimpl.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rng_8h.html">rng.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stomach_8h.html">stomach.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="string__formatter_8h.html">string_formatter.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="translation_8h.html">translation.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="translations_8h.html">translations.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="type__id_8h.html">type_id.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ui_8h.html">ui.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="units_8h.html">units.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="veh__type_8h.html">veh_type.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vehicle_8h.html">vehicle.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vitamin_8h.html">vitamin.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vpart__position_8h.html">vpart_position.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="weather_8h.html">weather.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="weather__gen_8h.html">weather_gen.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">class </span><a class="code" href="classitem.html">item</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">struct </span><a class="code" href="structmutation__branch.html">mutation_branch</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a18b7dcae7ca83a37c9c4ba81991a4056">   55</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">bionic_id</a> <a class="code" href="character__body_8cpp.html#a18b7dcae7ca83a37c9c4ba81991a4056">bio_sleep_shutdown</a>( <span class="stringliteral">&quot;bio_sleep_shutdown&quot;</span> );</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">character_modifier_id</a></div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#aa77ed7c083f15f6a9ca6a92185d0ab63">   58</a></span>&#160;<a class="code" href="character__body_8cpp.html#aa77ed7c083f15f6a9ca6a92185d0ab63">character_modifier_stamina_recovery_breathing_mod</a>( <span class="stringliteral">&quot;stamina_recovery_breathing_mod&quot;</span> );</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a1b24df80fb6fce16dd4527cc4a6fa6ca">   60</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a1b24df80fb6fce16dd4527cc4a6fa6ca">effect_adrenaline</a>( <span class="stringliteral">&quot;adrenaline&quot;</span> );</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a7c2a13f94c0d13712af84b23f13e788f">   61</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a7c2a13f94c0d13712af84b23f13e788f">effect_bandaged</a>( <span class="stringliteral">&quot;bandaged&quot;</span> );</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#ab4605586a0d3ba987fa7aeb18cf224b6">   62</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#ab4605586a0d3ba987fa7aeb18cf224b6">effect_betablock</a>( <span class="stringliteral">&quot;betablock&quot;</span> );</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">   63</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a>( <span class="stringliteral">&quot;bite&quot;</span> );</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">   64</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>( <span class="stringliteral">&quot;bleed&quot;</span> );</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a6fa88d25e9b69979f002a30d541b6244">   65</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a6fa88d25e9b69979f002a30d541b6244">effect_blisters</a>( <span class="stringliteral">&quot;blisters&quot;</span> );</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#aa6055e7b9d5b2cb3ecd4cce48a416d33">   66</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#aa6055e7b9d5b2cb3ecd4cce48a416d33">effect_cig</a>( <span class="stringliteral">&quot;cig&quot;</span> );</div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a1e2a085a78738d789a7447af81ed3deb">   67</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a1e2a085a78738d789a7447af81ed3deb">effect_cold</a>( <span class="stringliteral">&quot;cold&quot;</span> );</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#ad42a2492eba82e538cb9a07114fe9118">   68</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#ad42a2492eba82e538cb9a07114fe9118">effect_common_cold</a>( <span class="stringliteral">&quot;common_cold&quot;</span> );</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#adcc47d614ba63ddb056307153d5ac06c">   69</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#adcc47d614ba63ddb056307153d5ac06c">effect_disinfected</a>( <span class="stringliteral">&quot;disinfected&quot;</span> );</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#ab558627fa5f7d625a9883d230e8525ae">   70</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#ab558627fa5f7d625a9883d230e8525ae">effect_flu</a>( <span class="stringliteral">&quot;flu&quot;</span> );</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#afd4a5a40423282c43d1715bf1cc99357">   71</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#afd4a5a40423282c43d1715bf1cc99357">effect_frostbite</a>( <span class="stringliteral">&quot;frostbite&quot;</span> );</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a7b7626136317fab938997e90fd3f5876">   72</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a7b7626136317fab938997e90fd3f5876">effect_frostbite_recovery</a>( <span class="stringliteral">&quot;frostbite_recovery&quot;</span> );</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a4c80f98459b07d9175c344914b1525dd">   73</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a4c80f98459b07d9175c344914b1525dd">effect_hot</a>( <span class="stringliteral">&quot;hot&quot;</span> );</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#acb85acf9c8e335d2a81088095aa6c986">   74</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#acb85acf9c8e335d2a81088095aa6c986">effect_hot_speed</a>( <span class="stringliteral">&quot;hot_speed&quot;</span> );</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#ae3b12d473a928a50b2b322d2c8f579ab">   75</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#ae3b12d473a928a50b2b322d2c8f579ab">effect_hunger_blank</a>( <span class="stringliteral">&quot;hunger_blank&quot;</span> );</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a3124b68e352cad48fc7848f4dc58973b">   76</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a3124b68e352cad48fc7848f4dc58973b">effect_hunger_engorged</a>( <span class="stringliteral">&quot;hunger_engorged&quot;</span> );</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#afb770e7a1728acdd3e13e46fc82e3b9a">   77</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#afb770e7a1728acdd3e13e46fc82e3b9a">effect_hunger_famished</a>( <span class="stringliteral">&quot;hunger_famished&quot;</span> );</div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#aa2e65123ffb4aa24bb23f1bf49f5dc01">   78</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#aa2e65123ffb4aa24bb23f1bf49f5dc01">effect_hunger_full</a>( <span class="stringliteral">&quot;hunger_full&quot;</span> );</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#abcdd71c4a5fac2f06983145c1bf5c9e1">   79</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#abcdd71c4a5fac2f06983145c1bf5c9e1">effect_hunger_hungry</a>( <span class="stringliteral">&quot;hunger_hungry&quot;</span> );</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a7233d432bb6c3c3fcbef0adcf137d36b">   80</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a7233d432bb6c3c3fcbef0adcf137d36b">effect_hunger_near_starving</a>( <span class="stringliteral">&quot;hunger_near_starving&quot;</span> );</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a8b84fb29e831d3d5948f3003808d2c93">   81</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a8b84fb29e831d3d5948f3003808d2c93">effect_hunger_satisfied</a>( <span class="stringliteral">&quot;hunger_satisfied&quot;</span> );</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a8ab43cdb18ab06dc2569f4bdce2b8ae5">   82</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a8ab43cdb18ab06dc2569f4bdce2b8ae5">effect_hunger_starving</a>( <span class="stringliteral">&quot;hunger_starving&quot;</span> );</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a454de2cafad6a7a93aae2ea5d64c702a">   83</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a454de2cafad6a7a93aae2ea5d64c702a">effect_hunger_very_hungry</a>( <span class="stringliteral">&quot;hunger_very_hungry&quot;</span> );</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#ab987f0249d5dcb5a351fe48ffebffc55">   84</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#ab987f0249d5dcb5a351fe48ffebffc55">effect_hypovolemia</a>( <span class="stringliteral">&quot;hypovolemia&quot;</span> );</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">   85</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a>( <span class="stringliteral">&quot;infected&quot;</span> );</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#ae239a31e1ebbbbacd06a8fcdd8be2861">   86</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#ae239a31e1ebbbbacd06a8fcdd8be2861">effect_mending</a>( <span class="stringliteral">&quot;mending&quot;</span> );</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a1a6476e8888f0929f469fd9af2d629bc">   87</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a1a6476e8888f0929f469fd9af2d629bc">effect_narcosis</a>( <span class="stringliteral">&quot;narcosis&quot;</span> );</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">   88</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">effect_sleep</a>( <span class="stringliteral">&quot;sleep&quot;</span> );</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a0864aecadfbfda58af09c883f5fd2e15">   89</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">efftype_id</a> <a class="code" href="character__body_8cpp.html#a0864aecadfbfda58af09c883f5fd2e15">effect_wet</a>( <span class="stringliteral">&quot;wet&quot;</span> );</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a2e1ccdf5aa874eaaf8e3f14757d72179">   91</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">itype_id</a> <a class="code" href="character__body_8cpp.html#a2e1ccdf5aa874eaaf8e3f14757d72179">itype_rm13_armor_on</a>( <span class="stringliteral">&quot;rm13_armor_on&quot;</span> );</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a8533b6c22d92696d791d5b24a8e74ee2">   93</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="character__body_8cpp.html#a8533b6c22d92696d791d5b24a8e74ee2">json_flag_COLDBLOOD</a>( <span class="stringliteral">&quot;COLDBLOOD&quot;</span> );</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a3a27c79bd0c0a2be0c26a01b981551d1">   94</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="character__body_8cpp.html#a3a27c79bd0c0a2be0c26a01b981551d1">json_flag_COLDBLOOD2</a>( <span class="stringliteral">&quot;COLDBLOOD2&quot;</span> );</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a261eed8308b515cd628bf9f42455db7f">   95</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="character__body_8cpp.html#a261eed8308b515cd628bf9f42455db7f">json_flag_COLDBLOOD3</a>( <span class="stringliteral">&quot;COLDBLOOD3&quot;</span> );</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a74d0a0db7f9f29452ac4406a6c3f2541">   96</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="character__body_8cpp.html#a74d0a0db7f9f29452ac4406a6c3f2541">json_flag_ECTOTHERM</a>( <span class="stringliteral">&quot;ECTOTHERM&quot;</span> );</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a5e214c27e471a762c49dc1e0b819ec2f">   97</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="character__body_8cpp.html#a5e214c27e471a762c49dc1e0b819ec2f">json_flag_HEATSINK</a>( <span class="stringliteral">&quot;HEATSINK&quot;</span> );</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a2e0c7f462cebbf255a0471adb66442dd">   98</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="character__body_8cpp.html#a2e0c7f462cebbf255a0471adb66442dd">json_flag_HEAT_IMMUNE</a>( <span class="stringliteral">&quot;HEAT_IMMUNE&quot;</span> );</div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a18cca0d60af04a241e2561584946cf56">   99</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="character__body_8cpp.html#a18cca0d60af04a241e2561584946cf56">json_flag_IGNORE_TEMP</a>( <span class="stringliteral">&quot;IGNORE_TEMP&quot;</span> );</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a37e9489598e65e89dc71e28cb45c30f5">  100</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="character__body_8cpp.html#a37e9489598e65e89dc71e28cb45c30f5">json_flag_LIMB_LOWER</a>( <span class="stringliteral">&quot;LIMB_LOWER&quot;</span> );</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a5e4712a48bd75fcf33e7f8d605ab75b8">  101</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="character__body_8cpp.html#a5e4712a48bd75fcf33e7f8d605ab75b8">json_flag_NO_THIRST</a>( <span class="stringliteral">&quot;NO_THIRST&quot;</span> );</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a3eff2536d0f2d082101e71815160a288">  102</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">json_character_flag</a> <a class="code" href="character__body_8cpp.html#a3eff2536d0f2d082101e71815160a288">json_flag_PAIN_IMMUNE</a>( <span class="stringliteral">&quot;PAIN_IMMUNE&quot;</span> );</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a305fb2a130a501be6d0170d8dac09e8a">  104</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__body_8cpp.html#a305fb2a130a501be6d0170d8dac09e8a">trait_BARK</a>( <span class="stringliteral">&quot;BARK&quot;</span> );</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a328aaa21f9e64c2d22a68b9764a6a550">  105</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__body_8cpp.html#a328aaa21f9e64c2d22a68b9764a6a550">trait_CHITIN_FUR</a>( <span class="stringliteral">&quot;CHITIN_FUR&quot;</span> );</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#afeabd53c61defabb9ba3721de6b91280">  106</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__body_8cpp.html#afeabd53c61defabb9ba3721de6b91280">trait_CHITIN_FUR2</a>( <span class="stringliteral">&quot;CHITIN_FUR2&quot;</span> );</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">  107</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__body_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">trait_CHITIN_FUR3</a>( <span class="stringliteral">&quot;CHITIN_FUR3&quot;</span> );</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a226c0f7c43c2c2718701324d346bd831">  108</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__body_8cpp.html#a226c0f7c43c2c2718701324d346bd831">trait_DEBUG_LS</a>( <span class="stringliteral">&quot;DEBUG_LS&quot;</span> );</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a2049ad3a20e013061ce05da335d08179">  109</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__body_8cpp.html#a2049ad3a20e013061ce05da335d08179">trait_DEBUG_NOTEMP</a>( <span class="stringliteral">&quot;DEBUG_NOTEMP&quot;</span> );</div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a83afbd8e4dbefc1f99df9624fd9d7824">  110</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__body_8cpp.html#a83afbd8e4dbefc1f99df9624fd9d7824">trait_FELINE_FUR</a>( <span class="stringliteral">&quot;FELINE_FUR&quot;</span> );</div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#aa9c71c27aec3d6c98d982792f15e613c">  111</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__body_8cpp.html#aa9c71c27aec3d6c98d982792f15e613c">trait_FUR</a>( <span class="stringliteral">&quot;FUR&quot;</span> );</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a80c61d54a8759044f6c7c841469ee11d">  112</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__body_8cpp.html#a80c61d54a8759044f6c7c841469ee11d">trait_LIGHTFUR</a>( <span class="stringliteral">&quot;LIGHTFUR&quot;</span> );</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#aeced506658f24495d18152830064a45f">  113</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__body_8cpp.html#aeced506658f24495d18152830064a45f">trait_LUPINE_FUR</a>( <span class="stringliteral">&quot;LUPINE_FUR&quot;</span> );</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#ac71452586eb6cf87fab888bc561dc897">  114</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__body_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a>( <span class="stringliteral">&quot;M_DEPENDENT&quot;</span> );</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a512959ad2b35ea057f2fed5445fc23c4">  115</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__body_8cpp.html#a512959ad2b35ea057f2fed5445fc23c4">trait_PYROMANIA</a>( <span class="stringliteral">&quot;PYROMANIA&quot;</span> );</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a0651a103f4530a625fc7defcd7372b37">  116</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__body_8cpp.html#a0651a103f4530a625fc7defcd7372b37">trait_SLIMY</a>( <span class="stringliteral">&quot;SLIMY&quot;</span> );</div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#af83add4ee97cce1fc50812e5c46f73cc">  117</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> <a class="code" href="character__body_8cpp.html#af83add4ee97cce1fc50812e5c46f73cc">trait_URSINE_FUR</a>( <span class="stringliteral">&quot;URSINE_FUR&quot;</span> );</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#a0fc6709b43edf2d7ca11dccafdb71052">  119</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classstring__id.html">vitamin_id</a> <a class="code" href="character__body_8cpp.html#a0fc6709b43edf2d7ca11dccafdb71052">vitamin_blood</a>( <span class="stringliteral">&quot;blood&quot;</span> );</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classCharacter.html#abcd58241392cf60f0ea626242c2b5897">  121</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#abcd58241392cf60f0ea626242c2b5897">Character::update_body_wetness</a>( <span class="keyword">const</span> <a class="code" href="structw__point.html">w_point</a> &amp;weather )</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// Average number of turns to go from completely soaked to fully dry</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// assuming average temperature and humidity</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    constexpr <a class="code" href="classtime__duration.html">time_duration</a> average_drying = 30_minutes;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// Fur/slime retains moisture</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordtype">float</span> trait_mult = 1.0;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__body_8cpp.html#a80c61d54a8759044f6c7c841469ee11d">trait_LIGHTFUR</a> ) || <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__body_8cpp.html#aa9c71c27aec3d6c98d982792f15e613c">trait_FUR</a> ) || <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__body_8cpp.html#a83afbd8e4dbefc1f99df9624fd9d7824">trait_FELINE_FUR</a> ) ||</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__body_8cpp.html#aeced506658f24495d18152830064a45f">trait_LUPINE_FUR</a> ) || <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__body_8cpp.html#a328aaa21f9e64c2d22a68b9764a6a550">trait_CHITIN_FUR</a> ) || <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__body_8cpp.html#afeabd53c61defabb9ba3721de6b91280">trait_CHITIN_FUR2</a> ) ||</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__body_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">trait_CHITIN_FUR3</a> ) ) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        trait_mult = 2.0;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__body_8cpp.html#af83add4ee97cce1fc50812e5c46f73cc">trait_URSINE_FUR</a> ) || <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__body_8cpp.html#a0651a103f4530a625fc7defcd7372b37">trait_SLIMY</a> ) ) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        trait_mult = 4.0;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// Weather slows down drying</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">float</span> weather_mult = 1.0;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    weather_mult += ( ( weather.humidity - 66.0f ) - ( <a class="code" href="namespaceunits.html#ae31e6d9c71949a72ee41be4be6f1afcd">units::to_fahrenheit</a>(</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                          weather.temperature ) - 65.0f ) ) / 100.0f;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    weather_mult = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.1f, weather_mult );</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : <a class="code" href="classCreature.html#a4537397ede1aea8ecec28183252aabe3">get_all_body_parts</a>() ) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a> temp_conv = <a class="code" href="classCreature.html#a5619a04558f7cf1ea1fb24bcbca84cab">get_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="comment">// do sweat related tests assuming not underwater</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() ) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#adcb746021134c9e452666998837b63fc">wetness</a> = <a class="code" href="classCreature.html#a8e646d4365acc80cd729c95588974267">get_part_wetness</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#adcb746021134c9e452666998837b63fc">wetness</a> == 0 ) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#a0864aecadfbfda58af09c883f5fd2e15">effect_wet</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="comment">// Body temperature affects duration of wetness</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <span class="comment">// Note: Using temp_conv rather than temp_cur, to better approximate environment</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="keywordtype">float</span> temp_mult = 1.0;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordflow">if</span>( temp_conv &gt;= <a class="code" href="weather_8h.html#a73d8da6de438a650cedd7eab20c89b3c">BODYTEMP_SCORCHING</a> ) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                temp_mult = 0.5;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( temp_conv &gt;= <a class="code" href="weather_8h.html#a192f85471c11eb34255865b8d429bc21">BODYTEMP_VERY_HOT</a> ) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                temp_mult = 0.67;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( temp_conv &gt;= <a class="code" href="weather_8h.html#abd1400294a14a4d8ad1a2e41813b0f6e">BODYTEMP_HOT</a> ) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                temp_mult = 0.75;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( temp_conv &gt; <a class="code" href="weather_8h.html#aa08ed5af6f28c1fdf8c6927e0ad78cde">BODYTEMP_COLD</a> ) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <span class="comment">// Comfortable, doesn&#39;t need any changes</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <span class="comment">// Evaporation doesn&#39;t change that much at lower temp</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                temp_mult = 1.2;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="comment">// Make clothing slow down drying</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> clothing_mult = <a class="code" href="classCharacter.html#a46302dc71cfc84856e8af85ddb61c7e1">worn</a>.<a class="code" href="classoutfit.html#a087ea131fcd9e1682ed2e35a0e9febbc">clothing_wetness_mult</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> drying_rate = <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#ab85049855e0444e73df6af10413de9e6">drying_rate</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> drying = average_drying * trait_mult * weather_mult *</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                         temp_mult / clothing_mult;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> turns_to_dry = to_turns&lt;float&gt;( drying ) / drying_rate;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> drench_cap = <a class="code" href="classCreature.html#ae751e29e56563f0aed6fbb462cdca9c4">get_part_drench_capacity</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> dry_per_turn = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( drench_cap ) / turns_to_dry;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <a class="code" href="classCreature.html#a2d8cf3a723e8cc8df3666fc49540ce94">mod_part_wetness</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <a class="code" href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a>( dry_per_turn ) * -1 );</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="comment">// Make evaporation reduce body heat</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="comment">// if under 50 in the menu or 7500 temp_conv you should be able to regulate temperature by sweating</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="comment">// with current calcs a character moving towards 7500 heat will at most move 5 temperature points</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="comment">// down to not having a slowdown</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#afd43ba79d412b38476f718534904fce7">has_flag</a>( <a class="code" href="character__body_8cpp.html#a18cca0d60af04a241e2561584946cf56">json_flag_IGNORE_TEMP</a> ) ) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                <a class="code" href="classCreature.html#a1a3c6e764ace1edd0dadf641bacd1bec">mod_part_temp_cur</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, -0.008_C_delta * clothing_mult );</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="comment">// Safety measure to keep wetness within bounds</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a8e646d4365acc80cd729c95588974267">get_part_wetness</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) &lt;= 0 ) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="comment">// if we are hot still we should always be a bit wet (still sweating), this is a small hack to make sure we don&#39;t miss cooling ticks with good breathability clothing</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="keywordflow">if</span>( temp_conv &gt;= <a class="code" href="weather_8h.html#abd1400294a14a4d8ad1a2e41813b0f6e">BODYTEMP_HOT</a> &amp;&amp; <a class="code" href="classCreature.html#ae751e29e56563f0aed6fbb462cdca9c4">get_part_drench_capacity</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) &gt; 0 ) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                <a class="code" href="classCreature.html#a4a302365853bfdd5351a384c4cc823e1">set_part_wetness</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, 1 );</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                <a class="code" href="classCreature.html#a4a302365853bfdd5351a384c4cc823e1">set_part_wetness</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, 0 );</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a8e646d4365acc80cd729c95588974267">get_part_wetness</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) &gt; <a class="code" href="classCreature.html#ae751e29e56563f0aed6fbb462cdca9c4">get_part_drench_capacity</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) ) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <a class="code" href="classCreature.html#a4a302365853bfdd5351a384c4cc823e1">set_part_wetness</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <a class="code" href="classCreature.html#ae751e29e56563f0aed6fbb462cdca9c4">get_part_drench_capacity</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="comment">// Add effects to track wetness</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a8e646d4365acc80cd729c95588974267">get_part_wetness</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) &gt; 0 ) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> wetness_pct = <a class="code" href="classCreature.html#a4b42a11004d8092e0453f9122632de99">get_part_wetness_percentage</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> effect_level =</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                wetness_pct &lt; <a class="code" href="weather_8h.html#abfbacbfb50d91cc86fc1b1e00e8fce95">BODYWET_PERCENT_WET</a> ? 1 :</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                wetness_pct &lt; <a class="code" href="weather_8h.html#a12cce423aaf8408c2447cbcf82620956">BODYWET_PERCENT_SOAKED</a> ? 2 :</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                3;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#a0864aecadfbfda58af09c883f5fd2e15">effect_wet</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span>, effect_level );</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="classCharacter.html#af5e36191325bfbc72b0e624284cfebae">  216</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#af5e36191325bfbc72b0e624284cfebae">Character::update_body</a>()</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;{</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="classCharacter.html#af5e36191325bfbc72b0e624284cfebae">update_body</a>( <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> - 1_turns, <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="classCreature.html#a9c0a2f5bc6bb8c450f9eddad749cf407">last_updated</a> = <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">// Returns the number of multiples of tick_length we would &quot;pass&quot; on our way `from` to `to`</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">// For example, if `tick_length` is 1 hour, then going from 0:59 to 1:01 should return 1</span></div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="character__body_8cpp.html#af64f93e0cd0159900c96d6aab9fe9dd1">  224</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="character__body_8cpp.html#af64f93e0cd0159900c96d6aab9fe9dd1">ticks_between</a>( <span class="keyword">const</span> <a class="code" href="classtime__point.html">time_point</a> &amp;from, <span class="keyword">const</span> <a class="code" href="classtime__point.html">time_point</a> &amp;to,</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                          <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> &amp;tick_length )</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;{</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> ( to_turn&lt;int&gt;( to ) / to_turns&lt;int&gt;( tick_length ) ) - ( to_turn&lt;int&gt;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            ( from ) / to_turns&lt;int&gt;( tick_length ) );</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="classCharacter.html#a82cfc7230a6b1f95bd798bf19198da5a">  231</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#af5e36191325bfbc72b0e624284cfebae">Character::update_body</a>( <span class="keyword">const</span> <a class="code" href="classtime__point.html">time_point</a> &amp;from, <span class="keyword">const</span> <a class="code" href="classtime__point.html">time_point</a> &amp;to )</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;{</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">// Early return if we already did update previously on the same turn (e.g. when loading savegame).</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span>( to &lt;= <a class="code" href="classCreature.html#a9c0a2f5bc6bb8c450f9eddad749cf407">last_updated</a> ) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <a class="code" href="classCreature.html#a9c0a2f5bc6bb8c450f9eddad749cf407">last_updated</a> = to;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">is_npc</a>() ) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <a class="code" href="classCharacter.html#af57e8ba9aafdd6960677af16d90ce0c0">update_stamina</a>( to_turns&lt;int&gt;( to - from ) );</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a69e57fe63798a35cd107786c0a12a58b">can_recover_oxygen</a>() &amp;&amp; <a class="code" href="classCharacter.html#a865e5eb770c71b3bd4ec4a05235cd3b6">oxygen</a> &lt; <a class="code" href="classCharacter.html#a0577ee469440295bc4f4670b2bc2ede7">get_oxygen_max</a>() ) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <a class="code" href="classCharacter.html#a865e5eb770c71b3bd4ec4a05235cd3b6">oxygen</a> += <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( to_turns&lt;int&gt;( to - from ) * <a class="code" href="classCharacter.html#a0ffe14df559cee6e9b5d02f5b214d009">get_stamina</a>() * 5 * <a class="code" href="classCharacter.html#a191d57983e5a0064be49504c11e8b56a">get_modifier</a>(</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                <a class="code" href="character__body_8cpp.html#aa77ed7c083f15f6a9ca6a92185d0ab63">character_modifier_stamina_recovery_breathing_mod</a> )  / <a class="code" href="classCharacter.html#aefe5432750eb1c2c65fea628fd9878a7">get_stamina_max</a>() ), 1 );</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <a class="code" href="classCharacter.html#a865e5eb770c71b3bd4ec4a05235cd3b6">oxygen</a> = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( <a class="code" href="classCharacter.html#a865e5eb770c71b3bd4ec4a05235cd3b6">oxygen</a>, <a class="code" href="classCharacter.html#a0577ee469440295bc4f4670b2bc2ede7">get_oxygen_max</a>() );</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="classCharacter.html#abadbafc291e11034ae1db0f215e64ade">update_stomach</a>( from, to );</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="classCharacter.html#aa6396870f289f9c3b1dc4ea91f7a65f0">recalculate_enchantment_cache</a>();</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="classCharacter.html#ac5fec9c4de042aabbc37168bbcbb4ce5">update_enchantment_mutations</a>();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="character__body_8cpp.html#af64f93e0cd0159900c96d6aab9fe9dd1">ticks_between</a>( from, to, 3_minutes ) &gt; 0 ) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="classCharacter.html#af2ff32cce5f17bcf04be958121abe524">magic</a>-&gt;update_mana( *<span class="keyword">this</span>, to_turns&lt;float&gt;( 3_minutes ) );</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> five_mins = <a class="code" href="character__body_8cpp.html#af64f93e0cd0159900c96d6aab9fe9dd1">ticks_between</a>( from, to, 5_minutes );</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span>( five_mins &gt; 0 ) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordtype">float</span> sleepiness_mod = <a class="code" href="classCharacter.html#add870e576ff59aa6943af286576219e9">enchantment_cache</a>-&gt;modify_value( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998aa3b3cee6d351386a5e2706cd86a8ed99">enchant_vals::mod::SLEEPINESS</a>, 1 );</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordtype">float</span> sleepiness_regen_mod = <a class="code" href="classCharacter.html#add870e576ff59aa6943af286576219e9">enchantment_cache</a>-&gt;modify_value( <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a49899af3c1ba00e126383e9d8f09996b">enchant_vals::mod::SLEEPINESS_REGEN</a>,</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                                     1 );</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="classCharacter.html#a8f89bb839f1049beebbb66bff650db42">activity_history</a>.<a class="code" href="classactivity__tracker.html#a0ab89419aa2f00e1eb991e4d9b096d3e">try_reduce_weariness</a>( <a class="code" href="classCharacter.html#a96c49f3f9ea963e813ed6f90b19c18b7">base_bmr</a>(), sleepiness_mod, sleepiness_regen_mod );</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="classCharacter.html#a48ebd046d64553ac91ab7b8a463007dd">check_needs_extremes</a>();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <a class="code" href="classCharacter.html#a654477095d99d22583346286ce2bc6fa">update_needs</a>( five_mins );</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="classCharacter.html#a86472795da754293d2eb4d5d35534619">regen</a>( five_mins );</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="comment">// Note: mend ticks once per 5 minutes, but wants rate in TURNS, not 5 minute intervals</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="comment">// TODO: change @ref mend to take time_duration</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <a class="code" href="classCharacter.html#abc5f7517b5c9ed41ded17291a5bc7f9d">mend</a>( five_mins * to_turns&lt;int&gt;( 5_minutes ) );</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <a class="code" href="classCharacter.html#a8f89bb839f1049beebbb66bff650db42">activity_history</a>.<a class="code" href="classactivity__tracker.html#aea0585398142fd539a42038988f80c98">reset_activity_level</a>();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordtype">bool</span> was_sleeping = <a class="code" href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">get_value</a>( <span class="stringliteral">&quot;was_sleeping&quot;</span> ) == <span class="stringliteral">&quot;true&quot;</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a4f0bdbd929787a486a0dd5748ef10c65">in_sleep_state</a>() &amp;&amp; was_sleeping ) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <a class="code" href="structneeds__rates.html">needs_rates</a> tmp_rates;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <a class="code" href="classCharacter.html#af8647bc6f18ace0dbeccd5dff8b45500">calc_sleep_recovery_rate</a>( tmp_rates );</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> sleepiness_regen_rate = tmp_rates.<a class="code" href="structneeds__rates.html#a753a5b2301d9278f8b29d42df3b1eb53">recovery</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> effective_time_slept = ( to - from ) * sleepiness_regen_rate;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="classCharacter.html#a7006397bf06cdd04b1808d69fd48e707">mod_daily_sleep</a>( effective_time_slept );</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <a class="code" href="classCharacter.html#ab69f64cf85e71b7b80262685da442e50">mod_continuous_sleep</a>( effective_time_slept );</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span>( was_sleeping &amp;&amp; !<a class="code" href="classCharacter.html#a4f0bdbd929787a486a0dd5748ef10c65">in_sleep_state</a>() ) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a5a3caa102dc37449f727d8c32d741d7c">get_continuous_sleep</a>() &gt;= 6_hours ) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <a class="code" href="classCreature.html#a04c1983abeefbf67db1e3f2b2a9b58ab">set_value</a>( <span class="stringliteral">&quot;sleep_health_mult&quot;</span>, <span class="stringliteral">&quot;2&quot;</span> );</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <a class="code" href="classCharacter.html#a2628a1ee62641b2dcbb1037d5477181b">reset_continuous_sleep</a>();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 12_hours ) ) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> sleep_health_mult = <a class="code" href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">get_value</a>( <span class="stringliteral">&quot;sleep_health_mult&quot;</span> ) == <span class="stringliteral">&quot;2&quot;</span> ? 2 : 1;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">mod_daily_health</a>( sleep_health_mult * to_hours&lt;int&gt;( <a class="code" href="classCharacter.html#ad5a4b3a6d42ca7483b4db66a209de350">get_daily_sleep</a>() ), 10 );</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <a class="code" href="classCreature.html#a04c1983abeefbf67db1e3f2b2a9b58ab">set_value</a>( <span class="stringliteral">&quot;sleep_health_mult&quot;</span>, <span class="stringliteral">&quot;1&quot;</span> );</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 1_days ) ) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <a class="code" href="classCharacter.html#a83a488cecdb389877d2148c36bcb97f5">reset_daily_sleep</a>();</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="classCreature.html#a04c1983abeefbf67db1e3f2b2a9b58ab">set_value</a>( <span class="stringliteral">&quot;was_sleeping&quot;</span>, <a class="code" href="classCharacter.html#a4f0bdbd929787a486a0dd5748ef10c65">in_sleep_state</a>() ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span> );</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="classCharacter.html#a8f89bb839f1049beebbb66bff650db42">activity_history</a>.<a class="code" href="classactivity__tracker.html#a5586030bfb3a6ec4e7498908261086b8">new_turn</a>( <a class="code" href="classCharacter.html#a4f0bdbd929787a486a0dd5748ef10c65">in_sleep_state</a>() );</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">// Cardio related health stuff</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 1_days ) ) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="comment">// not getting below half stamina even once in a whole day is not healthy</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">get_value</a>( <span class="stringliteral">&quot;got_to_half_stam&quot;</span> ).empty() ) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <a class="code" href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">mod_daily_health</a>( -4, -200 );</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <a class="code" href="classCreature.html#a6ad06869ed97eb2701f5f74b7d36281e">remove_value</a>( <span class="stringliteral">&quot;got_to_half_stam&quot;</span> );</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="comment">// reset counter for number of time going below quarter stamina</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <a class="code" href="classCreature.html#a04c1983abeefbf67db1e3f2b2a9b58ab">set_value</a>( <span class="stringliteral">&quot;quarter_stam_counter&quot;</span>, <span class="stringliteral">&quot;0&quot;</span> );</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordtype">int</span> cardio_accumultor = <a class="code" href="classCharacter.html#a74ea39bd5cfd3989342daf4f6c5fa2ea">get_cardio_acc</a>();</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">if</span>( cardio_accumultor &gt; 0 ) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <a class="code" href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">mod_daily_health</a>( 1, 200 );</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">if</span>( cardio_accumultor &gt;= 10 ) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                <a class="code" href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">mod_daily_health</a>( 1, 200 );</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">if</span>( cardio_accumultor &lt; 0 ) {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <a class="code" href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">mod_daily_health</a>( -1, -200 );</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">if</span>( cardio_accumultor &lt;= -10 ) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                <a class="code" href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">mod_daily_health</a>( -1, -200 );</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">if</span>( cardio_accumultor &gt;= <a class="code" href="classCharacter.html#a517b958e3db0d2619eb237aa838ffe71">get_cardio_acc_base</a>() ) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <a class="code" href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">mod_daily_health</a>( 2, 200 );</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;v : <a class="code" href="classvitamin.html#abed8d50d1b8805a7f7ce49ce09ab1b7a">vitamin::all</a>() ) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keyword">const</span> <a class="code" href="classtime__duration.html">time_duration</a> rate = <a class="code" href="classCharacter.html#aca04618a096cdf167a88143d66d4aa0a">vitamin_rate</a>( v.first );</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="comment">// No blood volume regeneration if body lacks fluids</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">if</span>( v.first == <a class="code" href="character__body_8cpp.html#a0fc6709b43edf2d7ca11dccafdb71052">vitamin_blood</a> &amp;&amp; <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__body_8cpp.html#ab987f0249d5dcb5a351fe48ffebffc55">effect_hypovolemia</a> ) &amp;&amp; <a class="code" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() &gt; 240 ) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">if</span>( rate &gt; 0_turns ) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="keywordtype">int</span> qty = <a class="code" href="character__body_8cpp.html#af64f93e0cd0159900c96d6aab9fe9dd1">ticks_between</a>( from, to, rate );</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keywordflow">if</span>( qty &gt; 0 ) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                <a class="code" href="classCharacter.html#ae411805e21f6e2adcca747c5c61b9be0">vitamin_mod</a>( v.first, 0 - qty );</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( rate &lt; 0_turns ) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="comment">// mutations can result in vitamins being generated (but never accumulated)</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <span class="keywordtype">int</span> qty = <a class="code" href="character__body_8cpp.html#af64f93e0cd0159900c96d6aab9fe9dd1">ticks_between</a>( from, to, -rate );</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <span class="keywordflow">if</span>( qty &gt; 0 ) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                <a class="code" href="classCharacter.html#ae411805e21f6e2adcca747c5c61b9be0">vitamin_mod</a>( v.first, qty );</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 24_hours ) &amp;&amp; v.first-&gt;type() == <a class="code" href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd">vitamin_type::VITAMIN</a> ) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;vit_quantity = <a class="code" href="classCharacter.html#a315b653b250c40f9c34fd20253f0e69e">get_daily_vitamin</a>( v.first, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> RDA = <a class="code" href="classCharacter.html#aa23ac0479291f0d7cfec1432ec4612d2">vitamin_RDA</a>( v.first, vit_quantity );</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            <span class="keywordflow">if</span>( RDA &gt;= 50 ) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                <a class="code" href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">mod_daily_health</a>( 1, 200 );</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="keywordflow">if</span>( RDA &gt;= 90 ) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <a class="code" href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">mod_daily_health</a>( 1, 200 );</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <span class="comment">// once we&#39;ve checked daily intake we should reset it</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <a class="code" href="classCharacter.html#a0932b7b9d2a60fbbb3f529420c8713d8">reset_daily_vitamin</a>( v.first );</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> thirty_mins = <a class="code" href="character__body_8cpp.html#af64f93e0cd0159900c96d6aab9fe9dd1">ticks_between</a>( from, to, 30_minutes );</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">if</span>( thirty_mins &gt; 0 ) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <a class="code" href="classCharacter.html#aeb515d0fba62b5051045b206ade7ee31">update_health</a>();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 1_minutes ) ) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <a class="code" href="classCharacter.html#a170fafbb40a7a5d375e1d5c617540d63">update_bloodvol_index</a>();</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <a class="code" href="classCharacter.html#ada3998df8603ef742373dbc228ac7820">update_heartrate_index</a>();</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <a class="code" href="classCharacter.html#ab819e08febc259c326511186905d4989">update_circulation</a>();</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() &amp;&amp; <a class="code" href="character__body_8cpp.html#af64f93e0cd0159900c96d6aab9fe9dd1">ticks_between</a>( from, to, 24_hours ) &gt; 0 ) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>()-&gt;<a class="code" href="classavatar.html#a4c07a102dc6e18b31eea927c5297bf01">update_cardio_acc</a>();</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <a class="code" href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">as_avatar</a>()-&gt;<a class="code" href="classavatar.html#a0698f21d33da87261681237fef7b5002">advance_daily_calories</a>();</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 24_hours ) ) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <a class="code" href="classCharacter.html#a4e8716e54043dc4adb51bc8bd2832580">do_skill_rust</a>();</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;}</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="classCharacter.html#ac5fec9c4de042aabbc37168bbcbb4ce5">  380</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#ac5fec9c4de042aabbc37168bbcbb4ce5">Character::update_enchantment_mutations</a>()</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;{</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">// after recalcing the enchantment cache can properly remove and add mutations</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keyword">const</span> std::vector&lt;trait_id&gt; &amp;current_traits = <a class="code" href="classCharacter.html#a9b2b7e1e9f7bf88c5f0d7ea2155642be">get_mutations</a>();</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> &amp;mut : <a class="code" href="classCharacter.html#ad4a6dd5ac7fae2ac49fb3ed28c47e3cb">mutations_to_remove</a> ) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="comment">// check if the player still has a mutation</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="comment">// since a trait from an item might be provided by another item as well</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keyword">auto</span> it = std::find( current_traits.begin(), current_traits.end(), mut );</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">if</span>( it == current_traits.end() ) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="keyword">const</span> <a class="code" href="structmutation__branch.html">mutation_branch</a> &amp;mut_b = *mut;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <a class="code" href="classCharacter.html#a4863cebe02ce178af7eb2351a59824af">cached_mutations</a>.erase( std::remove( <a class="code" href="classCharacter.html#a4863cebe02ce178af7eb2351a59824af">cached_mutations</a>.begin(), <a class="code" href="classCharacter.html#a4863cebe02ce178af7eb2351a59824af">cached_mutations</a>.end(), &amp;mut_b ),</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                                    <a class="code" href="classCharacter.html#a4863cebe02ce178af7eb2351a59824af">cached_mutations</a>.end() );</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <a class="code" href="classCharacter.html#acda9c561191689a3bdf5ecbd7474ccd3">mutation_loss_effect</a>( mut );</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <a class="code" href="classCharacter.html#a3af86f02cd2055f220d3e80788e30f65">enchantment_wear_change</a>();</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classstring__id.html">trait_id</a> &amp;mut : <a class="code" href="classCharacter.html#a62ab7c4550ce76204e86b54457bfad71">mutations_to_add</a> ) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <a class="code" href="classCharacter.html#a4863cebe02ce178af7eb2351a59824af">cached_mutations</a>.push_back( &amp;mut.obj() );</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <a class="code" href="classCharacter.html#a0db6db96a763c104f325ad13b85f014d">mutation_effect</a>( mut, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <a class="code" href="classCharacter.html#a3af86f02cd2055f220d3e80788e30f65">enchantment_wear_change</a>();</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <a class="code" href="classCharacter.html#a62ab7c4550ce76204e86b54457bfad71">mutations_to_add</a>.clear();</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="classCharacter.html#ad4a6dd5ac7fae2ac49fb3ed28c47e3cb">mutations_to_remove</a>.clear();</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">/* Here lies the intended effects of body temperature</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">Assumption 1 : a naked person is comfortable at 19C/66.2F (31C/87.8F at rest).</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">Assumption 2 : a &quot;lightly clothed&quot; person is comfortable at 13C/55.4F (25C/77F at rest).</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">Assumption 3 : the player is always running, thus generating more heat.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">Assumption 4 : frostbite cannot happen above 0C temperature.*</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">* In the current model, a naked person can get frostbite at 1C. This isn&#39;t true, but it&#39;s a compromise with using nice whole numbers.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">Here is a list of warmth values and the corresponding temperatures in which the player is comfortable, and in which the player is very cold.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">Warmth  Temperature (Comfortable)    Temperature (Very cold)    Notes</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">  0       19C /  66.2F               -11C /  12.2F               * Naked</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment"> 10       13C /  55.4F               -17C /   1.4F               * Lightly clothed</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment"> 20        7C /  44.6F               -23C /  -9.4F</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment"> 30        1C /  33.8F               -29C / -20.2F</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment"> 40       -5C /  23.0F               -35C / -31.0F</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"> 50      -11C /  12.2F               -41C / -41.8F</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment"> 60      -17C /   1.4F               -47C / -52.6F</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment"> 70      -23C /  -9.4F               -53C / -63.4F</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"> 80      -29C / -20.2F               -59C / -74.2F</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment"> 90      -35C / -31.0F               -65C / -85.0F</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">100      -41C / -41.8F               -71C / -95.8F</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">WIND POWER</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">Except for the last entry, pressures are sort of made up...</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">Breeze : 5mph (1015 hPa)</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">Strong Breeze : 20 mph (1000 hPa)</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">Moderate Gale : 30 mph (990 hPa)</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">Storm : 50 mph (970 hPa)</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">Hurricane : 100 mph (920 hPa)</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">HURRICANE : 185 mph (880 hPa) [Ref: Hurricane Wilma]</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="classCharacter.html#aeed55362be6677861a62ce2c49960810">  439</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#aeed55362be6677861a62ce2c49960810">Character::update_bodytemp</a>()</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;{</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__body_8cpp.html#a2049ad3a20e013061ce05da335d08179">trait_DEBUG_NOTEMP</a> ) ) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <a class="code" href="classCreature.html#ad783dabe159958ef84fda098adc655fe">set_all_parts_temp_conv</a>( <a class="code" href="weather_8h.html#ab95846d85630066250f5bf05f06f51db">BODYTEMP_NORM</a> );</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <a class="code" href="classCreature.html#a6d140fa65e8f80987add3259db6cc170">set_all_parts_temp_cur</a>( <a class="code" href="weather_8h.html#ab95846d85630066250f5bf05f06f51db">BODYTEMP_NORM</a> );</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <a class="code" href="classweather__manager.html">weather_manager</a> &amp;weather_man = <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>();</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">/* Cache calls to g-&gt;get_temperature( player position ), used in several places in function */</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a> player_local_temp = weather_man.<a class="code" href="group__Weather.html#ga92e3dd986a664a399dffe62d2ebe2139">get_temperature</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keyword">const</span> <a class="code" href="structw__point.html">w_point</a> weather = *weather_man.<a class="code" href="classweather__manager.html#a65e0974692317dee8098564d9952ec88">weather_precise</a>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordtype">int</span> vehwindspeed = 0;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <a class="code" href="classmap.html">map</a> &amp;here = <a class="code" href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a>();</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keyword">const</span> <a class="code" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = here.<a class="code" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">if</span>( vp ) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        vehwindspeed = <a class="code" href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">std::abs</a>( vp-&gt;vehicle().velocity / 100 ); <span class="comment">// vehicle velocity in mph</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keyword">const</span> <a class="code" href="classint__id.html">oter_id</a> &amp;cur_om_ter = <a class="code" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code" href="classovermapbuffer.html#aa9fbf966291f6b82de9c540262324aba">ter</a>( <a class="code" href="classCreature.html#a14ecbd8f044628463354090421a805b4">global_omt_location</a>() );</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordtype">bool</span> sheltered = <a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_sheltered( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordtype">int</span> bp_windpower = <a class="code" href="group__Weather.html#ga41d8c01f9a844c01ed5bd8a7d3ad805b">get_local_windpower</a>( weather_man.<a class="code" href="classweather__manager.html#ae21ca8b6895d5b684f224a35590e54a5">windspeed</a> + vehwindspeed, cur_om_ter,</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                                            <a class="code" href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">get_location</a>(), weather_man.<a class="code" href="classweather__manager.html#a410734bb787ca2653905ca7a1c704b88">winddirection</a>, sheltered );</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">// Let&#39;s cache this not to check it for every bodyparts</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_bark = <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__body_8cpp.html#a305fb2a130a501be6d0170d8dac09e8a">trait_BARK</a> );</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_sleep = <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__body_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">effect_sleep</a> );</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_sleep_state = has_sleep || <a class="code" href="classCharacter.html#a4f0bdbd929787a486a0dd5748ef10c65">in_sleep_state</a>();</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> heat_immune = <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="character__body_8cpp.html#a2e0c7f462cebbf255a0471adb66442dd">json_flag_HEAT_IMMUNE</a> );</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_heatsink = <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="character__body_8cpp.html#a5e214c27e471a762c49dc1e0b819ec2f">json_flag_HEATSINK</a> ) || <a class="code" href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">is_wearing</a>( <a class="code" href="character__body_8cpp.html#a2e1ccdf5aa874eaaf8e3f14757d72179">itype_rm13_armor_on</a> ) ||</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                              heat_immune;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_common_cold = <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__body_8cpp.html#ad42a2492eba82e538cb9a07114fe9118">effect_common_cold</a> );</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keyword">const</span> std::pair&lt;int, int&gt; climate_control = <a class="code" href="classCharacter.html#ad8801271966e104b24bcd19dfc735b95">climate_control_strength</a>();</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> climate_control_heat = climate_control.first;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> climate_control_chill = climate_control.second;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> use_floor_warmth = <a class="code" href="classCharacter.html#ac1cb4fe3c92b17fe1ac8a1658154aecf">can_use_floor_warmth</a>();</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keyword">const</span> <a class="code" href="classint__id.html">furn_id</a> furn_at_pos = here.<a class="code" href="classmap.html#af55e014aab791bbe4c8630361c1311dd">furn</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keyword">const</span> std::optional&lt;vpart_reference&gt; boardable = vp.<a class="code" href="classoptional__vpart__position.html#a4c78451e42e97753079ecd2a54c7143d">part_with_feature</a>( <span class="stringliteral">&quot;BOARDABLE&quot;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">// This means which temperature is comfortable for a naked person</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="comment">// Ambient normal temperature is lower while asleep</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a> ambient_norm = has_sleep ? 31_C : 19_C;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">     * Calculations that affect all body parts equally go here, not in the loop</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">// Hunger / Starvation</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">// -2C when about to starve to death</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// -2.6666C when starving with light eater</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment">// -4C if you managed to get 0 metabolism rate somehow</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> met_rate = <a class="code" href="classCharacter.html#a24a1143537358b4138e3d9d504847a81">metabolic_rate</a>();</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> hunger_warmth = 4_C_delta * <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( met_rate, 1.0f ) - 4_C_delta;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">// Give SOME bonus to those living furnaces with extreme metabolism</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> metabolism_warmth = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.0f, met_rate - 1.0f ) * 2_C_delta;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="comment">// Sleepiness</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="comment">// -1.725C when exhausted, scaled up and capped at 900 sleepiness.</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> scaled_sleepiness = <a class="code" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( <a class="code" href="classCharacter.html#a241e50ee41a2a2b54f1c1329cb60a174">get_sleepiness</a>(), 0,</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                                           900 ) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( <a class="code" href="character_8h.html#a28256deb3e43854efdc7035ae555212bac30a2ebffd3127f9dc4bb1cff2e29cea">sleepiness_levels::EXHAUSTED</a> );</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> sleepiness_warmth = has_sleep ? 0_C_delta : -1.725_C_delta *</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            scaled_sleepiness;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">// Sunlight</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> scaled_sun_irradiance = <a class="code" href="group__Weather.html#gad83f21ad25e9b3edcd48ada9130cd512">incident_sun_irradiance</a>( <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().weather_id,</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                                        <a class="code" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) / <a class="code" href="calendar_8cpp.html#a79cdf1cca1806e313ad51075023c2ff3">max_sun_irradiance</a>();</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> sunlight_warmth = !<a class="code" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_sheltered( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ? 3_C_delta *</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            scaled_sun_irradiance :</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            0_C_delta;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> best_fire = <a class="code" href="game_8cpp.html#a36df7132ccbfa295fabff9ba6251dd5f">get_best_fire</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> lying_warmth = use_floor_warmth ? <a class="code" href="classCharacter.html#ad34f73a380f10a167d5a301594a08ea7">floor_warmth</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) : 0_C_delta;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a> water_temperature =</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().<a class="code" href="group__Weather.html#ga090dd5274c7af40d32814a41f2e16fe0">get_cur_weather_gen</a>().<a class="code" href="classweather__generator.html#a458f992d029de9f8f06bca1ac448819c">get_water_temperature</a>();</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="comment">// Correction of body temperature due to traits and mutations</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="comment">// Lower heat is applied always</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> mutation_heat_low = <a class="code" href="classCharacter.html#a1d7a77cd3514e9e8b113497fbf86e3c6">bodytemp_modifier_traits</a>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> mutation_heat_high = <a class="code" href="classCharacter.html#a1d7a77cd3514e9e8b113497fbf86e3c6">bodytemp_modifier_traits</a>( <span class="keyword">false</span> );</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="comment">// Difference between high and low is the &quot;safe&quot; heat - one we only apply if it&#39;s beneficial</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> mutation_heat_bonus = mutation_heat_high - mutation_heat_low;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> h_radiation = <a class="code" href="game_8cpp.html#abe70ab885639c40fb92f3adf812ebaf6">get_heat_radiation</a>( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() );</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="comment">// 111F (44C) is a temperature in which proteins break down: https://en.wikipedia.org/wiki/Burn</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="comment">// Blisters arbitrarily scale with the sqrt of the temperature difference in fahrenheit.</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> radiation_blister_count = h_radiation &gt; 44_C_delta ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#aeb3bbc4ec861ea58cbfca028920e4cc6">std::sqrt</a>(</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                                            <a class="code" href="namespaceunits.html#aeb8137b871270efbb596a5881aa67527">units::to_fahrenheit_delta</a>( h_radiation - 44_C_delta ) ) ) : 0;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    std::map&lt;bodypart_id, std::vector&lt;const item *&gt;&gt; clothing_map;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : <a class="code" href="classCreature.html#a4537397ede1aea8ecec28183252aabe3">get_all_body_parts</a>() ) {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        clothing_map.emplace( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, std::vector&lt;const item *&gt;() );</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    }</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="comment">// fat insulates and increases total heat production of body, but it should have a diminishing effect.</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="comment">// at 5 over healthy bmi (obese), it is ~5 warmth, at 20 over healthy bmi (morbid obesity) it is ~12 warmth</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="comment">// effects start to kick in halfway through overweightness</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> bmi_heat_bonus = 0.1_C_delta * <a class="code" href="math__parser__func_8h.html#aeb3bbc4ec861ea58cbfca028920e4cc6">std::sqrt</a>( <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 0.0f,</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            ( <a class="code" href="classCharacter.html#a51eea7d6d7e07294b74c4fcf93d77923">get_bmi_fat</a>() - 8.0f ) ) );</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    std::map&lt;bodypart_id, int&gt; warmth_per_bp = <a class="code" href="classCharacter.html#a46302dc71cfc84856e8af85ddb61c7e1">worn</a>.<a class="code" href="classoutfit.html#ab919d43f3403e3fa0d7df1a847d3a606">warmth</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    std::map&lt;bodypart_id, int&gt; bonus_warmth_per_bp = <a class="code" href="classCharacter.html#a7e6047473daf10a958da373672bc782a">bonus_item_warmth</a>();</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    std::map&lt;bodypart_id, int&gt; wind_res_per_bp = <a class="code" href="classCharacter.html#a2390104b9c8741944fe8d9df0ade22bd">get_wind_resistance</a>( clothing_map );</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="comment">// We might not use this at all, so leave it empty</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="comment">// If we do need to use it, we&#39;ll initialize it (once) there</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    std::map&lt;bodypart_id, int&gt; fire_armor_per_bp;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="comment">// Current temperature and converging temperature calculations</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> : <a class="code" href="classCreature.html#a4537397ede1aea8ecec28183252aabe3">get_all_body_parts</a>() ) {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#afd43ba79d412b38476f718534904fce7">has_flag</a>( <a class="code" href="character__body_8cpp.html#a18cca0d60af04a241e2561584946cf56">json_flag_IGNORE_TEMP</a> ) ) {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="comment">// Represents the fact that the body generates heat when it is cold.</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="comment">// TODO: : should this increase hunger?</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> scaled_temperature = <a class="code" href="cata__utility_8cpp.html#a6a85dc6d2ab7bcb093e77d20fcf171d6">logarithmic_range</a>( <a class="code" href="namespaceunits.html#a9a5827312b56a57d423cb19197bcc358">units::to_celsius</a>( <a class="code" href="weather_8h.html#a447b0a37d377ef3455dc0a154c3d1b0c">BODYTEMP_VERY_COLD</a> ),</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                                          <a class="code" href="namespaceunits.html#a9a5827312b56a57d423cb19197bcc358">units::to_celsius</a>( <a class="code" href="weather_8h.html#a192f85471c11eb34255865b8d429bc21">BODYTEMP_VERY_HOT</a> ),</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                                          <a class="code" href="namespaceunits.html#a9a5827312b56a57d423cb19197bcc358">units::to_celsius</a>( <a class="code" href="classCreature.html#acb022e34c016f883fb785ab8af715bd0">get_part_temp_cur</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) ) );</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="comment">// Produces a smooth curve between 0.06C and 0.12C.</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> homeostasis_adjustment = 0.06_C_delta * ( 1.0 + scaled_temperature );</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> clothing_warmth_adjustment = homeostasis_adjustment *</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                warmth_per_bp[<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>];</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> clothing_warmth_adjusted_bonus = homeostasis_adjustment *</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                bonus_warmth_per_bp[<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>];</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="comment">// WINDCHILL</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        bp_windpower = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( bp_windpower ) *</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                                         ( 1 - wind_res_per_bp[<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>] / 100.0 ) );</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="comment">// Calculate windchill</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> windchill = <a class="code" href="group__Weather.html#ga8db4da91fa5a84dc3a064b99963cf846">get_local_windchill</a>( player_local_temp,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                                             <a class="code" href="group__Weather.html#ga3b6c37e7f8086254c46acb9572ea97d1">get_local_humidity</a>( weather.humidity, <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().weather_id, sheltered ),</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                                             bp_windpower );</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">auto</span> is_lower = []( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp; <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#afd43ba79d412b38476f718534904fce7">has_flag</a>( <a class="code" href="character__body_8cpp.html#a37e9489598e65e89dc71e28cb45c30f5">json_flag_LIMB_LOWER</a> );</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        };</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="comment">// Intrinsic bp warmth is always applied</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> bp_temp_min = <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#a567ff9b8a8e0580957c138a586a7afaa">temp_min</a>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> bp_temp_bonus = <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#afd523ff71db9b39b9218f0590570a414">temp_max</a> - bp_temp_min;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="comment">// Change the ambient temperature into a delta based on our comfortable temperature.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> adjusted_temp = player_local_temp - ambient_norm;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="comment">// If you&#39;re standing in water, air temperature is replaced by water temperature. No wind.</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">if</span>( here.<a class="code" href="classmap.html#af0e872a5d0a7bf1e9745aeb18d3b5e44">has_flag_ter</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1">ter_furn_flag::TFLAG_DEEP_WATER</a>, <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) ||</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            ( here.<a class="code" href="classmap.html#af0e872a5d0a7bf1e9745aeb18d3b5e44">has_flag_ter</a>( <a class="code" href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a7de97a0bb289f6e3177be7916d329c93">ter_furn_flag::TFLAG_SHALLOW_WATER</a>, <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) &amp;&amp; is_lower( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) ) ) {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            adjusted_temp = water_temperature - ambient_norm; <span class="comment">// Swap out air temp for water temp.</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            windchill = 0_C_delta;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="comment">// In previous versions, the contribution from ambient normal temperature was calculated in an</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="comment">// arbitrary scale where 100u = 1C, but body temperature was 500u = 1C. We need to scale the</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="comment">// delta down to preserve this bug.</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        adjusted_temp /= 5.0;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="comment">// In previous versions the body temperature calculations mixed units, which caused a lot of bugs.</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="comment">// This results in needing to preserve those bugs for game balance, which is why we are doing this</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="comment">// odd scaling of windchill.</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> bugged_windchill = <a class="code" href="namespaceunits.html#ab48631971d0388e681d061f87a88fcfa">units::from_celsius_delta</a>(</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                    <a class="code" href="namespaceunits.html#aeb8137b871270efbb596a5881aa67527">units::to_fahrenheit_delta</a>( windchill ) * 100.0 / 500.0 );</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="comment">// Convergent temperature is affected by ambient temperature,</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="comment">// clothing warmth, and body wetness.</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a> <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> = <a class="code" href="weather_8h.html#ab95846d85630066250f5bf05f06f51db">BODYTEMP_NORM</a> + adjusted_temp + clothing_warmth_adjustment +</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                                        bp_temp_min + bugged_windchill;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <a class="code" href="classCreature.html#ad698149db2e025cddd1e774770fc7de8">set_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <a class="code" href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">temp</a> );</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="comment">// HUNGER / STARVATION</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <a class="code" href="classCreature.html#ae8f80dc1205c60890a41fb5d34ea97a6">mod_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, hunger_warmth );</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="comment">// SLEEPINESS</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <a class="code" href="classCreature.html#ae8f80dc1205c60890a41fb5d34ea97a6">mod_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, sleepiness_warmth );</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="comment">// Mutations</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <a class="code" href="classCreature.html#ae8f80dc1205c60890a41fb5d34ea97a6">mod_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, mutation_heat_low );</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="comment">// BMI</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <a class="code" href="classCreature.html#ae8f80dc1205c60890a41fb5d34ea97a6">mod_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, bmi_heat_bonus );</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="comment">// DIRECT HEAT SOURCES (generates body heat, helps fight frostbite)</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="comment">// Bark : lowers blister count to -5; harder to get blisters</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="keywordtype">int</span> blister_count = has_bark ? -5 : 0; <span class="comment">// If the counter is high, your skin starts to burn</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a617d9f695722c4865c7d60ef30438711">get_part_frostbite_timer</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) &gt; 0 ) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <a class="code" href="classCreature.html#a8d6c44f7a224dca20bd27befb6133db3">mod_part_frostbite_timer</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, -<a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( 5.0f, <a class="code" href="namespaceunits.html#aeb8137b871270efbb596a5881aa67527">units::to_fahrenheit_delta</a>( h_radiation ) ) );</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        blister_count += radiation_blister_count;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> pyromania = <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__body_8cpp.html#a512959ad2b35ea057f2fed5445fc23c4">trait_PYROMANIA</a> );</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="comment">// BLISTERS : Skin gets blisters from intense heat exposure.</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="comment">// Fire protection protects from blisters.</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="comment">// Heatsinks give near-immunity.</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">if</span>( has_heatsink ) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            blister_count -= 20;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="keywordflow">if</span>( fire_armor_per_bp.empty() &amp;&amp; blister_count &gt; 0 ) {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            fire_armor_per_bp = <a class="code" href="classCharacter.html#ae69d15c326c6243a9d5e7c2d4bf99b5b">get_all_armor_type</a>( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( <a class="code" href="type__id_8h.html#a119965745ae171b731d18a45ec6ee424">damage_type_id</a>( <span class="stringliteral">&quot;heat&quot;</span> ) ), clothing_map );</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">if</span>( blister_count - fire_armor_per_bp[<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>] &gt; 0 ) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#a6fa88d25e9b69979f002a30d541b6244">effect_blisters</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <span class="keywordflow">if</span>( pyromania ) {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#ac24628e1ae610080c72e7f73dd720279">MORALE_PYROMANIA_NEARFIRE</a>, 10, 10, 1_hours,</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                            30_minutes ); <span class="comment">// Proximity that&#39;s close enough to harm us gives us a bit of a thrill</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                <a class="code" href="classCharacter.html#a2725bcbfa9e92e0590930e6a8e35764c">rem_morale</a>( <a class="code" href="morale__types_8cpp.html#ae932ffaaef9c3a4092fc8727141405bf">MORALE_PYROMANIA_NOFIRE</a> );</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pyromania &amp;&amp; best_fire &gt;= 1 ) { <span class="comment">// Only give us fire bonus if there&#39;s actually fire</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#ac24628e1ae610080c72e7f73dd720279">MORALE_PYROMANIA_NEARFIRE</a>, 5, 5, 30_minutes,</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                        15_minutes ); <span class="comment">// Gain a much smaller mood boost even if it doesn&#39;t hurt us</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <a class="code" href="classCharacter.html#a2725bcbfa9e92e0590930e6a8e35764c">rem_morale</a>( <a class="code" href="morale__types_8cpp.html#ae932ffaaef9c3a4092fc8727141405bf">MORALE_PYROMANIA_NOFIRE</a> );</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <a class="code" href="classCreature.html#ae8f80dc1205c60890a41fb5d34ea97a6">mod_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, sunlight_warmth );</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="comment">// DISEASES</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == <a class="code" href="bodypart_8cpp.html#ade2e301ed150ac0191c87e8fb19420c1">body_part_head</a> &amp;&amp; <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__body_8cpp.html#ab558627fa5f7d625a9883d230e8525ae">effect_flu</a> ) ) {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <a class="code" href="classCreature.html#ae8f80dc1205c60890a41fb5d34ea97a6">mod_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, 3_C_delta );</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="keywordflow">if</span>( has_common_cold ) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            <a class="code" href="classCreature.html#ae8f80dc1205c60890a41fb5d34ea97a6">mod_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, -1.5_C_delta );</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <a class="code" href="classCharacter.html#ad616e0deca97e35dbbc76e35da1831ee">temp_equalizer</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#ab2d8ca27584109b9d36424f1f4dd92fe">connected_to</a> );</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <a class="code" href="classCharacter.html#ad616e0deca97e35dbbc76e35da1831ee">temp_equalizer</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#ab88f4c72186cad27609e877dd46d2c33">main_part</a> );</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="comment">// Climate Control eases the effects of high and low ambient temps</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="keywordflow">if</span>( climate_control_heat || climate_control_chill ) {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <a class="code" href="classCreature.html#ad698149db2e025cddd1e774770fc7de8">set_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <a class="code" href="classCharacter.html#a51bc8c5d29ce51eee2eca42767487ac9">temp_corrected_by_climate_control</a>( <a class="code" href="classCreature.html#a5619a04558f7cf1ea1fb24bcbca84cab">get_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ),</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                                climate_control_heat, climate_control_chill ) );</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="comment">// FINAL CALCULATION : Increments current body temperature towards convergent.</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> bonus_fire_warmth = 0_C_delta;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordflow">if</span>( !has_sleep_state &amp;&amp; best_fire &gt; 0 ) {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <span class="comment">// Warming up over a fire</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == <a class="code" href="bodypart_8cpp.html#aebd4726eec42047e34e492f029b52206">body_part_foot_l</a> || <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == <a class="code" href="bodypart_8cpp.html#a1e5a8dc07b262107fd65bfbe882b5458">body_part_foot_r</a> ) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                <span class="keywordflow">if</span>( furn_at_pos != <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">furn_str_id::NULL_ID</a>() ) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                    <span class="comment">// Can sit on something to lift feet up to the fire</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                    bonus_fire_warmth = best_fire * furn_at_pos.<a class="code" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code" href="structfurn__t.html#a902f269d07d55a20d61d3335cc893a62">bonus_fire_warmth_feet</a>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( boardable ) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                    bonus_fire_warmth = best_fire * boardable-&gt;info().bonus_fire_warmth_feet;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                    <span class="comment">// Has to stand</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                    bonus_fire_warmth = best_fire * <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#a501bada99ae2a3ee588bd614c98c9f1b">fire_warmth_bonus</a>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                bonus_fire_warmth = best_fire * <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#a501bada99ae2a3ee588bd614c98c9f1b">fire_warmth_bonus</a>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="comment">// exp(-0.001) : half life of 60 minutes, exp(-0.002) : half life of 30 minutes,</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <span class="comment">// exp(-0.003) : half life of 20 minutes, exp(-0.004) : half life of 15 minutes</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> convergence_multiplier = 1 - std::exp( -0.002 );</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> comfortable_warmth = bonus_fire_warmth + lying_warmth;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> bonus_warmth = comfortable_warmth + metabolism_warmth +</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                mutation_heat_bonus + bp_temp_bonus;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="keywordflow">if</span>( bonus_warmth &gt; 0_C_delta ) {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            <span class="comment">// Approximate temp_conv needed to reach comfortable temperature in this very turn</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            <span class="comment">// Basically inverted formula for temp_cur below</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> delta = ( <a class="code" href="weather_8h.html#ab95846d85630066250f5bf05f06f51db">BODYTEMP_NORM</a> - <a class="code" href="classCreature.html#a5619a04558f7cf1ea1fb24bcbca84cab">get_part_temp_conv</a>(</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                    <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) ) / convergence_multiplier;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <a class="code" href="classunits_1_1quantity.html">units::temperature</a> desired = <a class="code" href="weather_8h.html#ab95846d85630066250f5bf05f06f51db">BODYTEMP_NORM</a> + delta;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="namespaceunits.html#afdbb046eecc8c9d147d1058ae56e7ff0">units::abs</a>( <a class="code" href="weather_8h.html#ab95846d85630066250f5bf05f06f51db">BODYTEMP_NORM</a> - desired ) &lt; 2_C_delta ) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                desired = <a class="code" href="weather_8h.html#ab95846d85630066250f5bf05f06f51db">BODYTEMP_NORM</a>; <span class="comment">// Ensure that it converges</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( desired &gt; <a class="code" href="weather_8h.html#abd1400294a14a4d8ad1a2e41813b0f6e">BODYTEMP_HOT</a> ) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                desired = <a class="code" href="weather_8h.html#abd1400294a14a4d8ad1a2e41813b0f6e">BODYTEMP_HOT</a>; <span class="comment">// Cap excess at sane temperature</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            <span class="keywordflow">if</span>( desired &lt; <a class="code" href="classCreature.html#a5619a04558f7cf1ea1fb24bcbca84cab">get_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) ) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                <span class="comment">// Too hot, can&#39;t help here</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( desired &lt; <a class="code" href="classCreature.html#a5619a04558f7cf1ea1fb24bcbca84cab">get_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) + bonus_warmth ) {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                <span class="comment">// Use some heat, but not all of it</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                <a class="code" href="classCreature.html#ad698149db2e025cddd1e774770fc7de8">set_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, desired );</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                <span class="comment">// Use all the heat</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                <a class="code" href="classCreature.html#ae8f80dc1205c60890a41fb5d34ea97a6">mod_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, bonus_warmth );</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            <span class="comment">// Morale bonus for comfiness - only if actually comfy (not too warm/cold)</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <span class="comment">// Spread the morale bonus in time.</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;            <span class="keywordflow">if</span>( comfortable_warmth &gt; 0_C_delta &amp;&amp;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                <a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 1_minutes ) &amp;&amp; <a class="code" href="classCreature.html#a9689d4816bc2d1204c53c114190fde50">get_effect_int</a>( <a class="code" href="character__body_8cpp.html#a1e2a085a78738d789a7447af81ed3deb">effect_cold</a> ) == 0 &amp;&amp;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                <a class="code" href="classCreature.html#a9689d4816bc2d1204c53c114190fde50">get_effect_int</a>( <a class="code" href="character__body_8cpp.html#a4c80f98459b07d9175c344914b1525dd">effect_hot</a> ) == 0 &amp;&amp;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                <a class="code" href="classCreature.html#a5619a04558f7cf1ea1fb24bcbca84cab">get_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) &gt; <a class="code" href="weather_8h.html#aa08ed5af6f28c1fdf8c6927e0ad78cde">BODYTEMP_COLD</a> &amp;&amp; <a class="code" href="classCreature.html#a5619a04558f7cf1ea1fb24bcbca84cab">get_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) &lt;= <a class="code" href="weather_8h.html#ab95846d85630066250f5bf05f06f51db">BODYTEMP_NORM</a> ) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                <a class="code" href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">add_morale</a>( <a class="code" href="morale__types_8cpp.html#ab4cb4741ce3812b07717e4eff93ab493">MORALE_COMFY</a>, 1, 10, 2_minutes, 1_minutes, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a> temp_before = <a class="code" href="classCreature.html#acb022e34c016f883fb785ab8af715bd0">get_part_temp_cur</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a> cur_temp_conv = <a class="code" href="classCreature.html#a5619a04558f7cf1ea1fb24bcbca84cab">get_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <a class="code" href="classunits_1_1quantity.html">units::temperature_delta</a> temp_difference = cur_temp_conv - temp_before;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="comment">// This statement checks if we should be wearing our bonus warmth.</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="comment">// If, after all the warmth calculations, we should be, then we have to recalculate the temperature.</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <span class="keywordflow">if</span>( clothing_warmth_adjusted_bonus &gt; 0_C_delta &amp;&amp;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            ( ( cur_temp_conv + clothing_warmth_adjusted_bonus ) &lt; <a class="code" href="weather_8h.html#abd1400294a14a4d8ad1a2e41813b0f6e">BODYTEMP_HOT</a> ||</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;              <a class="code" href="classCreature.html#acb022e34c016f883fb785ab8af715bd0">get_part_temp_cur</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) &lt; <a class="code" href="weather_8h.html#aa08ed5af6f28c1fdf8c6927e0ad78cde">BODYTEMP_COLD</a> ) ) {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            <a class="code" href="classCreature.html#ae8f80dc1205c60890a41fb5d34ea97a6">mod_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, clothing_warmth_adjusted_bonus );</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a> new_temp_conv = <a class="code" href="classCreature.html#a5619a04558f7cf1ea1fb24bcbca84cab">get_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            temp_difference = new_temp_conv - <a class="code" href="classCreature.html#acb022e34c016f883fb785ab8af715bd0">get_part_temp_cur</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="comment">// Finally apply the temperature changes, subject to decay.</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <a class="code" href="classCreature.html#a50eb7b6f001c10c9ee253ad8b85f57a9">set_part_temp_cur</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, temp_before + temp_difference * convergence_multiplier );</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a> temp_after = <a class="code" href="classCreature.html#acb022e34c016f883fb785ab8af715bd0">get_part_temp_cur</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="comment">// PENALTIES</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <span class="keywordflow">if</span>( temp_after &lt; <a class="code" href="weather_8h.html#a386d267aeeaabb81cf4e19e61127e840">BODYTEMP_FREEZING</a> ) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#a1e2a085a78738d789a7447af81ed3deb">effect_cold</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span>, 3 );</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( temp_after &lt; <a class="code" href="weather_8h.html#a447b0a37d377ef3455dc0a154c3d1b0c">BODYTEMP_VERY_COLD</a> ) {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#a1e2a085a78738d789a7447af81ed3deb">effect_cold</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span>, 2 );</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( temp_after &lt; <a class="code" href="weather_8h.html#aa08ed5af6f28c1fdf8c6927e0ad78cde">BODYTEMP_COLD</a> ) {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#a1e2a085a78738d789a7447af81ed3deb">effect_cold</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span>, 1 );</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( temp_after &gt; <a class="code" href="weather_8h.html#a73d8da6de438a650cedd7eab20c89b3c">BODYTEMP_SCORCHING</a> &amp;&amp; !heat_immune ) {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#a4c80f98459b07d9175c344914b1525dd">effect_hot</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span>, 3 );</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            <span class="comment">// if a main part and past the additional threshold for heat tolerance</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#ab88f4c72186cad27609e877dd46d2c33">main_part</a> == <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>.<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>() &amp;&amp; temp_after &gt; <a class="code" href="weather_8h.html#a73d8da6de438a650cedd7eab20c89b3c">BODYTEMP_SCORCHING</a> + <a class="code" href="weather_8h.html#ad073aa70d5b0e9ac6614117b2db52155">BODYTEMP_THRESHOLD</a> ) {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#acb85acf9c8e335d2a81088095aa6c986">effect_hot_speed</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span>, 3 );</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#acb85acf9c8e335d2a81088095aa6c986">effect_hot_speed</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span>, 2 );</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( temp_after &gt; <a class="code" href="weather_8h.html#a192f85471c11eb34255865b8d429bc21">BODYTEMP_VERY_HOT</a> &amp;&amp; !heat_immune ) {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#a4c80f98459b07d9175c344914b1525dd">effect_hot</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span>, 2 );</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            <span class="comment">// if a main part and past the additional threshold for heat tolerance</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#ab88f4c72186cad27609e877dd46d2c33">main_part</a> == <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>.<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>() &amp;&amp; temp_after &gt; <a class="code" href="weather_8h.html#a192f85471c11eb34255865b8d429bc21">BODYTEMP_VERY_HOT</a> + <a class="code" href="weather_8h.html#ad073aa70d5b0e9ac6614117b2db52155">BODYTEMP_THRESHOLD</a> ) {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#acb85acf9c8e335d2a81088095aa6c986">effect_hot_speed</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span>, 2 );</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#acb85acf9c8e335d2a81088095aa6c986">effect_hot_speed</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span>, 1 );</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( temp_after &gt; <a class="code" href="weather_8h.html#abd1400294a14a4d8ad1a2e41813b0f6e">BODYTEMP_HOT</a> &amp;&amp; !heat_immune ) {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#a4c80f98459b07d9175c344914b1525dd">effect_hot</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span>, 1 );</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            <span class="comment">// if a main part and past the additional threshold for heat tolerance</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>-&gt;<a class="code" href="structbody__part__type.html#ab88f4c72186cad27609e877dd46d2c33">main_part</a> == <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>.<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>() &amp;&amp; temp_after &gt; <a class="code" href="weather_8h.html#abd1400294a14a4d8ad1a2e41813b0f6e">BODYTEMP_HOT</a> + <a class="code" href="weather_8h.html#ad073aa70d5b0e9ac6614117b2db52155">BODYTEMP_THRESHOLD</a> ) {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#acb85acf9c8e335d2a81088095aa6c986">effect_hot_speed</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span>, 1 );</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#acb85acf9c8e335d2a81088095aa6c986">effect_hot_speed</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#a1e2a085a78738d789a7447af81ed3deb">effect_cold</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#a4c80f98459b07d9175c344914b1525dd">effect_hot</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#acb85acf9c8e335d2a81088095aa6c986">effect_hot_speed</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        }</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <a class="code" href="classCharacter.html#a5e8c602b59f317fda67c51ee187695d8">update_frostbite</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, bp_windpower, warmth_per_bp );</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="comment">// Warn the player if condition worsens</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">if</span>( temp_before &gt; <a class="code" href="weather_8h.html#a386d267aeeaabb81cf4e19e61127e840">BODYTEMP_FREEZING</a> &amp;&amp; temp_after &lt; <a class="code" href="weather_8h.html#a386d267aeeaabb81cf4e19e61127e840">BODYTEMP_FREEZING</a> ) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="comment">//~ %s is bodypart</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel your %s beginning to go numb from the cold!&quot;</span> ),</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                     <a class="code" href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( temp_before &gt; <a class="code" href="weather_8h.html#a447b0a37d377ef3455dc0a154c3d1b0c">BODYTEMP_VERY_COLD</a> &amp;&amp; temp_after &lt; <a class="code" href="weather_8h.html#a447b0a37d377ef3455dc0a154c3d1b0c">BODYTEMP_VERY_COLD</a> ) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            <span class="comment">//~ %s is bodypart</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel your %s getting very cold.&quot;</span> ),</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                     <a class="code" href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( temp_before &gt; <a class="code" href="weather_8h.html#aa08ed5af6f28c1fdf8c6927e0ad78cde">BODYTEMP_COLD</a> &amp;&amp; temp_after &lt; <a class="code" href="weather_8h.html#aa08ed5af6f28c1fdf8c6927e0ad78cde">BODYTEMP_COLD</a> ) {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            <span class="comment">//~ %s is bodypart</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel your %s getting chilly.&quot;</span> ),</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                     <a class="code" href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( temp_before &lt; BODYTEMP_SCORCHING &amp;&amp; temp_after &gt; <a class="code" href="weather_8h.html#a73d8da6de438a650cedd7eab20c89b3c">BODYTEMP_SCORCHING</a> ) {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            <span class="comment">//~ %s is bodypart</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel your %s getting red hot from the heat!&quot;</span> ),</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                     <a class="code" href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( temp_before &lt; BODYTEMP_VERY_HOT &amp;&amp; temp_after &gt; <a class="code" href="weather_8h.html#a192f85471c11eb34255865b8d429bc21">BODYTEMP_VERY_HOT</a> ) {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <span class="comment">//~ %s is bodypart</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel your %s getting very hot.&quot;</span> ),</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                     <a class="code" href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( temp_before &lt; BODYTEMP_HOT &amp;&amp; temp_after &gt; <a class="code" href="weather_8h.html#abd1400294a14a4d8ad1a2e41813b0f6e">BODYTEMP_HOT</a> ) {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <span class="comment">//~ %s is bodypart</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel your %s getting warm.&quot;</span> ),</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                     <a class="code" href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        }</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160; </div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="comment">// Note: Numbers are based off of BODYTEMP at the top of weather.h</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="comment">// If torso is BODYTEMP_COLD which is 34C, the early stages of hypothermia begin</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="comment">// constant shivering will prevent the player from falling asleep.</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="comment">// Lowering this threshold to BODYTEMP_VERY_COLD because currently temp_cur is added up</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="comment">// by numbers that are in different unit.</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="comment">// Otherwise, if any other body part is BODYTEMP_VERY_COLD, or 31C</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <span class="comment">// AND you have frostbite, then that also prevents you from sleeping</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a4f0bdbd929787a486a0dd5748ef10c65">in_sleep_state</a>() &amp;&amp; !<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__body_8cpp.html#a1a6476e8888f0929f469fd9af2d629bc">effect_narcosis</a> ) ) {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == <a class="code" href="bodypart_8cpp.html#aa1af101175ef4c9194f748dd67829fa9">body_part_torso</a> &amp;&amp; temp_after &lt;= <a class="code" href="weather_8h.html#aa08ed5af6f28c1fdf8c6927e0ad78cde">BODYTEMP_COLD</a> &amp;&amp; <a class="code" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 1_hours ) ) {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You feel cold and shiver.&quot;</span> ) );</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            <span class="keywordflow">if</span>( temp_after &lt;= <a class="code" href="weather_8h.html#a447b0a37d377ef3455dc0a154c3d1b0c">BODYTEMP_VERY_COLD</a> &amp;&amp;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                <a class="code" href="classCharacter.html#a241e50ee41a2a2b54f1c1329cb60a174">get_sleepiness</a>() &lt;= <a class="code" href="character_8h.html#a28256deb3e43854efdc7035ae555212ba9ff6c94d7bbe4244ae18258b07f5ff32">sleepiness_levels::DEAD_TIRED</a> &amp;&amp; !<a class="code" href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">has_bionic</a>( <a class="code" href="character__body_8cpp.html#a18b7dcae7ca83a37c9c4ba81991a4056">bio_sleep_shutdown</a> ) ) {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == <a class="code" href="bodypart_8cpp.html#aa1af101175ef4c9194f748dd67829fa9">body_part_torso</a> ) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your shivering prevents you from sleeping.&quot;</span> ) );</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                    <a class="code" href="classCharacter.html#a0b32571db45faeab8561f33af6da1e28">wake_up</a>();</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__body_8cpp.html#afd4a5a40423282c43d1715bf1cc99357">effect_frostbite</a> ) ) {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                    <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You are too cold.  Your frostbite prevents you from sleeping.&quot;</span> ) );</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                    <a class="code" href="classCharacter.html#a0b32571db45faeab8561f33af6da1e28">wake_up</a>();</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                }</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a> conv_temp = <a class="code" href="classCreature.html#a5619a04558f7cf1ea1fb24bcbca84cab">get_part_temp_conv</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="comment">// Warn the player that wind is going to be a problem.</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="comment">// But only if it can be a problem, no need to spam player with &quot;wind chills your scorching body&quot;</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="keywordflow">if</span>( conv_temp &lt;= <a class="code" href="weather_8h.html#aa08ed5af6f28c1fdf8c6927e0ad78cde">BODYTEMP_COLD</a> &amp;&amp; windchill &lt; <a class="code" href="namespaceunits.html#a70f92b42412609565a84bf9a7ff422a0">units::from_fahrenheit_delta</a>( -10 ) &amp;&amp;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 200 ) ) {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The wind is making your %s feel quite cold.&quot;</span> ),</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                     <a class="code" href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( conv_temp &lt;= <a class="code" href="weather_8h.html#aa08ed5af6f28c1fdf8c6927e0ad78cde">BODYTEMP_COLD</a> &amp;&amp; windchill &lt; <a class="code" href="namespaceunits.html#a70f92b42412609565a84bf9a7ff422a0">units::from_fahrenheit_delta</a>( -20 ) &amp;&amp;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                   <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 100 ) ) {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>,</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                     <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;The wind is very strong; you should find some more wind-resistant clothing for your %s.&quot;</span> ),</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                     <a class="code" href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( conv_temp &lt;= <a class="code" href="weather_8h.html#aa08ed5af6f28c1fdf8c6927e0ad78cde">BODYTEMP_COLD</a> &amp;&amp; windchill &lt; <a class="code" href="namespaceunits.html#a345181745bb0299d6f6f8f96d4f4acdc">units::from_kelvin_delta</a>( -30 ) &amp;&amp;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                   <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 50 ) ) {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your clothing is not providing enough protection from the wind for your %s!&quot;</span> ),</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                     <a class="code" href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;}</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno"><a class="line" href="classCharacter.html#a5e8c602b59f317fda67c51ee187695d8">  840</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a5e8c602b59f317fda67c51ee187695d8">Character::update_frostbite</a>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">const</span> <span class="keywordtype">int</span> FBwindPower,</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                                  <span class="keyword">const</span> std::map&lt;bodypart_id, int&gt; &amp;warmth_per_bp )</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;{</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="comment">// FROSTBITE - only occurs to hands, feet, face</span><span class="comment"></span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment">    Source : http://www.atc.army.mil/weather/windchill.pdf</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">    Temperature and wind chill are main factors, mitigated by clothing warmth. Each 10 warmth protects against 2C of cold.</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">    1200 turns in low risk, + 3 tics</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">    450 turns in moderate risk, + 8 tics</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment">    50 turns in high risk, +72 tics</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">    Let&#39;s say frostnip @ 1800 tics, frostbite @ 3600 tics</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">    &gt;&gt; Chunked into 8 parts (http://imgur.com/xlTPmJF)</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">    -- 2 hour risk --</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">    Between 30F and 10F</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">    Between 10F and -5F, less than 20mph, -4x + 3y - 20 &gt; 0, x : F, y : mph</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment">    -- 45 minute risk --</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">    Between 10F and -5F, less than 20mph, -4x + 3y - 20 &lt; 0, x : F, y : mph</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">    Between 10F and -5F, greater than 20mph</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">    Less than -5F, less than 10 mph</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">    Less than -5F, more than 10 mph, -4x + 3y - 170 &gt; 0, x : F, y : mph</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">    -- 5 minute risk --</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment">    Less than -5F, more than 10 mph, -4x + 3y - 170 &lt; 0, x : F, y : mph</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment">    Less than -35F, more than 10 mp</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment">    **/</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> player_local_temp = <a class="code" href="namespaceunits.html#ae31e6d9c71949a72ee41be4be6f1afcd">units::to_fahrenheit</a>( <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().get_temperature( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) );</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::temperature</a> temp_after = <a class="code" href="classCreature.html#acb022e34c016f883fb785ab8af715bd0">get_part_temp_cur</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == <a class="code" href="bodypart_8cpp.html#acce4686c4642d33fd10230b461987d34">body_part_mouth</a> || <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == <a class="code" href="bodypart_8cpp.html#a1e5a8dc07b262107fd65bfbe882b5458">body_part_foot_r</a> ||</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == <a class="code" href="bodypart_8cpp.html#aebd4726eec42047e34e492f029b52206">body_part_foot_l</a> || <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == <a class="code" href="bodypart_8cpp.html#a67fd1441077f21f79e895830d0534b2b">body_part_hand_r</a> || <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> == <a class="code" href="bodypart_8cpp.html#ae00eb113c2ff69f1818aeefe0d00f876">body_part_hand_l</a> ) {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="comment">// Handle the frostbite timer</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <span class="comment">// Need temps in F, windPower already in mph</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="keywordtype">int</span> wetness_percentage = 100 * <a class="code" href="classCreature.html#a4b42a11004d8092e0453f9122632de99">get_part_wetness_percentage</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ); <span class="comment">// 0 - 100</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="comment">// Warmth gives a slight buff to temperature resistance</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="comment">// Wetness gives a heavy nerf to temperature resistance</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="keywordtype">double</span> adjusted_warmth = warmth_per_bp.at( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) - wetness_percentage;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordtype">int</span> Ftemperature = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( player_local_temp + 0.2 * adjusted_warmth );</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordtype">int</span> intense = <a class="code" href="classCreature.html#a9689d4816bc2d1204c53c114190fde50">get_effect_int</a>( <a class="code" href="character__body_8cpp.html#afd4a5a40423282c43d1715bf1cc99357">effect_frostbite</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160; </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="comment">// This has been broken down into 8 zones</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="comment">// Low risk zones (stops at frostnip)</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="keywordflow">if</span>( temp_after &lt; <a class="code" href="weather_8h.html#aa08ed5af6f28c1fdf8c6927e0ad78cde">BODYTEMP_COLD</a> &amp;&amp; ( ( Ftemperature &lt; 30 &amp;&amp; Ftemperature &gt;= 10 ) ||</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                                            ( Ftemperature &lt; 10 &amp;&amp; Ftemperature &gt;= -5 &amp;&amp; FBwindPower &lt; 20 &amp;&amp;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                                              -4 * Ftemperature + 3 * FBwindPower - 20 &gt;= 0 ) ) ) {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a617d9f695722c4865c7d60ef30438711">get_part_frostbite_timer</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) &lt; 2000 ) {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                <a class="code" href="classCreature.html#a8d6c44f7a224dca20bd27befb6133db3">mod_part_frostbite_timer</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, 3 );</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            }</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 100 ) &amp;&amp; !<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__body_8cpp.html#afd4a5a40423282c43d1715bf1cc99357">effect_frostbite</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>.<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>() ) ) {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s will be frostnipped in the next few hours.&quot;</span> ),</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                         <a class="code" href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            }</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;            <span class="comment">// Medium risk zones</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( temp_after &lt; <a class="code" href="weather_8h.html#aa08ed5af6f28c1fdf8c6927e0ad78cde">BODYTEMP_COLD</a> &amp;&amp;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                   ( ( Ftemperature &lt; 10 &amp;&amp; Ftemperature &gt;= -5 &amp;&amp; FBwindPower &lt; 20 &amp;&amp;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                       -4 * Ftemperature + 3 * FBwindPower - 20 &lt; 0 ) ||</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                     ( Ftemperature &lt; 10 &amp;&amp; Ftemperature &gt;= -5 &amp;&amp; FBwindPower &gt;= 20 ) ||</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                     ( Ftemperature &lt; -5 &amp;&amp; FBwindPower &lt; 10 ) ||</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                     ( Ftemperature &lt; -5 &amp;&amp; FBwindPower &gt;= 10 &amp;&amp;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                       -4 * Ftemperature + 3 * FBwindPower - 170 &gt;= 0 ) ) ) {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            <a class="code" href="classCreature.html#a8d6c44f7a224dca20bd27befb6133db3">mod_part_frostbite_timer</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, 8 );</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 100 ) &amp;&amp; intense &lt; 2 ) {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s will be frostbitten within the hour!&quot;</span> ),</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                         <a class="code" href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            <span class="comment">// High risk zones</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( temp_after &lt; <a class="code" href="weather_8h.html#aa08ed5af6f28c1fdf8c6927e0ad78cde">BODYTEMP_COLD</a> &amp;&amp;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                   ( ( Ftemperature &lt; -5 &amp;&amp; FBwindPower &gt;= 10 &amp;&amp;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                       -4 * Ftemperature + 3 * FBwindPower - 170 &lt; 0 ) ||</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                     ( Ftemperature &lt; -35 &amp;&amp; FBwindPower &gt;= 10 ) ) ) {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;            <a class="code" href="classCreature.html#a8d6c44f7a224dca20bd27befb6133db3">mod_part_frostbite_timer</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, 72 );</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 100 ) &amp;&amp; intense &lt; 2 ) {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                <a class="code" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Your %s will be frostbitten any minute now!&quot;</span> ),</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                         <a class="code" href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ) );</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            <span class="comment">// Risk free, so reduce frostbite timer</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            <a class="code" href="classCreature.html#a8d6c44f7a224dca20bd27befb6133db3">mod_part_frostbite_timer</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, -3 );</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        }</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160; </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="keywordtype">int</span> frostbite_timer = <a class="code" href="classCreature.html#a617d9f695722c4865c7d60ef30438711">get_part_frostbite_timer</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <span class="comment">// Handle the bestowing of frostbite</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <span class="keywordflow">if</span>( frostbite_timer &lt; 0 ) {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <a class="code" href="classCreature.html#a371a35ce9173bd2c444cb08c64726560">set_part_frostbite_timer</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, 0 );</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( frostbite_timer &gt; 4200 ) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            <span class="comment">// This ensures that the player will recover in at most 3 hours.</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            <a class="code" href="classCreature.html#a371a35ce9173bd2c444cb08c64726560">set_part_frostbite_timer</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, 4200 );</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        }</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        frostbite_timer = <a class="code" href="classCreature.html#a617d9f695722c4865c7d60ef30438711">get_part_frostbite_timer</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="comment">// Frostbite, no recovery possible</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="keywordflow">if</span>( frostbite_timer &gt;= 3600 ) {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#afd4a5a40423282c43d1715bf1cc99357">effect_frostbite</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span>, 2 );</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#a7b7626136317fab938997e90fd3f5876">effect_frostbite_recovery</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            <span class="comment">// Else frostnip, add recovery if we were frostbitten</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( frostbite_timer &gt;= 1800 ) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            <span class="keywordflow">if</span>( intense == 2 ) {</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#a7b7626136317fab938997e90fd3f5876">effect_frostbite_recovery</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            }</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code" href="character__body_8cpp.html#afd4a5a40423282c43d1715bf1cc99357">effect_frostbite</a>, 1_turns, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span>, 1 );</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            <span class="comment">// Else fully recovered</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( frostbite_timer == 0 ) {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#afd4a5a40423282c43d1715bf1cc99357">effect_frostbite</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;            <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#a7b7626136317fab938997e90fd3f5876">effect_frostbite_recovery</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;}</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno"><a class="line" href="classCharacter.html#abadbafc291e11034ae1db0f215e64ade">  952</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#abadbafc291e11034ae1db0f215e64ade">Character::update_stomach</a>( <span class="keyword">const</span> <a class="code" href="classtime__point.html">time_point</a> &amp;from, <span class="keyword">const</span> <a class="code" href="classtime__point.html">time_point</a> &amp;to )</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;{</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keyword">const</span> <a class="code" href="structneeds__rates.html">needs_rates</a> rates = <a class="code" href="classCharacter.html#ab1c5a29039893bd41d82908a9eb5655a">calc_needs_rates</a>();</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="comment">// No food/thirst/sleepiness clock at all</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> debug_ls = <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__body_8cpp.html#a226c0f7c43c2c2718701324d346bd831">trait_DEBUG_LS</a> );</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> foodless = debug_ls || !<a class="code" href="classCharacter.html#aae2bc9c34641e5e18b8a3bdc111b4323">needs_food</a>();</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> no_thirst = <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="character__body_8cpp.html#a5e4712a48bd75fcf33e7f8d605ab75b8">json_flag_NO_THIRST</a> );</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceiuse.html#a87919f860221208970b40d2ec859fd55">mycus</a> = <a class="code" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code" href="character__body_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a> );</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> kcal_per_time = <a class="code" href="classCharacter.html#a2fd91641a2b7d9449712891d16e347dc">get_bmr</a>() / ( 12.0f * 24.0f );</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> five_mins = <a class="code" href="character__body_8cpp.html#af64f93e0cd0159900c96d6aab9fe9dd1">ticks_between</a>( from, to, 5_minutes );</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> half_hours = <a class="code" href="character__body_8cpp.html#af64f93e0cd0159900c96d6aab9fe9dd1">ticks_between</a>( from, to, 30_minutes );</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::volume</a> stomach_capacity = <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a93a1500302155581c1846aa84314b81b">capacity</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160; </div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keywordflow">if</span>( five_mins &gt; 0 ) {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="comment">// Digest nutrients in stomach, they are destined for the guts (except water)</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <a class="code" href="structfood__summary.html">food_summary</a> digested_to_guts = <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a5c9cbe0f4330c8b1d41e8088181d6772">digest</a>( *<span class="keyword">this</span>, rates, five_mins, half_hours );</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <span class="comment">// Digest nutrients in guts, they will be distributed to needs levels</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <a class="code" href="structfood__summary.html">food_summary</a> digested_to_body = <a class="code" href="classCharacter.html#a6e24aab61f2ff8333a4f938cce785b3f">guts</a>.<a class="code" href="classstomach__contents.html#a5c9cbe0f4330c8b1d41e8088181d6772">digest</a>( *<span class="keyword">this</span>, rates, five_mins, half_hours );</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        <span class="comment">// Water from stomach skips guts and gets absorbed by body</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <a class="code" href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">mod_thirst</a>( -units::to_milliliter&lt;int&gt;( digested_to_guts.<a class="code" href="structfood__summary.html#a095be6f7ae52f5d095c41281e4f73dd1">water</a> ) / 5 );</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="comment">// For vitamins, normal vitamins go through guts.</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <span class="comment">// However, drug vitamins skip guts and get absorbed directly into the body.</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="classvitamin.html">vitamin</a> : digested_to_guts.<a class="code" href="structfood__summary.html#a98ff8c8827e0da9ef2563f999867f86e">nutr</a>.<a class="code" href="structnutrients.html#a5bbbdebac3455bf17563f7f8754e1a10">vitamins</a>() ) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            <span class="comment">// collect all drug vitamins in a map</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            std::map&lt;vitamin_id, int&gt; drug_vitamins;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            <span class="keyword">const</span> <a class="code" href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38">vitamin_type</a> &amp;<a class="code" href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38">vitamin_type</a> = <a class="code" href="classvitamin.html">vitamin</a>.first-&gt;<a class="code" href="classvitamin.html#ad77f86e9d837ddf8f19e5f38664743f0">type</a>();</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38">vitamin_type</a> == <a class="code" href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38a7de90f4165664a5c6990c3e8fec46e3b">vitamin_type::DRUG</a> ) {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                drug_vitamins[<a class="code" href="classvitamin.html">vitamin</a>.first] = <a class="code" href="classvitamin.html">vitamin</a>.second;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            }</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            <a class="code" href="classCharacter.html#ac39374642038bc8b3dff5346d8a92000">vitamins_mod</a>( <a class="code" href="classCharacter.html#acc82e3ba51a76736d0e6c58d97a629f9">effect_vitamin_mod</a>( drug_vitamins ) );</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        <a class="code" href="classCharacter.html#a6e24aab61f2ff8333a4f938cce785b3f">guts</a>.<a class="code" href="classstomach__contents.html#a96eccd372c5b0f42ca47bfd7bfeabaec">ingest</a>( digested_to_guts );</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <a class="code" href="classCharacter.html#a04fc1337bdd5b0865a7c47e36b034b7e">mod_stored_kcal</a>( digested_to_body.<a class="code" href="structfood__summary.html#a98ff8c8827e0da9ef2563f999867f86e">nutr</a>.<a class="code" href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">kcal</a>() );</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <a class="code" href="classCharacter.html#ac39374642038bc8b3dff5346d8a92000">vitamins_mod</a>( <a class="code" href="classCharacter.html#acc82e3ba51a76736d0e6c58d97a629f9">effect_vitamin_mod</a>( digested_to_body.<a class="code" href="structfood__summary.html#a98ff8c8827e0da9ef2563f999867f86e">nutr</a>.<a class="code" href="structnutrients.html#a5bbbdebac3455bf17563f7f8754e1a10">vitamins</a>() ) );</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <a class="code" href="classCharacter.html#ad70d441e74ceb7f972ec2f88bcaeba14">log_activity_level</a>( <a class="code" href="classCharacter.html#a8f89bb839f1049beebbb66bff650db42">activity_history</a>.<a class="code" href="classactivity__tracker.html#a3bacbd18e39f1c0cdc2a632f7f720201">average_activity</a>() );</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <span class="keywordflow">if</span>( !foodless &amp;&amp; rates.<a class="code" href="structneeds__rates.html#a537fb128d773bdfedddacda084367e3a">hunger</a> &gt; 0.0f ) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            <a class="code" href="classCharacter.html#aa5b5af8930de14abd0df92f007e9d176">mod_hunger</a>( <a class="code" href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a>( rates.<a class="code" href="structneeds__rates.html#a537fb128d773bdfedddacda084367e3a">hunger</a> * five_mins ) );</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            <span class="comment">// instead of hunger keeping track of how you&#39;re living, burn calories instead</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            <span class="comment">// Explicitly floor it here, the int cast will do so anyways</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            <a class="code" href="classCharacter.html#a633f77d7216de89b079a1a382b7d233a">mod_stored_calories</a>( -<a class="code" href="math__parser__func_8h.html#a204ca52ef1b97d079c45e1cb6407f73b">std::floor</a>( five_mins * kcal_per_time * 1000 ) );</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        }</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    }</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="comment">// if foodless no need to calc hunger, and set hunger_effect</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">if</span>( foodless ) {</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    }</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#ace65447c3d3c8aea9d16531303d58a24">time_since_ate</a>() &gt; 10_minutes ) {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a52e4721f4afcc99ddb28d261fc90cc32">contains</a>() &gt;= stomach_capacity &amp;&amp; <a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() &gt; -61 ) {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            <span class="comment">// you&#39;re engorged! your stomach is full to bursting!</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            <a class="code" href="classCharacter.html#a7bb3c92bba69a2421c07748f57aa4d82">set_hunger</a>( -61 );</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a52e4721f4afcc99ddb28d261fc90cc32">contains</a>() &gt;= stomach_capacity / 2 &amp;&amp; <a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() &gt; -21 ) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            <span class="comment">// full</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            <a class="code" href="classCharacter.html#a7bb3c92bba69a2421c07748f57aa4d82">set_hunger</a>( -21 );</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a52e4721f4afcc99ddb28d261fc90cc32">contains</a>() &gt;= stomach_capacity / 8 &amp;&amp; <a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() &gt; -1 ) {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            <span class="comment">// that&#39;s really all the food you need to feel full</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <a class="code" href="classCharacter.html#a7bb3c92bba69a2421c07748f57aa4d82">set_hunger</a>( -1 );</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a52e4721f4afcc99ddb28d261fc90cc32">contains</a>() == 0_ml ) {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a6e24aab61f2ff8333a4f938cce785b3f">guts</a>.<a class="code" href="classstomach__contents.html#aa5cf12fa92df9630e78c4cf5af74d616">get_calories</a>() == 0 &amp;&amp; <a class="code" href="classCharacter.html#a824a60fef8920f38a6f1e1b35bea4879">get_stored_kcal</a>() &lt; <a class="code" href="classCharacter.html#aaa88cf522afdfdc90edcbd9fdefca47d">get_healthy_kcal</a>() &amp;&amp; <a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() &lt; 300 ) {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                <span class="comment">// there&#39;s no food except what you have stored in fat</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                <a class="code" href="classCharacter.html#a7bb3c92bba69a2421c07748f57aa4d82">set_hunger</a>( 300 );</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() &lt; 100 &amp;&amp; ( ( <a class="code" href="classCharacter.html#a6e24aab61f2ff8333a4f938cce785b3f">guts</a>.<a class="code" href="classstomach__contents.html#aa5cf12fa92df9630e78c4cf5af74d616">get_calories</a>() == 0 &amp;&amp;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                                                 <a class="code" href="classCharacter.html#a824a60fef8920f38a6f1e1b35bea4879">get_stored_kcal</a>() &gt;= <a class="code" href="classCharacter.html#aaa88cf522afdfdc90edcbd9fdefca47d">get_healthy_kcal</a>() ) || <a class="code" href="classCharacter.html#a824a60fef8920f38a6f1e1b35bea4879">get_stored_kcal</a>() &lt; <a class="code" href="classCharacter.html#aaa88cf522afdfdc90edcbd9fdefca47d">get_healthy_kcal</a>() ) ) {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                <a class="code" href="classCharacter.html#a7bb3c92bba69a2421c07748f57aa4d82">set_hunger</a>( 100 );</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() &lt; 0 ) {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                <a class="code" href="classCharacter.html#a7bb3c92bba69a2421c07748f57aa4d82">set_hunger</a>( 0 );</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            }</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="comment">// you fill up when you eat fast, but less so than if you eat slow</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <span class="comment">// if you just ate but your stomach is still empty it will still</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <span class="comment">// delay your filling up (drugs?)</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a52e4721f4afcc99ddb28d261fc90cc32">contains</a>() &gt;= stomach_capacity &amp;&amp; <a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() &gt; -61 ) {</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            <span class="comment">// you&#39;re engorged! your stomach is full to bursting!</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            <a class="code" href="classCharacter.html#a7bb3c92bba69a2421c07748f57aa4d82">set_hunger</a>( -61 );</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a52e4721f4afcc99ddb28d261fc90cc32">contains</a>() &gt;= stomach_capacity * 3 / 4 &amp;&amp; <a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() &gt; -21 ) {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            <span class="comment">// full</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <a class="code" href="classCharacter.html#a7bb3c92bba69a2421c07748f57aa4d82">set_hunger</a>( -21 );</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a52e4721f4afcc99ddb28d261fc90cc32">contains</a>() &gt;= stomach_capacity / 2 &amp;&amp; <a class="code" href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">get_hunger</a>() &gt; -1 ) {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            <span class="comment">// that&#39;s really all the food you need to feel full</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <a class="code" href="classCharacter.html#a7bb3c92bba69a2421c07748f57aa4d82">set_hunger</a>( -1 );</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a52e4721f4afcc99ddb28d261fc90cc32">contains</a>() &gt; 0_ml &amp;&amp; <a class="code" href="classCharacter.html#a42c4ba47635e0659553c233c399da84a">get_kcal_percent</a>() &gt; 0.95 ) {</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <span class="comment">// usually eating something cools your hunger</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            <a class="code" href="classCharacter.html#a7bb3c92bba69a2421c07748f57aa4d82">set_hunger</a>( 0 );</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    }</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordflow">if</span>( !foodless &amp;&amp; rates.<a class="code" href="structneeds__rates.html#ad1c618eb1d5d9b3b98155bcbe952a098">thirst</a> &gt; 0.0f ) {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        <a class="code" href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">mod_thirst</a>( <a class="code" href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a>( rates.<a class="code" href="structneeds__rates.html#ad1c618eb1d5d9b3b98155bcbe952a098">thirst</a> * five_mins ) );</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    }</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="comment">// Mycus and Metabolic Rehydration makes thirst unnecessary</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="comment">// since water is not limited by intake but by absorption, we can just set thirst to zero</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="namespaceiuse.html#a87919f860221208970b40d2ec859fd55">mycus</a> || no_thirst ) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <a class="code" href="classCharacter.html#ae6bcae1e1d30b35e0152b5e1bd615f5e">set_thirst</a>( 0 );</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160; </div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> calorie_deficit = <a class="code" href="classCharacter.html#a51eea7d6d7e07294b74c4fcf93d77923">get_bmi_fat</a>() &lt; <a class="code" href="namespacecharacter__weight__category.html#a4796dc02b0d31bbc649f0d96a93fd600">character_weight_category::normal</a>;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::volume</a> <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a857af22f119fefbfa24769ed2ad6d5e7">contains</a> = <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a52e4721f4afcc99ddb28d261fc90cc32">contains</a>();</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keyword">const</span> <a class="code" href="classunits_1_1quantity.html">units::volume</a> cap = <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#a93a1500302155581c1846aa84314b81b">capacity</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <a class="code" href="classstring__id.html">efftype_id</a> hunger_effect;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="comment">// i ate just now!</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> just_ate = <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#ace65447c3d3c8aea9d16531303d58a24">time_since_ate</a>() &lt; 15_minutes;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="comment">// i ate a meal recently enough that i shouldn&#39;t need another meal</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> recently_ate = <a class="code" href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">stomach</a>.<a class="code" href="classstomach__contents.html#ace65447c3d3c8aea9d16531303d58a24">time_since_ate</a>() &lt; 3_hours;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="comment">// Hunger effect should intensify whenever stomach contents decreases, last eaten time increases, or calorie deficit intensifies.</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keywordflow">if</span>( calorie_deficit ) {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <span class="comment">//              just_ate    recently_ate</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <span class="comment">//              &lt;15 min     &lt;3 hrs      &gt;=3 hrs</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <span class="comment">// &gt;= cap       engorged    engorged    engorged</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <span class="comment">// &gt; 3/4 cap    full        full        full</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <span class="comment">// &gt; 1/2 cap    satisfied   v. hungry   famished/(near)starving</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <span class="comment">// &lt;= 1/2 cap   hungry      v. hungry   famished/(near)starving</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a857af22f119fefbfa24769ed2ad6d5e7">contains</a> &gt;= cap ) {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            hunger_effect = <a class="code" href="character__body_8cpp.html#a3124b68e352cad48fc7848f4dc58973b">effect_hunger_engorged</a>;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a857af22f119fefbfa24769ed2ad6d5e7">contains</a> &gt; cap * 3 / 4 ) {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            hunger_effect = <a class="code" href="character__body_8cpp.html#aa2e65123ffb4aa24bb23f1bf49f5dc01">effect_hunger_full</a>;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( just_ate &amp;&amp; <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a857af22f119fefbfa24769ed2ad6d5e7">contains</a> &gt; cap / 2 ) {</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;            hunger_effect = <a class="code" href="character__body_8cpp.html#a8b84fb29e831d3d5948f3003808d2c93">effect_hunger_satisfied</a>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( just_ate ) {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            hunger_effect = <a class="code" href="character__body_8cpp.html#abcdd71c4a5fac2f06983145c1bf5c9e1">effect_hunger_hungry</a>;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( recently_ate ) {</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            hunger_effect = <a class="code" href="character__body_8cpp.html#a454de2cafad6a7a93aae2ea5d64c702a">effect_hunger_very_hungry</a>;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a51eea7d6d7e07294b74c4fcf93d77923">get_bmi_fat</a>() &lt; <a class="code" href="namespacecharacter__weight__category.html#aa0f298c7e2726e5eddd1879b7288b748">character_weight_category::underweight</a> ) {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;            hunger_effect = <a class="code" href="character__body_8cpp.html#a7233d432bb6c3c3fcbef0adcf137d36b">effect_hunger_near_starving</a>;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a51eea7d6d7e07294b74c4fcf93d77923">get_bmi_fat</a>() &lt; <a class="code" href="namespacecharacter__weight__category.html#ae41f48d3a0de12bbab86abc5d741f978">character_weight_category::emaciated</a> ) {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;            hunger_effect = <a class="code" href="character__body_8cpp.html#a8ab43cdb18ab06dc2569f4bdce2b8ae5">effect_hunger_starving</a>;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            hunger_effect = <a class="code" href="character__body_8cpp.html#afb770e7a1728acdd3e13e46fc82e3b9a">effect_hunger_famished</a>;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        }</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <span class="comment">//              just_ate    recently_ate</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <span class="comment">//              &lt;15 min     &lt;3 hrs      &gt;=3 hrs</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="comment">// &gt;= 5/6 cap   engorged    engorged    engorged</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <span class="comment">// &gt; 11/20 cap  full        full        full</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        <span class="comment">// &gt;= 3/8 cap   satisfied   satisfied   blank</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        <span class="comment">// &gt; 0          blank       blank       blank</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="comment">// 0            blank       blank       (v.) hungry</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a857af22f119fefbfa24769ed2ad6d5e7">contains</a> &gt;= cap * 5 / 6 ) {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            hunger_effect = <a class="code" href="character__body_8cpp.html#a3124b68e352cad48fc7848f4dc58973b">effect_hunger_engorged</a>;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a857af22f119fefbfa24769ed2ad6d5e7">contains</a> &gt; cap * 11 / 20 ) {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            hunger_effect = <a class="code" href="character__body_8cpp.html#aa2e65123ffb4aa24bb23f1bf49f5dc01">effect_hunger_full</a>;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( recently_ate &amp;&amp; <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a857af22f119fefbfa24769ed2ad6d5e7">contains</a> &gt;= cap * 3 / 8 ) {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            hunger_effect = <a class="code" href="character__body_8cpp.html#a8b84fb29e831d3d5948f3003808d2c93">effect_hunger_satisfied</a>;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( recently_ate || <a class="code" href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a857af22f119fefbfa24769ed2ad6d5e7">contains</a> &gt; 0_ml ) {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            hunger_effect = <a class="code" href="character__body_8cpp.html#ae3b12d473a928a50b2b322d2c8f579ab">effect_hunger_blank</a>;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#a51eea7d6d7e07294b74c4fcf93d77923">get_bmi_fat</a>() &gt; <a class="code" href="namespacecharacter__weight__category.html#a9c7c7934ca11833d32605b6af00f4572">character_weight_category::overweight</a> ) {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            hunger_effect = <a class="code" href="character__body_8cpp.html#abcdd71c4a5fac2f06983145c1bf5c9e1">effect_hunger_hungry</a>;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            hunger_effect = <a class="code" href="character__body_8cpp.html#a454de2cafad6a7a93aae2ea5d64c702a">effect_hunger_very_hungry</a>;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    }</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( hunger_effect ) ) {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#a3124b68e352cad48fc7848f4dc58973b">effect_hunger_engorged</a> );</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#aa2e65123ffb4aa24bb23f1bf49f5dc01">effect_hunger_full</a> );</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#a8b84fb29e831d3d5948f3003808d2c93">effect_hunger_satisfied</a> );</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#abcdd71c4a5fac2f06983145c1bf5c9e1">effect_hunger_hungry</a> );</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#a454de2cafad6a7a93aae2ea5d64c702a">effect_hunger_very_hungry</a> );</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#a7233d432bb6c3c3fcbef0adcf137d36b">effect_hunger_near_starving</a> );</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#a8ab43cdb18ab06dc2569f4bdce2b8ae5">effect_hunger_starving</a> );</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#afb770e7a1728acdd3e13e46fc82e3b9a">effect_hunger_famished</a> );</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <a class="code" href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">remove_effect</a>( <a class="code" href="character__body_8cpp.html#ae3b12d473a928a50b2b322d2c8f579ab">effect_hunger_blank</a> );</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <a class="code" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( hunger_effect, 24_hours, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    }</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;}</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"><a class="line" href="classCharacter.html#a25ab33c46a461bea826856e916787bf2"> 1121</a></span>&#160;<a class="code" href="classint__id.html">bodypart_id</a> <a class="code" href="classCharacter.html#a25ab33c46a461bea826856e916787bf2">Character::body_window</a>( <span class="keyword">const</span> std::string &amp;menu_header,</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                                    <span class="keywordtype">bool</span> show_all, <span class="keywordtype">bool</span> precise,</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                                    <span class="keywordtype">int</span> normal_bonus, <span class="keywordtype">int</span> <span class="comment">/* head_bonus */</span>, <span class="keywordtype">int</span> <span class="comment">/* torso_bonus */</span>,</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                                    <span class="keywordtype">int</span> bleed, <span class="keywordtype">float</span> bite, <span class="keywordtype">float</span> infect, <span class="keywordtype">float</span> bandage_power, <span class="keywordtype">float</span> disinfectant_power )<span class="keyword"> const</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="comment">/* This struct establishes some kind of connection between the hp_part (which can be healed and</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">     * have HP) and the body_part. Note that there are more body_parts than hp_parts. For example:</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">     * Damage to bp_head, bp_eyes and bp_mouth is all applied on the HP of hp_head. */</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keyword">struct </span>healable_bp {</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        <span class="keyword">mutable</span> <span class="keywordtype">bool</span> allowed;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        <a class="code" href="classint__id.html">bodypart_id</a> <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        std::string <a class="code" href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">name</a>; <span class="comment">// Translated name as it appears in the menu.</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        <span class="keywordtype">int</span> bonus;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    };</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    std::vector&lt;healable_bp&gt; parts;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;part : this-&gt;<a class="code" href="classCreature.html#a4537397ede1aea8ecec28183252aabe3">get_all_body_parts</a>( <a class="code" href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea5d7454274f566bb1a128ed016e6bc787">get_body_part_flags::only_main</a> ) ) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <span class="comment">// TODO: figure out how to do head and torso bonus?</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        parts.push_back( { <span class="keyword">false</span>, part, part-&gt;name.translated(), normal_bonus } );</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    }</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160; </div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keywordtype">int</span> max_bp_name_len = 0;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keywordflow">for</span>( <span class="keyword">const</span> healable_bp &amp;e : parts ) {</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        max_bp_name_len = <a class="code" href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">std::max</a>( max_bp_name_len, <a class="code" href="catacharset_8cpp.html#af20ee33da59ccceb9f4c14005c0bbe80">utf8_width</a>( e.name ) );</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    }</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <a class="code" href="classuilist.html">uilist</a> bmenu;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    bmenu.<a class="code" href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">desc_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    bmenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = menu_header;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    bmenu.<a class="code" href="classuilist.html#afac67857b05ede5fe30cdd0feb3caf93">textwidth</a> = 60;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160; </div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    bmenu.<a class="code" href="classuilist.html#ae4ae08b4f010935825c956ea705065aa">hilight_disabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordtype">bool</span> is_valid_choice = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordtype">int</span> default_selection_idx = 0;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordtype">int</span> default_selection_treatment_rank = 0;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="comment">// If this is an NPC, the player is the one examining them and so the fact</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="comment">// that they can&#39;t self-diagnose effectively doesn&#39;t matter</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="keywordtype">bool</span> no_feeling = <a class="code" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() &amp;&amp; <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="character__body_8cpp.html#a3eff2536d0f2d082101e71815160a288">json_flag_PAIN_IMMUNE</a> );</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160; </div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; parts.size(); i++ ) {</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <span class="keyword">const</span> healable_bp &amp;e = parts[i];</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        <span class="keyword">const</span> <a class="code" href="classint__id.html">bodypart_id</a> &amp;<a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> = e.bp;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> maximal_hp = <a class="code" href="classCreature.html#aad6dc5532f233030d367ed67e0ea6613">get_part_hp_max</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> current_hp = <a class="code" href="classCreature.html#ab901ee8b150fdad01ff2028ec8dba84c">get_part_hp_cur</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> cur_hp_pcnt = current_hp / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( maximal_hp );</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        <span class="comment">// This will c_light_gray if the part does not have any effects cured by the item/effect</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        <span class="comment">// (e.g. it cures only bites, but the part does not have a bite effect)</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <span class="keyword">const</span> <a class="code" href="classnc__color.html">nc_color</a> state_col = <a class="code" href="namespacedisplay.html#a42ead77b39f9e1cb2b4cb0b078104b89">display::limb_color</a>( *<span class="keyword">this</span>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <a class="code" href="classCreature.html#a303fcc58869f10f44be1d598ed1aa26f">bleed</a> &gt; 0, bite &gt; 0.0f, infect &gt; 0.0f );</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> has_curable_effect = state_col != <a class="code" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        <span class="comment">// The same as in the main UI sidebar. Independent of the capability of the healing item/effect!</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        <span class="keyword">const</span> <a class="code" href="classnc__color.html">nc_color</a> all_state_col = <a class="code" href="namespacedisplay.html#a42ead77b39f9e1cb2b4cb0b078104b89">display::limb_color</a>( *<span class="keyword">this</span>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        <span class="comment">// Broken means no HP can be restored, it requires surgical attention.</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> limb_is_broken = <a class="code" href="classCharacter.html#ac2245aed6c7279986f42ef9208e816c0">is_limb_broken</a>( <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> limb_is_mending = <a class="code" href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">worn_with_flag</a>( <a class="code" href="flag_8cpp.html#ad12eb85cdd376a51aa3859ca5894377b">flag_SPLINT</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="comment">// How much this treatment would help, if applied to this bodypart.</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="comment">// The value itself is just a sorting number and has no actual meaning in itself, but is roughly ranged at:</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        <span class="comment">// 0-30=bandage, 30-60=disinfectant, 60-70=bitten/infected, 70-80=bleeding</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        <span class="comment">// A high value means that this bodypart should be prioritized to get this</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        <span class="comment">// treatment, and is likely to be selected as default in the ui.</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        <span class="keywordtype">int</span> treatment_rank = 0;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <span class="keywordflow">if</span>( show_all || has_curable_effect ) { <span class="comment">// NOLINT(bugprone-branch-clone)</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;            e.allowed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( limb_is_broken ) { <span class="comment">// NOLINT(bugprone-branch-clone)</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            e.allowed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( current_hp &lt; maximal_hp &amp;&amp; ( e.bonus != 0 || bandage_power &gt; 0.0f  ||</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                                                disinfectant_power &gt; 0.0f ) ) {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            e.allowed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            e.allowed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160; </div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        std::string msg;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        std::string desc;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        <span class="keywordtype">bool</span> bleeding = <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__body_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>.<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>() );</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        <span class="keywordtype">bool</span> bitten = <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__body_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>.<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>() );</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <span class="keywordtype">bool</span> infected = <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__body_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>.<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>() );</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <span class="keywordtype">bool</span> bandaged = <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__body_8cpp.html#a7c2a13f94c0d13712af84b23f13e788f">effect_bandaged</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a>.<a class="code" href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">id</a>() );</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> b_power = <a class="code" href="classCreature.html#a9689d4816bc2d1204c53c114190fde50">get_effect_int</a>( <a class="code" href="character__body_8cpp.html#a7c2a13f94c0d13712af84b23f13e788f">effect_bandaged</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> d_power = <a class="code" href="classCreature.html#a9689d4816bc2d1204c53c114190fde50">get_effect_int</a>( <a class="code" href="character__body_8cpp.html#adcc47d614ba63ddb056307153d5ac06c">effect_disinfected</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <span class="keywordtype">int</span> new_b_power = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#a204ca52ef1b97d079c45e1cb6407f73b">std::floor</a>( bandage_power ) );</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <span class="keywordflow">if</span>( bandaged ) {</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            <span class="keyword">const</span> <a class="code" href="classeffect.html">effect</a> &amp;eff = <a class="code" href="classCreature.html#aa8d3d8f5a3260c5b54e4973e957f356d">get_effect</a>( <a class="code" href="character__body_8cpp.html#a7c2a13f94c0d13712af84b23f13e788f">effect_bandaged</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;            <span class="keywordflow">if</span>( new_b_power &gt; eff.<a class="code" href="classeffect.html#a11dfe5a38fa2a63bf309b491f64051e0">get_max_intensity</a>() ) {</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                new_b_power = eff.<a class="code" href="classeffect.html#a11dfe5a38fa2a63bf309b491f64051e0">get_max_intensity</a>();</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;            }</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160; </div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        }</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        <span class="keywordtype">int</span> new_d_power = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="math__parser__func_8h.html#a204ca52ef1b97d079c45e1cb6407f73b">std::floor</a>( disinfectant_power ) );</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160; </div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;aligned_name = std::string( max_bp_name_len - <a class="code" href="catacharset_8cpp.html#af20ee33da59ccceb9f4c14005c0bbe80">utf8_width</a>( e.name ), <span class="charliteral">&#39; &#39;</span> ) + e.name;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        std::string hp_str;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <span class="keywordflow">if</span>( limb_is_mending ) {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;            desc += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It is broken, but has been set, and just needs time to heal.&quot;</span> ),</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                              <a class="code" href="color_8h.html#a2740fd73e1b9184c904d95a580c5ea7b">c_blue</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;            <span class="keywordflow">if</span>( no_feeling ) {</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                hp_str = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <span class="stringliteral">&quot;==%==&quot;</span>, <a class="code" href="color_8h.html#a2740fd73e1b9184c904d95a580c5ea7b">c_blue</a> );</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                <span class="keyword">const</span> <a class="code" href="classeffect.html">effect</a> &amp;eff = <a class="code" href="classCreature.html#aa8d3d8f5a3260c5b54e4973e957f356d">get_effect</a>( <a class="code" href="character__body_8cpp.html#ae239a31e1ebbbbacd06a8fcdd8be2861">effect_mending</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> mend_perc = eff.<a class="code" href="classeffect.html#a39ebd2ec5b2faacde7483e0c07240baa">is_null</a>() ? 0.0 : 100 * eff.<a class="code" href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">get_duration</a>() / eff.<a class="code" href="classeffect.html#a5201a58434d343a00ce457ce6602905c">get_max_duration</a>();</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160; </div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> num = mend_perc / 20;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                hp_str = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( std::string( num, <span class="charliteral">&#39;#&#39;</span> ) + std::string( 5 - num, <span class="charliteral">&#39;=&#39;</span> ), <a class="code" href="color_8h.html#a2740fd73e1b9184c904d95a580c5ea7b">c_blue</a> );</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                <span class="keywordflow">if</span>( precise ) {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                    hp_str = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s %3d%%&quot;</span>, hp_str, mend_perc );</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                }</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            }</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( limb_is_broken ) {</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            desc += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It is broken.  It needs a splint or surgical attention.&quot;</span> ), <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;            hp_str = <span class="stringliteral">&quot;==%==&quot;</span>;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( no_feeling ) {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            <span class="keywordflow">if</span>( cur_hp_pcnt &lt; 0.125f ) {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                hp_str = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Very Bad&quot;</span> ), <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> );</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur_hp_pcnt &lt; 0.375f ) {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                hp_str = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Bad&quot;</span> ), <a class="code" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a> );</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur_hp_pcnt &lt; 0.625f ) {</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                hp_str = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;So-so&quot;</span> ), <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a> );</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( cur_hp_pcnt &lt; 0.875f ) {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                hp_str = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Okay&quot;</span> ), <a class="code" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a> );</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                hp_str = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Good&quot;</span> ), <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> );</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            }</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            std::pair&lt;std::string, nc_color&gt; h_bar = <a class="code" href="output_8cpp.html#aafdcbf1eb3398c6e92cf3b71f6c8ad03">get_hp_bar</a>( current_hp, maximal_hp, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            hp_str = <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( h_bar.first, h_bar.second ) +</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                     <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( std::string( 5 - <a class="code" href="catacharset_8cpp.html#af20ee33da59ccceb9f4c14005c0bbe80">utf8_width</a>( h_bar.first ), <span class="charliteral">&#39;.&#39;</span> ), <a class="code" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a> );</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            <span class="keywordflow">if</span>( precise ) {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                hp_str = <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s %3d/%d&quot;</span>, hp_str, current_hp, maximal_hp );</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            }</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        }</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        msg += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( aligned_name, all_state_col ) + <span class="stringliteral">&quot; &quot;</span> + hp_str;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160; </div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        <span class="comment">// BLEEDING block</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        <span class="keywordflow">if</span>( bleeding ) {</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> bleeding_intensity = <a class="code" href="classCreature.html#a9689d4816bc2d1204c53c114190fde50">get_effect_int</a>( <a class="code" href="character__body_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> );</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            desc += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Bleeding: %s&quot;</span> ),</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                                   <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="classCreature.html#aa8d3d8f5a3260c5b54e4973e957f356d">get_effect</a>( <a class="code" href="character__body_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ).get_speed_name(),</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                                             <a class="code" href="effect_8cpp.html#ab3f9733465480023c82f4f0e18aae7dc">colorize_bleeding_intensity</a>( bleeding_intensity ) ) );</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a303fcc58869f10f44be1d598ed1aa26f">bleed</a> &gt; 0 ) {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                <span class="keywordtype">int</span> percent = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code" href="classCreature.html#a303fcc58869f10f44be1d598ed1aa26f">bleed</a> * 100 / bleeding_intensity );</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                percent = <a class="code" href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">std::min</a>( percent, 100 );</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                desc += <span class="stringliteral">&quot; -&gt; &quot;</span> + <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;%d %% improvement&quot;</span> ), percent ), <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> );</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                treatment_rank += 70 + bleeding_intensity;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            }</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            desc += <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        }</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160; </div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        <span class="comment">// BANDAGE block</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <span class="keywordflow">if</span>( e.allowed &amp;&amp; ( new_b_power &gt; 0 || b_power &gt; 0 ) ) {</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;            desc += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Bandaged: %s&quot;</span> ), <a class="code" href="effect_8cpp.html#a6808486532950de6a750b0546f7de64b">texitify_healing_power</a>( b_power ) );</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            <span class="keywordflow">if</span>( new_b_power &gt; 0 ) {</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                desc += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot; -&gt; %s&quot;</span>, <a class="code" href="effect_8cpp.html#a6808486532950de6a750b0546f7de64b">texitify_healing_power</a>( new_b_power ) );</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                <span class="keywordflow">if</span>( new_b_power &lt;= b_power ) {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                    desc += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (no improvement)&quot;</span> );</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                    treatment_rank += ( 1 - cur_hp_pcnt ) * 10; <span class="comment">// lower hp percent -&gt; higher rank</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                    treatment_rank += new_b_power - b_power; <span class="comment">// bandage improvement -&gt; higher rank</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                    treatment_rank += b_power == 0 ? 10 : 0; <span class="comment">// no previous bandage -&gt; higher rank</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                }</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            }</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            desc += <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        }</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160; </div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        <span class="comment">// DISINFECTANT block</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <span class="keywordflow">if</span>( e.allowed &amp;&amp; ( d_power &gt; 0 || new_d_power &gt; 0 ) ) {</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            desc += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Disinfected: %s&quot;</span> ), <a class="code" href="effect_8cpp.html#a6808486532950de6a750b0546f7de64b">texitify_healing_power</a>( d_power ) );</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;            <span class="keywordflow">if</span>( new_d_power &gt; 0 ) {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                desc += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot; -&gt; %s&quot;</span>,  <a class="code" href="effect_8cpp.html#a6808486532950de6a750b0546f7de64b">texitify_healing_power</a>( new_d_power ) );</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                <span class="keywordflow">if</span>( new_d_power &lt;= d_power ) {</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                    desc += <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot; (no improvement)&quot;</span> );</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                    treatment_rank += 30 + ( 1 - cur_hp_pcnt ) * 10; <span class="comment">// lower hp percent -&gt; higher rank</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                    treatment_rank += new_d_power - d_power; <span class="comment">// better disinfectant -&gt; higher rank</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                    treatment_rank += d_power == 0 ? 10 : 0; <span class="comment">// not previously disinfected -&gt; higher rank</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                }</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;            }</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            desc += <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        }</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160; </div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        <span class="comment">// BITTEN block</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <span class="keywordflow">if</span>( bitten ) {</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;            desc += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s: &quot;</span>, <a class="code" href="classCreature.html#aa8d3d8f5a3260c5b54e4973e957f356d">get_effect</a>( <a class="code" href="character__body_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ).get_speed_name() );</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            <span class="keywordflow">if</span>( bite &gt; 0 ) {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;                desc += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Chance to clean and disinfect: %d %%&quot;</span> ),</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;                                                 <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( bite * 100 ) ), <a class="code" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a> );</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                treatment_rank += 60 + bite * 10;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                desc += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It has a deep bite wound that needs cleaning.&quot;</span> ), <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> );</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            }</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;            desc += <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        }</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160; </div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="comment">// INFECTED block</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        <span class="keywordflow">if</span>( infected ) {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            desc += <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s: &quot;</span>, <a class="code" href="classCreature.html#aa8d3d8f5a3260c5b54e4973e957f356d">get_effect</a>( <a class="code" href="character__body_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a>, <a class="code" href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a> ).get_speed_name() );</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;            <span class="keywordflow">if</span>( infect &gt; 0 ) {</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                desc += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Chance to cure infection: %d %%&quot;</span> ),</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                                                 <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( infect * 100 ) ), <a class="code" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                treatment_rank += 60 + infect * 10;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                desc += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;It has a deep wound that looks infected.  Antibiotics might be required.&quot;</span> ),</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                                  <a class="code" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> );</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;            }</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;            desc += <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        }</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <span class="comment">// END of blocks</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160; </div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="keywordflow">if</span>( ( !e.allowed &amp;&amp; !limb_is_broken ) || ( show_all &amp;&amp; current_hp == maximal_hp &amp;&amp;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;                !limb_is_broken &amp;&amp; !bitten &amp;&amp; !infected &amp;&amp; !bleeding ) ) {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;            desc += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Healthy.&quot;</span> ), <a class="code" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a> ) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <span class="keywordflow">if</span>( !e.allowed ) {</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;            desc += <a class="code" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;You don&#39;t expect any effect from using this.&quot;</span> ), <a class="code" href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a> );</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            is_valid_choice = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;            <span class="keywordflow">if</span>( treatment_rank &gt; default_selection_treatment_rank ) {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                <span class="comment">// the bodypart with the highest rank should be selected as default</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                default_selection_treatment_rank = treatment_rank;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                default_selection_idx = i;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;            }</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        }</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        bmenu.<a class="code" href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">addentry_desc</a>( i, e.allowed, <a class="code" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, msg, desc );</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    }</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160; </div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="keywordflow">if</span>( !is_valid_choice ) { <span class="comment">// no body part can be chosen for this item/effect</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        bmenu.<a class="code" href="group__UI.html#ga93f381e783bfe32daea2b16b8f99c749">init</a>();</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        bmenu.<a class="code" href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">desc_enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        bmenu.<a class="code" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;No limb would benefit from it.&quot;</span> );</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        bmenu.<a class="code" href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">addentry</a>( parts.size(), <span class="keyword">true</span>, <span class="charliteral">&#39;q&#39;</span>, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a>( <span class="stringliteral">&quot;Cancel&quot;</span> ) );</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        bmenu.<a class="code" href="classuilist.html#a7a5f0a055d59c6465d3da0856847a5a1">set_selected</a>( default_selection_idx );</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160; </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    bmenu.<a class="code" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keywordflow">if</span>( bmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &gt;= 0 &amp;&amp; <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( bmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> ) &lt; parts.size() &amp;&amp;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        parts[bmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>].allowed ) {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <span class="keywordflow">return</span> parts[bmenu.<a class="code" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>].bp;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">bodypart_str_id::NULL_ID</a>();</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    }</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;}</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160; </div>
<div class="line"><a name="l01365"></a><span class="lineno"><a class="line" href="classCharacter.html#a699b9a087c5952715add3e17f6b2fbd1"> 1365</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classCharacter.html#a699b9a087c5952715add3e17f6b2fbd1">Character::get_heartrate_index</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classCharacter.html#aa852ce89f403e193136516699c635b06">heart_rate_index</a>;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;}</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160; </div>
<div class="line"><a name="l01370"></a><span class="lineno"><a class="line" href="classCharacter.html#af0951239e610a5fe3d74853b857b4c5a"> 1370</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#af0951239e610a5fe3d74853b857b4c5a">Character::set_heartrate_effect_mod</a>( <span class="keywordtype">int</span> <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> )</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;{</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <a class="code" href="classCharacter.html#afe38a8ce69919ba90f4704b2392f7e63">heart_rate_effect_mod</a> = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;}</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160; </div>
<div class="line"><a name="l01375"></a><span class="lineno"><a class="line" href="classCharacter.html#a09ebaae789cac07fc64b168da40de4b3"> 1375</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a09ebaae789cac07fc64b168da40de4b3">Character::modify_heartrate_effect_mod</a>( <span class="keywordtype">int</span> <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> )</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;{</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <a class="code" href="classCharacter.html#afe38a8ce69919ba90f4704b2392f7e63">heart_rate_effect_mod</a> += <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;}</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160; </div>
<div class="line"><a name="l01380"></a><span class="lineno"><a class="line" href="classCharacter.html#aca01eca93aac95d4ddcbc1fe47ea5110"> 1380</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classCharacter.html#aca01eca93aac95d4ddcbc1fe47ea5110">Character::get_heartrate_effect_mod</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classCharacter.html#afe38a8ce69919ba90f4704b2392f7e63">heart_rate_effect_mod</a>;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;}</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160; </div>
<div class="line"><a name="l01385"></a><span class="lineno"><a class="line" href="classCharacter.html#ada3998df8603ef742373dbc228ac7820"> 1385</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#ada3998df8603ef742373dbc228ac7820">Character::update_heartrate_index</a>()</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;{</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="comment">// The following code was adapted from the heartrate function, which will now probably need to be rewritten to be based on the heartrate index.</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160; </div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="comment">//COLDBLOOD dependencies, works almost same way as temperature effect for speed.</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> player_local_temp = <a class="code" href="namespaceunits.html#ae31e6d9c71949a72ee41be4be6f1afcd">units::to_fahrenheit</a>( <a class="code" href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a>().get_temperature( <a class="code" href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">pos</a>() ) );</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keywordtype">float</span> temperature_modifier = 0.0f;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="character__body_8cpp.html#a8533b6c22d92696d791d5b24a8e74ee2">json_flag_COLDBLOOD</a> ) ) {</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        temperature_modifier = 0.002f;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    }</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="character__body_8cpp.html#a3a27c79bd0c0a2be0c26a01b981551d1">json_flag_COLDBLOOD2</a> ) ) {</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        temperature_modifier = 0.00333f;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    }</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="character__body_8cpp.html#a261eed8308b515cd628bf9f42455db7f">json_flag_COLDBLOOD3</a> ) || <a class="code" href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">has_flag</a>( <a class="code" href="character__body_8cpp.html#a74d0a0db7f9f29452ac4406a6c3f2541">json_flag_ECTOTHERM</a> ) ) {</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        temperature_modifier = 0.005f;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> hr_temp_mod = ( player_local_temp - 65 ) * temperature_modifier;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> stamina_level = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( <a class="code" href="classCharacter.html#a0ffe14df559cee6e9b5d02f5b214d009">get_stamina</a>() ) / <a class="code" href="classCharacter.html#aefe5432750eb1c2c65fea628fd9878a7">get_stamina_max</a>();</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="comment">// The influence of stamina on heartrate seemeed excessive and was toned down.</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> hr_stamina_mod = 1.6f * ( 1.0f - stamina_level );</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160; </div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> stim_level = <a class="code" href="classCharacter.html#a7335f053c5874081211552623fa625c5">get_stim</a>();</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordtype">float</span> hr_stim_mod = 0.0f;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="keywordflow">if</span>( stim_level &gt; 0 ) {</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <span class="comment">//that&#39;s asymptotical function that is equal to 1 at around 30 stim level</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <span class="comment">//and slows down all the time almost reaching 2.</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <span class="comment">//Tweaking x*x multiplier will accordingly change effect accumulation</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        hr_stim_mod = 2 - 2 / ( 1 + 0.001 * stim_level * stim_level );</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    }</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="keywordtype">float</span> hr_nicotine_mod = 0.0f;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a1ba25d990e8532dd2b0331bfc6cc694c">get_effect_dur</a>( <a class="code" href="character__body_8cpp.html#aa6055e7b9d5b2cb3ecd4cce48a416d33">effect_cig</a> ) &gt; 0_turns ) {</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        <span class="comment">//Nicotine-induced tachycardia</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a1ba25d990e8532dd2b0331bfc6cc694c">get_effect_dur</a>( <a class="code" href="character__body_8cpp.html#aa6055e7b9d5b2cb3ecd4cce48a416d33">effect_cig</a> ) &gt;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;            10_minutes * ( <a class="code" href="classCharacter.html#aeec57f9be2ff6c4dea96f2fd5e1d44f0">addiction_level</a>( <a class="code" href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a>( <a class="code" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4aa22cc5e215a2895925a499998bdd2737">addiction_id</a>( <span class="stringliteral">&quot;nicotine&quot;</span> ) ) ) + 1 ) ) {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;            hr_nicotine_mod = 0.2f;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;            hr_nicotine_mod = 0.1f;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        }</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    }</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="comment">// ********************</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="comment">// diff ratio goes from 3.0 to 1.0. This should correspond to a natural decrease of around 20% bpm at max fitness.</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="comment">// however this ratio should also increase cardiac output, as the heart is more efficient. So lower bpm, same CO.</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="comment">//const float cardio_fit = get_cardiofit();</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="comment">//const float max_cardio_fit = get_cardio_acc_base();</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="comment">//const float diff = max_cardio_fit / cardio_fit;</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <span class="comment">//const float hr_health_mod = ( diff - 3.0f ) * 0.1f;</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="comment">// ********************</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="comment">//  EDIT: It is a better idea to change the actual avg_nat_bpm that this index is multiplied by, rather than changing this index.</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="comment">//  This way, it won&#39;t have any direct health effects, which makes more sense.</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="comment">//  I am leaving the code above commented in case anyone thinks it should be restored.</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160; </div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="comment">// Pain simply adds 1% per point after it reaches 5 (that&#39;s arbitrary)</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="comment">// this seems weird -- A character with brachycardia shouldn&#39;t be able to just hurt themselves to fix it.</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> cur_pain = <a class="code" href="classCharacter.html#a68de7da109abd90b4f2210057c982fe0">get_perceived_pain</a>();</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="keywordtype">float</span> hr_pain_mod = 0.0f;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordflow">if</span>( cur_pain &gt; 5 ) {</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        hr_pain_mod = 0.01 * ( cur_pain - 5 );</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    }</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="comment">// clamp to a reasonable 30% increase in heart rate.</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordflow">if</span>( hr_pain_mod &gt; 0.3f ) {</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        hr_pain_mod = 0.3f;</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    }</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160; </div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="keywordtype">float</span> hr_adrenaline_mod = 0.0f;</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__body_8cpp.html#a1b24df80fb6fce16dd4527cc4a6fa6ca">effect_adrenaline</a> ) ) {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> adrenaline_level = <a class="code" href="classCreature.html#a9689d4816bc2d1204c53c114190fde50">get_effect_int</a>( <a class="code" href="character__body_8cpp.html#a1b24df80fb6fce16dd4527cc4a6fa6ca">effect_adrenaline</a> );</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        <span class="comment">// at adrenaline level 0, do nothing.</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        <span class="comment">// at adrenaline level 1, decrease heart rate by 10% (comedown).</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        <span class="comment">// at adrenaline level 2, increase heart rate by 20% (woooo!).</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        <span class="keywordflow">if</span>( adrenaline_level == 1 ) {</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;            hr_adrenaline_mod = -0.1f;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( adrenaline_level == 2 ) {</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;            hr_adrenaline_mod = 0.2f;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        }</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    }</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160; </div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="comment">// if under the effect of a betablocker, decrease hr_adrenaline_mod and hr_pain_mod</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">has_effect</a>( <a class="code" href="character__body_8cpp.html#ab4605586a0d3ba987fa7aeb18cf224b6">effect_betablock</a> ) ) {</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> betablock_level = <a class="code" href="classCreature.html#a9689d4816bc2d1204c53c114190fde50">get_effect_int</a>( <a class="code" href="character__body_8cpp.html#ab4605586a0d3ba987fa7aeb18cf224b6">effect_betablock</a> );</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        <span class="comment">// at betablock level 1, reduce by 60%</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        <span class="comment">// at betablock level 2, 80%.</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        <span class="comment">// at betablock level 3, 100%.</span></div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        <span class="keywordtype">float</span> betablock_mod = 1.0f;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        <span class="keywordflow">if</span>( betablock_level == 1 ) {</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;            betablock_mod = 0.4f;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( betablock_level == 2 ) {</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;            betablock_mod = 0.2f;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( betablock_level == 3 ) {</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;            betablock_mod = 0.0f;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        }</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        hr_adrenaline_mod *= betablock_mod;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        hr_pain_mod *= betablock_mod;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    }</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160; </div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <span class="comment">// activity mods are &quot;non-direct&quot; and should not affect heart rate that much. Clamp their effect to 70%.</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="comment">// this means you cannot actually have serious tachycardia by just working out too much while in pain.</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="keywordtype">float</span> hr_activity_mods = hr_adrenaline_mod + hr_pain_mod + hr_stamina_mod;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="keywordflow">if</span>( hr_activity_mods &gt; 0.7f ) {</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        hr_activity_mods = 0.7f;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    }</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160; </div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="comment">// TODO: implement support for HR increasing to compensate for low BP.</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="comment">// it seems that heart rate and blood pressure changes are not linear - the heart is unreasonably efficient at</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="comment">// increasing/decreasing blood pressure, as the geometry of blood vessels also changes. This means that at low</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="comment">// bp, we can consider that a rise in x in heart rate index might cause more than x blood pressure index change as</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="comment">// blood vessels constrict, but at higher bp, a rise in x in heart rate index might cause less than x blood pressure</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="comment">// index change as blood vessels dilate. In other words, your blood pressure doesn&#39;t double when you&#39;re exercising.</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> hr_bp_loss_mod = 0.0f;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160; </div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> effect_mod = <a class="code" href="classCharacter.html#aca01eca93aac95d4ddcbc1fe47ea5110">get_heartrate_effect_mod</a>();</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <span class="comment">// heartrate effect is an integer.  Div by 10000 currently.(HR mod of 200 in JSON becomes 2%).</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    constexpr <span class="keywordtype">float</span> HR_EFFECT_INT_TO_FLOAT_MULT = 0.0001f;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> hr_effect_mod = effect_mod * HR_EFFECT_INT_TO_FLOAT_MULT;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160; </div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <a class="code" href="classCharacter.html#aa852ce89f403e193136516699c635b06">heart_rate_index</a> = 1.0f + hr_temp_mod + hr_activity_mods + hr_stim_mod + hr_nicotine_mod</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                       + hr_bp_loss_mod + hr_effect_mod;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;}</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160; </div>
<div class="line"><a name="l01503"></a><span class="lineno"><a class="line" href="classCharacter.html#a5fd4e97e86ba73af9727242e6e581114"> 1503</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classCharacter.html#a5fd4e97e86ba73af9727242e6e581114">Character::get_bloodvol_index</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classCharacter.html#a20f69f688aa280f410803f11a78c21f1">blood_vol_index</a>;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;}</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160; </div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160; </div>
<div class="line"><a name="l01509"></a><span class="lineno"><a class="line" href="classCharacter.html#a170fafbb40a7a5d375e1d5c617540d63"> 1509</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a170fafbb40a7a5d375e1d5c617540d63">Character::update_bloodvol_index</a>()</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;{</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <span class="comment">// vitamin_blood ranges from -50k(death) to 0(no hypovolemia).</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <a class="code" href="classCharacter.html#a20f69f688aa280f410803f11a78c21f1">blood_vol_index</a> = 1.0f - ( <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( <a class="code" href="classCharacter.html#a7536f499a8b09536d1d9c8360319fad5">vitamin_get</a>( <a class="code" href="character__body_8cpp.html#a0fc6709b43edf2d7ca11dccafdb71052">vitamin_blood</a> ) ) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;                               ( <a class="code" href="character__body_8cpp.html#a0fc6709b43edf2d7ca11dccafdb71052">vitamin_blood</a>-&gt;<a class="code" href="classvitamin.html#acfc2222126afc9c1040c1d71fb75ebe1">min</a>() ) );</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;}</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160; </div>
<div class="line"><a name="l01516"></a><span class="lineno"><a class="line" href="classCharacter.html#a17f57232562f7cd952a831ab8e230118"> 1516</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classCharacter.html#a17f57232562f7cd952a831ab8e230118">Character::get_circulation_resistance</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classCharacter.html#a0fdb4777727ac2b44c100217bda8a0f2">circulation_resistance</a>;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;}</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160; </div>
<div class="line"><a name="l01521"></a><span class="lineno"><a class="line" href="classCharacter.html#a81bb1175f3a238fbbcce1932cdc28cb1"> 1521</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a81bb1175f3a238fbbcce1932cdc28cb1">Character::set_bp_effect_mod</a>( <span class="keywordtype">int</span> <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> )</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;{</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <a class="code" href="classCharacter.html#a2822f0506187eabf7a31f74c05ac338d">bp_effect_mod</a> = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;}</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160; </div>
<div class="line"><a name="l01526"></a><span class="lineno"><a class="line" href="classCharacter.html#a631b96c96ff9c08b7eb56f59bb7e4334"> 1526</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a631b96c96ff9c08b7eb56f59bb7e4334">Character::modify_bp_effect_mod</a>( <span class="keywordtype">int</span> <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> )</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;{</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <a class="code" href="classCharacter.html#a2822f0506187eabf7a31f74c05ac338d">bp_effect_mod</a> += <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;}</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160; </div>
<div class="line"><a name="l01531"></a><span class="lineno"><a class="line" href="classCharacter.html#a632d4a94827de8c0ab32d218a947c75f"> 1531</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classCharacter.html#a632d4a94827de8c0ab32d218a947c75f">Character::get_bp_effect_mod</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classCharacter.html#a2822f0506187eabf7a31f74c05ac338d">bp_effect_mod</a>;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;}</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160; </div>
<div class="line"><a name="l01536"></a><span class="lineno"><a class="line" href="classCharacter.html#a3ea76e0b374732e29cd4c00adef6f4da"> 1536</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a3ea76e0b374732e29cd4c00adef6f4da">Character::update_circulation_resistance</a>()</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;{</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classCharacter.html#a2822f0506187eabf7a31f74c05ac338d">bp_effect_mod</a> = <a class="code" href="classCharacter.html#a632d4a94827de8c0ab32d218a947c75f">get_bp_effect_mod</a>();</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    constexpr <span class="keywordtype">float</span> BP_EFFECT_INT_TO_FLOAT_MULT = 0.0001f;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> bp_item_effect_mod = <a class="code" href="classCharacter.html#a2822f0506187eabf7a31f74c05ac338d">bp_effect_mod</a> * BP_EFFECT_INT_TO_FLOAT_MULT;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160; </div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="comment">// should also be affected by stance.</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="comment">// DOI: 10.1111/j.1365-2702.2005.01494.x</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <span class="comment">// when prone, 8% higher than standing.</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="keywordtype">float</span> bp_stance_mod = 0.0f;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classCharacter.html#ac6f590f28f979103633d198e32524c06">is_prone</a>() ) {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        bp_stance_mod = 0.08f;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    }</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160; </div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <a class="code" href="classCharacter.html#a0fdb4777727ac2b44c100217bda8a0f2">circulation_resistance</a> = 1.0f + bp_item_effect_mod + bp_stance_mod;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;}</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160; </div>
<div class="line"><a name="l01553"></a><span class="lineno"><a class="line" href="classCharacter.html#ab819e08febc259c326511186905d4989"> 1553</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#ab819e08febc259c326511186905d4989">Character::update_circulation</a>()</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;{</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <a class="code" href="classCharacter.html#a3ea76e0b374732e29cd4c00adef6f4da">update_circulation_resistance</a>();</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <a class="code" href="classCharacter.html#a3f54c26e34e9408d134650fe14b72975">circulation</a> = <a class="code" href="classCharacter.html#a5fd4e97e86ba73af9727242e6e581114">get_bloodvol_index</a>() * <a class="code" href="classCharacter.html#a699b9a087c5952715add3e17f6b2fbd1">get_heartrate_index</a>() * <a class="code" href="classCharacter.html#a17f57232562f7cd952a831ab8e230118">get_circulation_resistance</a>();</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="comment">//Incredibly annoying debug function - don&#39;t forget to comment out before merge!</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <span class="comment">//if( circulation &lt; 0.8 ) {</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="comment">//    debugmsg( &quot;Low blood pressure: &quot; + std::to_string(circulation_resistance) + &quot; &quot; + std::to_string(</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="comment">//                  get_bloodvol_index() ) + &quot; &quot; + std::to_string( get_heartrate_index() ) );</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <span class="comment">//} else if( circulation &gt; 2.0 ) {</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <span class="comment">//    debugmsg( &quot;High blood pressure&quot; + std::to_string(circulation_resistance) + &quot; &quot; + std::to_string(</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="comment">//                  get_bloodvol_index() ) + &quot; &quot; + std::to_string( get_heartrate_index() ) );</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="comment">//}</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160; </div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="comment">//debugmsg( &quot;Blood INFO: &quot; + std::to_string( circulation_resistance ) + &quot; &quot; + std::to_string(</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="comment">//              get_bloodvol_index() ) + &quot; &quot; + std::to_string( get_heartrate_index() ) );</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;}</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160; </div>
<div class="line"><a name="l01570"></a><span class="lineno"><a class="line" href="classCharacter.html#a9933f26da5f1a3b4e87fcc1ff783dc65"> 1570</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classCharacter.html#a9933f26da5f1a3b4e87fcc1ff783dc65">Character::get_respiration_rate</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classCharacter.html#acedff8cd2fbf1962d5d0651b26c965a9">respiration_rate</a>;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;}</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160; </div>
<div class="line"><a name="l01575"></a><span class="lineno"><a class="line" href="classCharacter.html#ae462e10544f067dd4e0b91da1064b81f"> 1575</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classCharacter.html#ae462e10544f067dd4e0b91da1064b81f">Character::get_respiration_effect_mod</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classCharacter.html#a590532afaea37ab21527b68a6e98b44b">resp_rate_effect_mod</a>;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;}</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160; </div>
<div class="line"><a name="l01580"></a><span class="lineno"><a class="line" href="classCharacter.html#a25ee5d4e960b37f61619e14a6b5f8fab"> 1580</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a25ee5d4e960b37f61619e14a6b5f8fab">Character::modify_respiration_effect_mod</a>( <span class="keywordtype">int</span> <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> )</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;{</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <a class="code" href="classCharacter.html#a590532afaea37ab21527b68a6e98b44b">resp_rate_effect_mod</a> += <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;}</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160; </div>
<div class="line"><a name="l01585"></a><span class="lineno"><a class="line" href="classCharacter.html#afb4c5e855922e1745579b05214cb766e"> 1585</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#afb4c5e855922e1745579b05214cb766e">Character::set_respiration_effect_mod</a>( <span class="keywordtype">int</span> <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> )</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;{</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <a class="code" href="classCharacter.html#a590532afaea37ab21527b68a6e98b44b">resp_rate_effect_mod</a> = <a class="code" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;}</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160; </div>
<div class="line"><a name="l01590"></a><span class="lineno"><a class="line" href="classCharacter.html#a7e86db8045680d3e2ab435a7cde32109"> 1590</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCharacter.html#a7e86db8045680d3e2ab435a7cde32109">Character::update_respiration_rate</a>()</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;{</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> effect_mod = <a class="code" href="classCharacter.html#ae462e10544f067dd4e0b91da1064b81f">get_respiration_effect_mod</a>();</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    constexpr <span class="keywordtype">float</span> RESP_EFFECT_INT_TO_FLOAT_MULT = 0.0001f;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <a class="code" href="classCharacter.html#acedff8cd2fbf1962d5d0651b26c965a9">respiration_rate</a> = 1.0f + effect_mod * RESP_EFFECT_INT_TO_FLOAT_MULT;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;}</div>
<div class="ttc" id="aactivity__tracker_8h_html"><div class="ttname"><a href="activity__tracker_8h.html">activity_tracker.h</a></div></div>
<div class="ttc" id="aavatar_8h_html"><div class="ttname"><a href="avatar_8h.html">avatar.h</a></div></div>
<div class="ttc" id="abodypart_8cpp_html_a1e5a8dc07b262107fd65bfbe882b5458"><div class="ttname"><a href="bodypart_8cpp.html#a1e5a8dc07b262107fd65bfbe882b5458">body_part_foot_r</a></div><div class="ttdeci">const bodypart_str_id body_part_foot_r(&quot;foot_r&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_a67fd1441077f21f79e895830d0534b2b"><div class="ttname"><a href="bodypart_8cpp.html#a67fd1441077f21f79e895830d0534b2b">body_part_hand_r</a></div><div class="ttdeci">const bodypart_str_id body_part_hand_r(&quot;hand_r&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_aa1af101175ef4c9194f748dd67829fa9"><div class="ttname"><a href="bodypart_8cpp.html#aa1af101175ef4c9194f748dd67829fa9">body_part_torso</a></div><div class="ttdeci">const bodypart_str_id body_part_torso(&quot;torso&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_ac9aaf0eca53f33436ba15a5b29f68a16"><div class="ttname"><a href="bodypart_8cpp.html#ac9aaf0eca53f33436ba15a5b29f68a16">body_part_name</a></div><div class="ttdeci">std::string body_part_name(const bodypart_id &amp;bp, int number)</div><div class="ttdoc">Returns the matching name of the body_part token.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00791">bodypart.cpp:791</a></div></div>
<div class="ttc" id="abodypart_8cpp_html_acce4686c4642d33fd10230b461987d34"><div class="ttname"><a href="bodypart_8cpp.html#acce4686c4642d33fd10230b461987d34">body_part_mouth</a></div><div class="ttdeci">const bodypart_str_id body_part_mouth(&quot;mouth&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_ade2e301ed150ac0191c87e8fb19420c1"><div class="ttname"><a href="bodypart_8cpp.html#ade2e301ed150ac0191c87e8fb19420c1">body_part_head</a></div><div class="ttdeci">const bodypart_str_id body_part_head(&quot;head&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_ae00eb113c2ff69f1818aeefe0d00f876"><div class="ttname"><a href="bodypart_8cpp.html#ae00eb113c2ff69f1818aeefe0d00f876">body_part_hand_l</a></div><div class="ttdeci">const bodypart_str_id body_part_hand_l(&quot;hand_l&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_aebd4726eec42047e34e492f029b52206"><div class="ttname"><a href="bodypart_8cpp.html#aebd4726eec42047e34e492f029b52206">body_part_foot_l</a></div><div class="ttdeci">const bodypart_str_id body_part_foot_l(&quot;foot_l&quot;)</div></div>
<div class="ttc" id="abodypart_8h_html"><div class="ttname"><a href="bodypart_8h.html">bodypart.h</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a79cdf1cca1806e313ad51075023c2ff3"><div class="ttname"><a href="calendar_8cpp.html#a79cdf1cca1806e313ad51075023c2ff3">max_sun_irradiance</a></div><div class="ttdeci">float max_sun_irradiance()</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00052">calendar.cpp:52</a></div></div>
<div class="ttc" id="acalendar_8h_html"><div class="ttname"><a href="calendar_8h.html">calendar.h</a></div></div>
<div class="ttc" id="acata__utility_8cpp_html_a6a85dc6d2ab7bcb093e77d20fcf171d6"><div class="ttname"><a href="cata__utility_8cpp.html#a6a85dc6d2ab7bcb093e77d20fcf171d6">logarithmic_range</a></div><div class="ttdeci">double logarithmic_range(int min, int max, int pos)</div><div class="ttdoc">Normalized logistic function.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00166">cata_utility.cpp:166</a></div></div>
<div class="ttc" id="acata__utility_8h_html"><div class="ttname"><a href="cata__utility_8h.html">cata_utility.h</a></div></div>
<div class="ttc" id="acata__utility_8h_html_ad22b4a043b6eb4c2c06f87f83b720b15"><div class="ttname"><a href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a></div><div class="ttdeci">constexpr T clamp(const T &amp;val, const T &amp;min, const T &amp;max)</div><div class="ttdoc">Clamp first argument so that it is no lower than second and no higher than third.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00221">cata_utility.h:221</a></div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4aa22cc5e215a2895925a499998bdd2737"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4aa22cc5e215a2895925a499998bdd2737">cata_variant_type::addiction_id</a></div><div class="ttdeci">@ addiction_id</div></div>
<div class="ttc" id="acatacharset_8cpp_html_af20ee33da59ccceb9f4c14005c0bbe80"><div class="ttname"><a href="catacharset_8cpp.html#af20ee33da59ccceb9f4c14005c0bbe80">utf8_width</a></div><div class="ttdeci">int utf8_width(const std::string_view s, const bool ignore_tags)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00104">catacharset.cpp:104</a></div></div>
<div class="ttc" id="acatacharset_8h_html"><div class="ttname"><a href="catacharset_8h.html">catacharset.h</a></div></div>
<div class="ttc" id="acharacter_8h_html"><div class="ttname"><a href="character_8h.html">character.h</a></div></div>
<div class="ttc" id="acharacter_8h_html_a28256deb3e43854efdc7035ae555212ba9ff6c94d7bbe4244ae18258b07f5ff32"><div class="ttname"><a href="character_8h.html#a28256deb3e43854efdc7035ae555212ba9ff6c94d7bbe4244ae18258b07f5ff32">sleepiness_levels::DEAD_TIRED</a></div><div class="ttdeci">@ DEAD_TIRED</div></div>
<div class="ttc" id="acharacter_8h_html_a28256deb3e43854efdc7035ae555212bac30a2ebffd3127f9dc4bb1cff2e29cea"><div class="ttname"><a href="character_8h.html#a28256deb3e43854efdc7035ae555212bac30a2ebffd3127f9dc4bb1cff2e29cea">sleepiness_levels::EXHAUSTED</a></div><div class="ttdeci">@ EXHAUSTED</div></div>
<div class="ttc" id="acharacter__attire_8h_html"><div class="ttname"><a href="character__attire_8h.html">character_attire.h</a></div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a0651a103f4530a625fc7defcd7372b37"><div class="ttname"><a href="character__body_8cpp.html#a0651a103f4530a625fc7defcd7372b37">trait_SLIMY</a></div><div class="ttdeci">static const trait_id trait_SLIMY(&quot;SLIMY&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a0864aecadfbfda58af09c883f5fd2e15"><div class="ttname"><a href="character__body_8cpp.html#a0864aecadfbfda58af09c883f5fd2e15">effect_wet</a></div><div class="ttdeci">static const efftype_id effect_wet(&quot;wet&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a0fc6709b43edf2d7ca11dccafdb71052"><div class="ttname"><a href="character__body_8cpp.html#a0fc6709b43edf2d7ca11dccafdb71052">vitamin_blood</a></div><div class="ttdeci">static const vitamin_id vitamin_blood(&quot;blood&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a151e6b162a8a2cdbdb11c407013076eb"><div class="ttname"><a href="character__body_8cpp.html#a151e6b162a8a2cdbdb11c407013076eb">effect_bleed</a></div><div class="ttdeci">static const efftype_id effect_bleed(&quot;bleed&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a18b7dcae7ca83a37c9c4ba81991a4056"><div class="ttname"><a href="character__body_8cpp.html#a18b7dcae7ca83a37c9c4ba81991a4056">bio_sleep_shutdown</a></div><div class="ttdeci">static const bionic_id bio_sleep_shutdown(&quot;bio_sleep_shutdown&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a18cca0d60af04a241e2561584946cf56"><div class="ttname"><a href="character__body_8cpp.html#a18cca0d60af04a241e2561584946cf56">json_flag_IGNORE_TEMP</a></div><div class="ttdeci">static const json_character_flag json_flag_IGNORE_TEMP(&quot;IGNORE_TEMP&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a1a6476e8888f0929f469fd9af2d629bc"><div class="ttname"><a href="character__body_8cpp.html#a1a6476e8888f0929f469fd9af2d629bc">effect_narcosis</a></div><div class="ttdeci">static const efftype_id effect_narcosis(&quot;narcosis&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a1b24df80fb6fce16dd4527cc4a6fa6ca"><div class="ttname"><a href="character__body_8cpp.html#a1b24df80fb6fce16dd4527cc4a6fa6ca">effect_adrenaline</a></div><div class="ttdeci">static const efftype_id effect_adrenaline(&quot;adrenaline&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a1de43fa1f6d16ce87ab7a3a49e47c463"><div class="ttname"><a href="character__body_8cpp.html#a1de43fa1f6d16ce87ab7a3a49e47c463">effect_infected</a></div><div class="ttdeci">static const efftype_id effect_infected(&quot;infected&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a1e2a085a78738d789a7447af81ed3deb"><div class="ttname"><a href="character__body_8cpp.html#a1e2a085a78738d789a7447af81ed3deb">effect_cold</a></div><div class="ttdeci">static const efftype_id effect_cold(&quot;cold&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a2049ad3a20e013061ce05da335d08179"><div class="ttname"><a href="character__body_8cpp.html#a2049ad3a20e013061ce05da335d08179">trait_DEBUG_NOTEMP</a></div><div class="ttdeci">static const trait_id trait_DEBUG_NOTEMP(&quot;DEBUG_NOTEMP&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a226c0f7c43c2c2718701324d346bd831"><div class="ttname"><a href="character__body_8cpp.html#a226c0f7c43c2c2718701324d346bd831">trait_DEBUG_LS</a></div><div class="ttdeci">static const trait_id trait_DEBUG_LS(&quot;DEBUG_LS&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a261eed8308b515cd628bf9f42455db7f"><div class="ttname"><a href="character__body_8cpp.html#a261eed8308b515cd628bf9f42455db7f">json_flag_COLDBLOOD3</a></div><div class="ttdeci">static const json_character_flag json_flag_COLDBLOOD3(&quot;COLDBLOOD3&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a2e0c7f462cebbf255a0471adb66442dd"><div class="ttname"><a href="character__body_8cpp.html#a2e0c7f462cebbf255a0471adb66442dd">json_flag_HEAT_IMMUNE</a></div><div class="ttdeci">static const json_character_flag json_flag_HEAT_IMMUNE(&quot;HEAT_IMMUNE&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a2e1ccdf5aa874eaaf8e3f14757d72179"><div class="ttname"><a href="character__body_8cpp.html#a2e1ccdf5aa874eaaf8e3f14757d72179">itype_rm13_armor_on</a></div><div class="ttdeci">static const itype_id itype_rm13_armor_on(&quot;rm13_armor_on&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a305fb2a130a501be6d0170d8dac09e8a"><div class="ttname"><a href="character__body_8cpp.html#a305fb2a130a501be6d0170d8dac09e8a">trait_BARK</a></div><div class="ttdeci">static const trait_id trait_BARK(&quot;BARK&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a3124b68e352cad48fc7848f4dc58973b"><div class="ttname"><a href="character__body_8cpp.html#a3124b68e352cad48fc7848f4dc58973b">effect_hunger_engorged</a></div><div class="ttdeci">static const efftype_id effect_hunger_engorged(&quot;hunger_engorged&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a328aaa21f9e64c2d22a68b9764a6a550"><div class="ttname"><a href="character__body_8cpp.html#a328aaa21f9e64c2d22a68b9764a6a550">trait_CHITIN_FUR</a></div><div class="ttdeci">static const trait_id trait_CHITIN_FUR(&quot;CHITIN_FUR&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a37e9489598e65e89dc71e28cb45c30f5"><div class="ttname"><a href="character__body_8cpp.html#a37e9489598e65e89dc71e28cb45c30f5">json_flag_LIMB_LOWER</a></div><div class="ttdeci">static const json_character_flag json_flag_LIMB_LOWER(&quot;LIMB_LOWER&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a39b21fc30fecd7d4fb15047600d03522"><div class="ttname"><a href="character__body_8cpp.html#a39b21fc30fecd7d4fb15047600d03522">effect_bite</a></div><div class="ttdeci">static const efftype_id effect_bite(&quot;bite&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a3a27c79bd0c0a2be0c26a01b981551d1"><div class="ttname"><a href="character__body_8cpp.html#a3a27c79bd0c0a2be0c26a01b981551d1">json_flag_COLDBLOOD2</a></div><div class="ttdeci">static const json_character_flag json_flag_COLDBLOOD2(&quot;COLDBLOOD2&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a3eff2536d0f2d082101e71815160a288"><div class="ttname"><a href="character__body_8cpp.html#a3eff2536d0f2d082101e71815160a288">json_flag_PAIN_IMMUNE</a></div><div class="ttdeci">static const json_character_flag json_flag_PAIN_IMMUNE(&quot;PAIN_IMMUNE&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a454de2cafad6a7a93aae2ea5d64c702a"><div class="ttname"><a href="character__body_8cpp.html#a454de2cafad6a7a93aae2ea5d64c702a">effect_hunger_very_hungry</a></div><div class="ttdeci">static const efftype_id effect_hunger_very_hungry(&quot;hunger_very_hungry&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a4c80f98459b07d9175c344914b1525dd"><div class="ttname"><a href="character__body_8cpp.html#a4c80f98459b07d9175c344914b1525dd">effect_hot</a></div><div class="ttdeci">static const efftype_id effect_hot(&quot;hot&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a512959ad2b35ea057f2fed5445fc23c4"><div class="ttname"><a href="character__body_8cpp.html#a512959ad2b35ea057f2fed5445fc23c4">trait_PYROMANIA</a></div><div class="ttdeci">static const trait_id trait_PYROMANIA(&quot;PYROMANIA&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a5e214c27e471a762c49dc1e0b819ec2f"><div class="ttname"><a href="character__body_8cpp.html#a5e214c27e471a762c49dc1e0b819ec2f">json_flag_HEATSINK</a></div><div class="ttdeci">static const json_character_flag json_flag_HEATSINK(&quot;HEATSINK&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a5e4712a48bd75fcf33e7f8d605ab75b8"><div class="ttname"><a href="character__body_8cpp.html#a5e4712a48bd75fcf33e7f8d605ab75b8">json_flag_NO_THIRST</a></div><div class="ttdeci">static const json_character_flag json_flag_NO_THIRST(&quot;NO_THIRST&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a6fa88d25e9b69979f002a30d541b6244"><div class="ttname"><a href="character__body_8cpp.html#a6fa88d25e9b69979f002a30d541b6244">effect_blisters</a></div><div class="ttdeci">static const efftype_id effect_blisters(&quot;blisters&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a7233d432bb6c3c3fcbef0adcf137d36b"><div class="ttname"><a href="character__body_8cpp.html#a7233d432bb6c3c3fcbef0adcf137d36b">effect_hunger_near_starving</a></div><div class="ttdeci">static const efftype_id effect_hunger_near_starving(&quot;hunger_near_starving&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a74d0a0db7f9f29452ac4406a6c3f2541"><div class="ttname"><a href="character__body_8cpp.html#a74d0a0db7f9f29452ac4406a6c3f2541">json_flag_ECTOTHERM</a></div><div class="ttdeci">static const json_character_flag json_flag_ECTOTHERM(&quot;ECTOTHERM&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a7b7626136317fab938997e90fd3f5876"><div class="ttname"><a href="character__body_8cpp.html#a7b7626136317fab938997e90fd3f5876">effect_frostbite_recovery</a></div><div class="ttdeci">static const efftype_id effect_frostbite_recovery(&quot;frostbite_recovery&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a7b9b5dc5aace58de30f3602e0413cfb8"><div class="ttname"><a href="character__body_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">trait_CHITIN_FUR3</a></div><div class="ttdeci">static const trait_id trait_CHITIN_FUR3(&quot;CHITIN_FUR3&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a7c2a13f94c0d13712af84b23f13e788f"><div class="ttname"><a href="character__body_8cpp.html#a7c2a13f94c0d13712af84b23f13e788f">effect_bandaged</a></div><div class="ttdeci">static const efftype_id effect_bandaged(&quot;bandaged&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a80c61d54a8759044f6c7c841469ee11d"><div class="ttname"><a href="character__body_8cpp.html#a80c61d54a8759044f6c7c841469ee11d">trait_LIGHTFUR</a></div><div class="ttdeci">static const trait_id trait_LIGHTFUR(&quot;LIGHTFUR&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a83afbd8e4dbefc1f99df9624fd9d7824"><div class="ttname"><a href="character__body_8cpp.html#a83afbd8e4dbefc1f99df9624fd9d7824">trait_FELINE_FUR</a></div><div class="ttdeci">static const trait_id trait_FELINE_FUR(&quot;FELINE_FUR&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a8533b6c22d92696d791d5b24a8e74ee2"><div class="ttname"><a href="character__body_8cpp.html#a8533b6c22d92696d791d5b24a8e74ee2">json_flag_COLDBLOOD</a></div><div class="ttdeci">static const json_character_flag json_flag_COLDBLOOD(&quot;COLDBLOOD&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a8ab43cdb18ab06dc2569f4bdce2b8ae5"><div class="ttname"><a href="character__body_8cpp.html#a8ab43cdb18ab06dc2569f4bdce2b8ae5">effect_hunger_starving</a></div><div class="ttdeci">static const efftype_id effect_hunger_starving(&quot;hunger_starving&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_a8b84fb29e831d3d5948f3003808d2c93"><div class="ttname"><a href="character__body_8cpp.html#a8b84fb29e831d3d5948f3003808d2c93">effect_hunger_satisfied</a></div><div class="ttdeci">static const efftype_id effect_hunger_satisfied(&quot;hunger_satisfied&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_aa2e65123ffb4aa24bb23f1bf49f5dc01"><div class="ttname"><a href="character__body_8cpp.html#aa2e65123ffb4aa24bb23f1bf49f5dc01">effect_hunger_full</a></div><div class="ttdeci">static const efftype_id effect_hunger_full(&quot;hunger_full&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_aa6055e7b9d5b2cb3ecd4cce48a416d33"><div class="ttname"><a href="character__body_8cpp.html#aa6055e7b9d5b2cb3ecd4cce48a416d33">effect_cig</a></div><div class="ttdeci">static const efftype_id effect_cig(&quot;cig&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_aa77ed7c083f15f6a9ca6a92185d0ab63"><div class="ttname"><a href="character__body_8cpp.html#aa77ed7c083f15f6a9ca6a92185d0ab63">character_modifier_stamina_recovery_breathing_mod</a></div><div class="ttdeci">static const character_modifier_id character_modifier_stamina_recovery_breathing_mod(&quot;stamina_recovery_breathing_mod&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_aa9c71c27aec3d6c98d982792f15e613c"><div class="ttname"><a href="character__body_8cpp.html#aa9c71c27aec3d6c98d982792f15e613c">trait_FUR</a></div><div class="ttdeci">static const trait_id trait_FUR(&quot;FUR&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_ab16f8be4be2050986e76d2cb0cff7609"><div class="ttname"><a href="character__body_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">effect_sleep</a></div><div class="ttdeci">static const efftype_id effect_sleep(&quot;sleep&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_ab4605586a0d3ba987fa7aeb18cf224b6"><div class="ttname"><a href="character__body_8cpp.html#ab4605586a0d3ba987fa7aeb18cf224b6">effect_betablock</a></div><div class="ttdeci">static const efftype_id effect_betablock(&quot;betablock&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_ab558627fa5f7d625a9883d230e8525ae"><div class="ttname"><a href="character__body_8cpp.html#ab558627fa5f7d625a9883d230e8525ae">effect_flu</a></div><div class="ttdeci">static const efftype_id effect_flu(&quot;flu&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_ab987f0249d5dcb5a351fe48ffebffc55"><div class="ttname"><a href="character__body_8cpp.html#ab987f0249d5dcb5a351fe48ffebffc55">effect_hypovolemia</a></div><div class="ttdeci">static const efftype_id effect_hypovolemia(&quot;hypovolemia&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_abcdd71c4a5fac2f06983145c1bf5c9e1"><div class="ttname"><a href="character__body_8cpp.html#abcdd71c4a5fac2f06983145c1bf5c9e1">effect_hunger_hungry</a></div><div class="ttdeci">static const efftype_id effect_hunger_hungry(&quot;hunger_hungry&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_ac71452586eb6cf87fab888bc561dc897"><div class="ttname"><a href="character__body_8cpp.html#ac71452586eb6cf87fab888bc561dc897">trait_M_DEPENDENT</a></div><div class="ttdeci">static const trait_id trait_M_DEPENDENT(&quot;M_DEPENDENT&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_acb85acf9c8e335d2a81088095aa6c986"><div class="ttname"><a href="character__body_8cpp.html#acb85acf9c8e335d2a81088095aa6c986">effect_hot_speed</a></div><div class="ttdeci">static const efftype_id effect_hot_speed(&quot;hot_speed&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_ad42a2492eba82e538cb9a07114fe9118"><div class="ttname"><a href="character__body_8cpp.html#ad42a2492eba82e538cb9a07114fe9118">effect_common_cold</a></div><div class="ttdeci">static const efftype_id effect_common_cold(&quot;common_cold&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_adcc47d614ba63ddb056307153d5ac06c"><div class="ttname"><a href="character__body_8cpp.html#adcc47d614ba63ddb056307153d5ac06c">effect_disinfected</a></div><div class="ttdeci">static const efftype_id effect_disinfected(&quot;disinfected&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_ae239a31e1ebbbbacd06a8fcdd8be2861"><div class="ttname"><a href="character__body_8cpp.html#ae239a31e1ebbbbacd06a8fcdd8be2861">effect_mending</a></div><div class="ttdeci">static const efftype_id effect_mending(&quot;mending&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_ae3b12d473a928a50b2b322d2c8f579ab"><div class="ttname"><a href="character__body_8cpp.html#ae3b12d473a928a50b2b322d2c8f579ab">effect_hunger_blank</a></div><div class="ttdeci">static const efftype_id effect_hunger_blank(&quot;hunger_blank&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_aeced506658f24495d18152830064a45f"><div class="ttname"><a href="character__body_8cpp.html#aeced506658f24495d18152830064a45f">trait_LUPINE_FUR</a></div><div class="ttdeci">static const trait_id trait_LUPINE_FUR(&quot;LUPINE_FUR&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_af64f93e0cd0159900c96d6aab9fe9dd1"><div class="ttname"><a href="character__body_8cpp.html#af64f93e0cd0159900c96d6aab9fe9dd1">ticks_between</a></div><div class="ttdeci">static int ticks_between(const time_point &amp;from, const time_point &amp;to, const time_duration &amp;tick_length)</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l00224">character_body.cpp:224</a></div></div>
<div class="ttc" id="acharacter__body_8cpp_html_af83add4ee97cce1fc50812e5c46f73cc"><div class="ttname"><a href="character__body_8cpp.html#af83add4ee97cce1fc50812e5c46f73cc">trait_URSINE_FUR</a></div><div class="ttdeci">static const trait_id trait_URSINE_FUR(&quot;URSINE_FUR&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_afb770e7a1728acdd3e13e46fc82e3b9a"><div class="ttname"><a href="character__body_8cpp.html#afb770e7a1728acdd3e13e46fc82e3b9a">effect_hunger_famished</a></div><div class="ttdeci">static const efftype_id effect_hunger_famished(&quot;hunger_famished&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_afd4a5a40423282c43d1715bf1cc99357"><div class="ttname"><a href="character__body_8cpp.html#afd4a5a40423282c43d1715bf1cc99357">effect_frostbite</a></div><div class="ttdeci">static const efftype_id effect_frostbite(&quot;frostbite&quot;)</div></div>
<div class="ttc" id="acharacter__body_8cpp_html_afeabd53c61defabb9ba3721de6b91280"><div class="ttname"><a href="character__body_8cpp.html#afeabd53c61defabb9ba3721de6b91280">trait_CHITIN_FUR2</a></div><div class="ttdeci">static const trait_id trait_CHITIN_FUR2(&quot;CHITIN_FUR2&quot;)</div></div>
<div class="ttc" id="aclassCharacter_html_a04fc1337bdd5b0865a7c47e36b034b7e"><div class="ttname"><a href="classCharacter.html#a04fc1337bdd5b0865a7c47e36b034b7e">Character::mod_stored_kcal</a></div><div class="ttdeci">void mod_stored_kcal(int nkcal, bool ignore_weariness=false)</div><div class="ttdoc">Modifiers for need values exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04426">character.cpp:4426</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0577ee469440295bc4f4670b2bc2ede7"><div class="ttname"><a href="classCharacter.html#a0577ee469440295bc4f4670b2bc2ede7">Character::get_oxygen_max</a></div><div class="ttdeci">int get_oxygen_max() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00702">character.cpp:702</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0932b7b9d2a60fbbb3f529420c8713d8"><div class="ttname"><a href="classCharacter.html#a0932b7b9d2a60fbbb3f529420c8713d8">Character::reset_daily_vitamin</a></div><div class="ttdeci">void reset_daily_vitamin(const vitamin_id &amp;vit)</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00696">consumption.cpp:696</a></div></div>
<div class="ttc" id="aclassCharacter_html_a09ebaae789cac07fc64b168da40de4b3"><div class="ttname"><a href="classCharacter.html#a09ebaae789cac07fc64b168da40de4b3">Character::modify_heartrate_effect_mod</a></div><div class="ttdeci">void modify_heartrate_effect_mod(int mod)</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01375">character_body.cpp:1375</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0b32571db45faeab8561f33af6da1e28"><div class="ttname"><a href="classCharacter.html#a0b32571db45faeab8561f33af6da1e28">Character::wake_up</a></div><div class="ttdeci">virtual void wake_up()</div><div class="ttdoc">Removes &quot;sleep&quot; and &quot;lying_down&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07385">character.cpp:7385</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0db6db96a763c104f325ad13b85f014d"><div class="ttname"><a href="classCharacter.html#a0db6db96a763c104f325ad13b85f014d">Character::mutation_effect</a></div><div class="ttdeci">void mutation_effect(const trait_id &amp;mut, bool worn_destroyed_override)</div><div class="ttdoc">Handles things like destruction of armor, etc.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00503">mutation.cpp:503</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0fdb4777727ac2b44c100217bda8a0f2"><div class="ttname"><a href="classCharacter.html#a0fdb4777727ac2b44c100217bda8a0f2">Character::circulation_resistance</a></div><div class="ttdeci">float circulation_resistance</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l04035">character.h:4035</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0ffe14df559cee6e9b5d02f5b214d009"><div class="ttname"><a href="classCharacter.html#a0ffe14df559cee6e9b5d02f5b214d009">Character::get_stamina</a></div><div class="ttdeci">int get_stamina() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06806">character.cpp:6806</a></div></div>
<div class="ttc" id="aclassCharacter_html_a170fafbb40a7a5d375e1d5c617540d63"><div class="ttname"><a href="classCharacter.html#a170fafbb40a7a5d375e1d5c617540d63">Character::update_bloodvol_index</a></div><div class="ttdeci">void update_bloodvol_index()</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01509">character_body.cpp:1509</a></div></div>
<div class="ttc" id="aclassCharacter_html_a17f57232562f7cd952a831ab8e230118"><div class="ttname"><a href="classCharacter.html#a17f57232562f7cd952a831ab8e230118">Character::get_circulation_resistance</a></div><div class="ttdeci">float get_circulation_resistance() const</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01516">character_body.cpp:1516</a></div></div>
<div class="ttc" id="aclassCharacter_html_a191d57983e5a0064be49504c11e8b56a"><div class="ttname"><a href="classCharacter.html#a191d57983e5a0064be49504c11e8b56a">Character::get_modifier</a></div><div class="ttdeci">float get_modifier(const character_modifier_id &amp;mod, const skill_id &amp;skill=skill_id::NULL_ID()) const</div><div class="ttdef"><b>Definition:</b> <a href="character__modifier_8cpp_source.html#l00401">character_modifier.cpp:401</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1d7a77cd3514e9e8b113497fbf86e3c6"><div class="ttname"><a href="classCharacter.html#a1d7a77cd3514e9e8b113497fbf86e3c6">Character::bodytemp_modifier_traits</a></div><div class="ttdeci">units::temperature_delta bodytemp_modifier_traits(bool overheated) const</div><div class="ttdoc">Correction factor of the body temperature due to traits and mutations.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09284">character.cpp:9284</a></div></div>
<div class="ttc" id="aclassCharacter_html_a20f69f688aa280f410803f11a78c21f1"><div class="ttname"><a href="classCharacter.html#a20f69f688aa280f410803f11a78c21f1">Character::blood_vol_index</a></div><div class="ttdeci">float blood_vol_index</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l04030">character.h:4030</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2390104b9c8741944fe8d9df0ade22bd"><div class="ttname"><a href="classCharacter.html#a2390104b9c8741944fe8d9df0ade22bd">Character::get_wind_resistance</a></div><div class="ttdeci">std::map&lt; bodypart_id, int &gt; get_wind_resistance(const std::map&lt; bodypart_id, std::vector&lt; const item * &gt;&gt; &amp;clothing_map) const</div><div class="ttdoc">Returns wind resistance provided by armor, etc.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03955">character.cpp:3955</a></div></div>
<div class="ttc" id="aclassCharacter_html_a241e50ee41a2a2b54f1c1329cb60a174"><div class="ttname"><a href="classCharacter.html#a241e50ee41a2a2b54f1c1329cb60a174">Character::get_sleepiness</a></div><div class="ttdeci">int get_sleepiness() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04604">character.cpp:4604</a></div></div>
<div class="ttc" id="aclassCharacter_html_a24a1143537358b4138e3d9d504847a81"><div class="ttname"><a href="classCharacter.html#a24a1143537358b4138e3d9d504847a81">Character::metabolic_rate</a></div><div class="ttdeci">float metabolic_rate() const</div><div class="ttdoc">Current metabolic rate due to traits, hunger, speed, etc.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00724">consumption.cpp:724</a></div></div>
<div class="ttc" id="aclassCharacter_html_a25ab33c46a461bea826856e916787bf2"><div class="ttname"><a href="classCharacter.html#a25ab33c46a461bea826856e916787bf2">Character::body_window</a></div><div class="ttdeci">bodypart_id body_window(const std::string &amp;menu_header, bool show_all, bool precise, int normal_bonus, int head_bonus, int torso_bonus, int bleed, float bite, float infect, float bandage_power, float disinfectant_power) const</div><div class="ttdoc">Displays menu with body part hp, optionally with hp estimation after healing.</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01121">character_body.cpp:1121</a></div></div>
<div class="ttc" id="aclassCharacter_html_a25ee5d4e960b37f61619e14a6b5f8fab"><div class="ttname"><a href="classCharacter.html#a25ee5d4e960b37f61619e14a6b5f8fab">Character::modify_respiration_effect_mod</a></div><div class="ttdeci">void modify_respiration_effect_mod(int mod)</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01580">character_body.cpp:1580</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2628a1ee62641b2dcbb1037d5477181b"><div class="ttname"><a href="classCharacter.html#a2628a1ee62641b2dcbb1037d5477181b">Character::reset_continuous_sleep</a></div><div class="ttdeci">void reset_continuous_sleep()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04599">character.cpp:4599</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2725bcbfa9e92e0590930e6a8e35764c"><div class="ttname"><a href="classCharacter.html#a2725bcbfa9e92e0590930e6a8e35764c">Character::rem_morale</a></div><div class="ttdeci">void rem_morale(const morale_type &amp;type, const itype *item_type=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="character__morale_8cpp_source.html#l00154">character_morale.cpp:154</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2822f0506187eabf7a31f74c05ac338d"><div class="ttname"><a href="classCharacter.html#a2822f0506187eabf7a31f74c05ac338d">Character::bp_effect_mod</a></div><div class="ttdeci">int bp_effect_mod</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l04049">character.h:4049</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2fd91641a2b7d9449712891d16e347dc"><div class="ttname"><a href="classCharacter.html#a2fd91641a2b7d9449712891d16e347dc">Character::get_bmr</a></div><div class="ttdeci">int get_bmr() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06540">character.cpp:6540</a></div></div>
<div class="ttc" id="aclassCharacter_html_a315b653b250c40f9c34fd20253f0e69e"><div class="ttname"><a href="classCharacter.html#a315b653b250c40f9c34fd20253f0e69e">Character::get_daily_vitamin</a></div><div class="ttdeci">int get_daily_vitamin(const vitamin_id &amp;vit, bool actual=true) const</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00681">consumption.cpp:681</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3af86f02cd2055f220d3e80788e30f65"><div class="ttname"><a href="classCharacter.html#a3af86f02cd2055f220d3e80788e30f65">Character::enchantment_wear_change</a></div><div class="ttdeci">void enchantment_wear_change()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09968">character.cpp:9968</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3ea76e0b374732e29cd4c00adef6f4da"><div class="ttname"><a href="classCharacter.html#a3ea76e0b374732e29cd4c00adef6f4da">Character::update_circulation_resistance</a></div><div class="ttdeci">void update_circulation_resistance()</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01536">character_body.cpp:1536</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3f54c26e34e9408d134650fe14b72975"><div class="ttname"><a href="classCharacter.html#a3f54c26e34e9408d134650fe14b72975">Character::circulation</a></div><div class="ttdeci">float circulation</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l04033">character.h:4033</a></div></div>
<div class="ttc" id="aclassCharacter_html_a42c4ba47635e0659553c233c399da84a"><div class="ttname"><a href="classCharacter.html#a42c4ba47635e0659553c233c399da84a">Character::get_kcal_percent</a></div><div class="ttdeci">float get_kcal_percent() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04476">character.cpp:4476</a></div></div>
<div class="ttc" id="aclassCharacter_html_a46302dc71cfc84856e8af85ddb61c7e1"><div class="ttname"><a href="classCharacter.html#a46302dc71cfc84856e8af85ddb61c7e1">Character::worn</a></div><div class="ttdeci">outfit worn</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02690">character.h:2690</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4863cebe02ce178af7eb2351a59824af"><div class="ttname"><a href="classCharacter.html#a4863cebe02ce178af7eb2351a59824af">Character::cached_mutations</a></div><div class="ttdeci">std::vector&lt; const mutation_branch * &gt; cached_mutations</div><div class="ttdoc">Pointers to mutation branches in my_mutations.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l03918">character.h:3918</a></div></div>
<div class="ttc" id="aclassCharacter_html_a48ebd046d64553ac91ab7b8a463007dd"><div class="ttname"><a href="classCharacter.html#a48ebd046d64553ac91ab7b8a463007dd">Character::check_needs_extremes</a></div><div class="ttdeci">void check_needs_extremes()</div><div class="ttdoc">Kills the player if too hungry, stimmed up etc., forces tired player to sleep and prints warnings.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05232">character.cpp:5232</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4e8716e54043dc4adb51bc8bd2832580"><div class="ttname"><a href="classCharacter.html#a4e8716e54043dc4adb51bc8bd2832580">Character::do_skill_rust</a></div><div class="ttdeci">void do_skill_rust()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03654">character.cpp:3654</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4f0bdbd929787a486a0dd5748ef10c65"><div class="ttname"><a href="classCharacter.html#a4f0bdbd929787a486a0dd5748ef10c65">Character::in_sleep_state</a></div><div class="ttdeci">bool in_sleep_state() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09307">character.cpp:9307</a></div></div>
<div class="ttc" id="aclassCharacter_html_a517b958e3db0d2619eb237aa838ffe71"><div class="ttname"><a href="classCharacter.html#a517b958e3db0d2619eb237aa838ffe71">Character::get_cardio_acc_base</a></div><div class="ttdeci">int get_cardio_acc_base() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07139">character.cpp:7139</a></div></div>
<div class="ttc" id="aclassCharacter_html_a51bc8c5d29ce51eee2eca42767487ac9"><div class="ttname"><a href="classCharacter.html#a51bc8c5d29ce51eee2eca42767487ac9">Character::temp_corrected_by_climate_control</a></div><div class="ttdeci">units::temperature temp_corrected_by_climate_control(units::temperature temperature, int heat_strength, int chill_strength) const</div><div class="ttdoc">Value of the body temperature corrected by climate control.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09293">character.cpp:9293</a></div></div>
<div class="ttc" id="aclassCharacter_html_a51eea7d6d7e07294b74c4fcf93d77923"><div class="ttname"><a href="classCharacter.html#a51eea7d6d7e07294b74c4fcf93d77923">Character::get_bmi_fat</a></div><div class="ttdeci">float get_bmi_fat() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06381">character.cpp:6381</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5751b689e5a4ecd43b6de5c3e2d31541"><div class="ttname"><a href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">Character::has_bionic</a></div><div class="ttdeci">bool has_bionic(const bionic_id &amp;b) const</div><div class="ttdoc">Returns true if the player has the entered bionic id.</div><div class="ttdef"><b>Definition:</b> <a href="bionics_8cpp_source.html#l02648">bionics.cpp:2648</a></div></div>
<div class="ttc" id="aclassCharacter_html_a590532afaea37ab21527b68a6e98b44b"><div class="ttname"><a href="classCharacter.html#a590532afaea37ab21527b68a6e98b44b">Character::resp_rate_effect_mod</a></div><div class="ttdeci">int resp_rate_effect_mod</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l04051">character.h:4051</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5a3caa102dc37449f727d8c32d741d7c"><div class="ttname"><a href="classCharacter.html#a5a3caa102dc37449f727d8c32d741d7c">Character::get_continuous_sleep</a></div><div class="ttdeci">time_duration get_continuous_sleep() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04589">character.cpp:4589</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5aa889eacdf39af30d230991dd773bd1"><div class="ttname"><a href="classCharacter.html#a5aa889eacdf39af30d230991dd773bd1">Character::mod_daily_health</a></div><div class="ttdeci">void mod_daily_health(int nhealthy_mod, int cap)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04334">character.cpp:4334</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5e8c602b59f317fda67c51ee187695d8"><div class="ttname"><a href="classCharacter.html#a5e8c602b59f317fda67c51ee187695d8">Character::update_frostbite</a></div><div class="ttdeci">void update_frostbite(const bodypart_id &amp;bp, int FBwindPower, const std::map&lt; bodypart_id, int &gt; &amp;warmth_per_bp)</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l00840">character_body.cpp:840</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5fd4e97e86ba73af9727242e6e581114"><div class="ttname"><a href="classCharacter.html#a5fd4e97e86ba73af9727242e6e581114">Character::get_bloodvol_index</a></div><div class="ttdeci">float get_bloodvol_index() const</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01503">character_body.cpp:1503</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6028587ccee9855c6ba900042188eec3"><div class="ttname"><a href="classCharacter.html#a6028587ccee9855c6ba900042188eec3">Character::is_wearing</a></div><div class="ttdeci">bool is_wearing(const itype_id &amp;it) const</div><div class="ttdoc">Returns true if the player is wearing the item.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00538">character_attire.cpp:538</a></div></div>
<div class="ttc" id="aclassCharacter_html_a62ab7c4550ce76204e86b54457bfad71"><div class="ttname"><a href="classCharacter.html#a62ab7c4550ce76204e86b54457bfad71">Character::mutations_to_add</a></div><div class="ttdeci">std::vector&lt; trait_id &gt; mutations_to_add</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l03923">character.h:3923</a></div></div>
<div class="ttc" id="aclassCharacter_html_a631b96c96ff9c08b7eb56f59bb7e4334"><div class="ttname"><a href="classCharacter.html#a631b96c96ff9c08b7eb56f59bb7e4334">Character::modify_bp_effect_mod</a></div><div class="ttdeci">void modify_bp_effect_mod(int mod)</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01526">character_body.cpp:1526</a></div></div>
<div class="ttc" id="aclassCharacter_html_a632d4a94827de8c0ab32d218a947c75f"><div class="ttname"><a href="classCharacter.html#a632d4a94827de8c0ab32d218a947c75f">Character::get_bp_effect_mod</a></div><div class="ttdeci">int get_bp_effect_mod() const</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01531">character_body.cpp:1531</a></div></div>
<div class="ttc" id="aclassCharacter_html_a633f77d7216de89b079a1a382b7d233a"><div class="ttname"><a href="classCharacter.html#a633f77d7216de89b079a1a382b7d233a">Character::mod_stored_calories</a></div><div class="ttdeci">void mod_stored_calories(int ncal, bool ignore_weariness=false)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04433">character.cpp:4433</a></div></div>
<div class="ttc" id="aclassCharacter_html_a654477095d99d22583346286ce2bc6fa"><div class="ttname"><a href="classCharacter.html#a654477095d99d22583346286ce2bc6fa">Character::update_needs</a></div><div class="ttdeci">void update_needs(int rate_multiplier)</div><div class="ttdoc">Increases hunger, thirst, sleepiness and stimulants wearing off.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04992">character.cpp:4992</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6592c35167738421f3e04ca8808d37db"><div class="ttname"><a href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">Character::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02684">character.h:2684</a></div></div>
<div class="ttc" id="aclassCharacter_html_a68de7da109abd90b4f2210057c982fe0"><div class="ttname"><a href="classCharacter.html#a68de7da109abd90b4f2210057c982fe0">Character::get_perceived_pain</a></div><div class="ttdeci">int get_perceived_pain() const override</div><div class="ttdoc">Returns perceived pain (reduced with painkillers)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l12517">character.cpp:12517</a></div></div>
<div class="ttc" id="aclassCharacter_html_a699b9a087c5952715add3e17f6b2fbd1"><div class="ttname"><a href="classCharacter.html#a699b9a087c5952715add3e17f6b2fbd1">Character::get_heartrate_index</a></div><div class="ttdeci">float get_heartrate_index() const</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01365">character_body.cpp:1365</a></div></div>
<div class="ttc" id="aclassCharacter_html_a69e57fe63798a35cd107786c0a12a58b"><div class="ttname"><a href="classCharacter.html#a69e57fe63798a35cd107786c0a12a58b">Character::can_recover_oxygen</a></div><div class="ttdeci">bool can_recover_oxygen() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00707">character.cpp:707</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6e24aab61f2ff8333a4f938cce785b3f"><div class="ttname"><a href="classCharacter.html#a6e24aab61f2ff8333a4f938cce785b3f">Character::guts</a></div><div class="ttdeci">stomach_contents guts</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02729">character.h:2729</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7006397bf06cdd04b1808d69fd48e707"><div class="ttname"><a href="classCharacter.html#a7006397bf06cdd04b1808d69fd48e707">Character::mod_daily_sleep</a></div><div class="ttdeci">void mod_daily_sleep(time_duration mod)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04579">character.cpp:4579</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7335f053c5874081211552623fa625c5"><div class="ttname"><a href="classCharacter.html#a7335f053c5874081211552623fa625c5">Character::get_stim</a></div><div class="ttdeci">int get_stim() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06742">character.cpp:6742</a></div></div>
<div class="ttc" id="aclassCharacter_html_a74ea39bd5cfd3989342daf4f6c5fa2ea"><div class="ttname"><a href="classCharacter.html#a74ea39bd5cfd3989342daf4f6c5fa2ea">Character::get_cardio_acc</a></div><div class="ttdeci">int get_cardio_acc() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07124">character.cpp:7124</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7536f499a8b09536d1d9c8360319fad5"><div class="ttname"><a href="classCharacter.html#a7536f499a8b09536d1d9c8360319fad5">Character::vitamin_get</a></div><div class="ttdeci">int vitamin_get(const vitamin_id &amp;vit) const</div><div class="ttdoc">Check current level of a vitamin.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00671">consumption.cpp:671</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7bb3c92bba69a2421c07748f57aa4d82"><div class="ttname"><a href="classCharacter.html#a7bb3c92bba69a2421c07748f57aa4d82">Character::set_hunger</a></div><div class="ttdeci">void set_hunger(int nhunger)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04493">character.cpp:4493</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7ca6c670844c9fd8c419c474788a7bf7"><div class="ttname"><a href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">Character::get_thirst</a></div><div class="ttdeci">virtual int get_thirst() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04517">character.cpp:4517</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7e6047473daf10a958da373672bc782a"><div class="ttname"><a href="classCharacter.html#a7e6047473daf10a958da373672bc782a">Character::bonus_item_warmth</a></div><div class="ttdeci">std::map&lt; bodypart_id, int &gt; bonus_item_warmth() const</div><div class="ttdoc">Returns warmth provided by an armor's bonus, like hoods, pockets, etc.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09164">character.cpp:9164</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7e86db8045680d3e2ab435a7cde32109"><div class="ttname"><a href="classCharacter.html#a7e86db8045680d3e2ab435a7cde32109">Character::update_respiration_rate</a></div><div class="ttdeci">void update_respiration_rate()</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01590">character_body.cpp:1590</a></div></div>
<div class="ttc" id="aclassCharacter_html_a81bb1175f3a238fbbcce1932cdc28cb1"><div class="ttname"><a href="classCharacter.html#a81bb1175f3a238fbbcce1932cdc28cb1">Character::set_bp_effect_mod</a></div><div class="ttdeci">void set_bp_effect_mod(int mod)</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01521">character_body.cpp:1521</a></div></div>
<div class="ttc" id="aclassCharacter_html_a824a60fef8920f38a6f1e1b35bea4879"><div class="ttname"><a href="classCharacter.html#a824a60fef8920f38a6f1e1b35bea4879">Character::get_stored_kcal</a></div><div class="ttdeci">int get_stored_kcal() const</div><div class="ttdoc">Getter for need values exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04375">character.cpp:4375</a></div></div>
<div class="ttc" id="aclassCharacter_html_a83a488cecdb389877d2148c36bcb97f5"><div class="ttname"><a href="classCharacter.html#a83a488cecdb389877d2148c36bcb97f5">Character::reset_daily_sleep</a></div><div class="ttdeci">void reset_daily_sleep()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04584">character.cpp:4584</a></div></div>
<div class="ttc" id="aclassCharacter_html_a86472795da754293d2eb4d5d35534619"><div class="ttname"><a href="classCharacter.html#a86472795da754293d2eb4d5d35534619">Character::regen</a></div><div class="ttdeci">void regen(int rate_multiplier)</div><div class="ttdoc">Handles passive regeneration of pain and maybe hp.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04759">character.cpp:4759</a></div></div>
<div class="ttc" id="aclassCharacter_html_a865e5eb770c71b3bd4ec4a05235cd3b6"><div class="ttname"><a href="classCharacter.html#a865e5eb770c71b3bd4ec4a05235cd3b6">Character::oxygen</a></div><div class="ttdeci">int oxygen</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02735">character.h:2735</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8f89bb839f1049beebbb66bff650db42"><div class="ttname"><a href="classCharacter.html#a8f89bb839f1049beebbb66bff650db42">Character::activity_history</a></div><div class="ttdeci">activity_tracker activity_history</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l03892">character.h:3892</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8f914d66d3d996a1356a31caf1d44c13"><div class="ttname"><a href="classCharacter.html#a8f914d66d3d996a1356a31caf1d44c13">Character::is_npc</a></div><div class="ttdeci">bool is_npc() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00538">character.h:538</a></div></div>
<div class="ttc" id="aclassCharacter_html_a96c49f3f9ea963e813ed6f90b19c18b7"><div class="ttname"><a href="classCharacter.html#a96c49f3f9ea963e813ed6f90b19c18b7">Character::base_bmr</a></div><div class="ttdeci">int base_bmr() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06528">character.cpp:6528</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9933f26da5f1a3b4e87fcc1ff783dc65"><div class="ttname"><a href="classCharacter.html#a9933f26da5f1a3b4e87fcc1ff783dc65">Character::get_respiration_rate</a></div><div class="ttdeci">float get_respiration_rate() const</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01570">character_body.cpp:1570</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9b2b7e1e9f7bf88c5f0d7ea2155642be"><div class="ttname"><a href="classCharacter.html#a9b2b7e1e9f7bf88c5f0d7ea2155642be">Character::get_mutations</a></div><div class="ttdeci">std::vector&lt; trait_id &gt; get_mutations(bool include_hidden=true, bool ignore_enchantment=false, const std::function&lt; bool(const mutation_branch &amp;)&gt; &amp;filter=nullptr) const</div><div class="ttdoc">Get the idents of all traits/mutations.</div><div class="ttdef"><b>Definition:</b> <a href="newcharacter_8cpp_source.html#l04655">newcharacter.cpp:4655</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9ce2644a98b526b5e453b043f5fa49bc"><div class="ttname"><a href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">Character::mod_thirst</a></div><div class="ttdeci">void mod_thirst(int nthirst)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04528">character.cpp:4528</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa23ac0479291f0d7cfec1432ec4612d2"><div class="ttname"><a href="classCharacter.html#aa23ac0479291f0d7cfec1432ec4612d2">Character::vitamin_RDA</a></div><div class="ttdeci">int vitamin_RDA(const vitamin_id &amp;vitamin, int ammount) const</div><div class="ttdoc">Returns the % of your RDA that ammount of vitamin represents.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07711">character.cpp:7711</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa4ecfee35839a07be48afccbe582023e"><div class="ttname"><a href="classCharacter.html#aa4ecfee35839a07be48afccbe582023e">Character::stomach</a></div><div class="ttdeci">stomach_contents stomach</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02728">character.h:2728</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa5b5af8930de14abd0df92f007e9d176"><div class="ttname"><a href="classCharacter.html#aa5b5af8930de14abd0df92f007e9d176">Character::mod_hunger</a></div><div class="ttdeci">void mod_hunger(int nhunger)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04486">character.cpp:4486</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa6396870f289f9c3b1dc4ea91f7a65f0"><div class="ttname"><a href="classCharacter.html#aa6396870f289f9c3b1dc4ea91f7a65f0">Character::recalculate_enchantment_cache</a></div><div class="ttdeci">void recalculate_enchantment_cache()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07750">character.cpp:7750</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa852ce89f403e193136516699c635b06"><div class="ttname"><a href="classCharacter.html#aa852ce89f403e193136516699c635b06">Character::heart_rate_index</a></div><div class="ttdeci">float heart_rate_index</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l04029">character.h:4029</a></div></div>
<div class="ttc" id="aclassCharacter_html_aaa88cf522afdfdc90edcbd9fdefca47d"><div class="ttname"><a href="classCharacter.html#aaa88cf522afdfdc90edcbd9fdefca47d">Character::get_healthy_kcal</a></div><div class="ttdeci">int get_healthy_kcal() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04470">character.cpp:4470</a></div></div>
<div class="ttc" id="aclassCharacter_html_aae2bc9c34641e5e18b8a3bdc111b4323"><div class="ttname"><a href="classCharacter.html#aae2bc9c34641e5e18b8a3bdc111b4323">Character::needs_food</a></div><div class="ttdeci">bool needs_food() const</div><div class="ttdoc">Returns true if character needs food, false if character is an NPC with NO_NPC_FOOD set.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04985">character.cpp:4985</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab1c5a29039893bd41d82908a9eb5655a"><div class="ttname"><a href="classCharacter.html#ab1c5a29039893bd41d82908a9eb5655a">Character::calc_needs_rates</a></div><div class="ttdeci">needs_rates calc_needs_rates() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05122">character.cpp:5122</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab69f64cf85e71b7b80262685da442e50"><div class="ttname"><a href="classCharacter.html#ab69f64cf85e71b7b80262685da442e50">Character::mod_continuous_sleep</a></div><div class="ttdeci">void mod_continuous_sleep(time_duration mod)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04594">character.cpp:4594</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab6b6b317ae10bfb8f358fe289d645c96"><div class="ttname"><a href="classCharacter.html#ab6b6b317ae10bfb8f358fe289d645c96">Character::add_morale</a></div><div class="ttdeci">void add_morale(const morale_type &amp;type, int bonus, int max_bonus=0, const time_duration &amp;duration=1_hours, const time_duration &amp;decay_start=30_minutes, bool capped=false, const itype *item_type=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="character__morale_8cpp_source.html#l00142">character_morale.cpp:142</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab819e08febc259c326511186905d4989"><div class="ttname"><a href="classCharacter.html#ab819e08febc259c326511186905d4989">Character::update_circulation</a></div><div class="ttdeci">void update_circulation()</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01553">character_body.cpp:1553</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab937dd4b9a2cf84fb446d0da98a62365"><div class="ttname"><a href="classCharacter.html#ab937dd4b9a2cf84fb446d0da98a62365">Character::get_hunger</a></div><div class="ttdeci">int get_hunger() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04481">character.cpp:4481</a></div></div>
<div class="ttc" id="aclassCharacter_html_abadbafc291e11034ae1db0f215e64ade"><div class="ttname"><a href="classCharacter.html#abadbafc291e11034ae1db0f215e64ade">Character::update_stomach</a></div><div class="ttdeci">void update_stomach(const time_point &amp;from, const time_point &amp;to)</div><div class="ttdoc">Updates the stomach to give accurate hunger messages.</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l00952">character_body.cpp:952</a></div></div>
<div class="ttc" id="aclassCharacter_html_abc5f7517b5c9ed41ded17291a5bc7f9d"><div class="ttname"><a href="classCharacter.html#abc5f7517b5c9ed41ded17291a5bc7f9d">Character::mend</a></div><div class="ttdeci">void mend(int rate_multiplier)</div><div class="ttdoc">Handles the chance for broken limbs to spontaneously heal to 1 HP.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l01775">suffer.cpp:1775</a></div></div>
<div class="ttc" id="aclassCharacter_html_abcd58241392cf60f0ea626242c2b5897"><div class="ttname"><a href="classCharacter.html#abcd58241392cf60f0ea626242c2b5897">Character::update_body_wetness</a></div><div class="ttdeci">void update_body_wetness(const w_point &amp;weather)</div><div class="ttdoc">Maintains body wetness and handles the rate at which the player dries.</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l00121">character_body.cpp:121</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac1cb4fe3c92b17fe1ac8a1658154aecf"><div class="ttname"><a href="classCharacter.html#ac1cb4fe3c92b17fe1ac8a1658154aecf">Character::can_use_floor_warmth</a></div><div class="ttdeci">bool can_use_floor_warmth() const</div><div class="ttdoc">Can the player lie down and cover self with blankets etc.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09190">character.cpp:9190</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac2245aed6c7279986f42ef9208e816c0"><div class="ttname"><a href="classCharacter.html#ac2245aed6c7279986f42ef9208e816c0">Character::is_limb_broken</a></div><div class="ttdeci">bool is_limb_broken(const bodypart_id &amp;limb) const</div><div class="ttdoc">Returns true if the limb is broken.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02149">character.cpp:2149</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac39374642038bc8b3dff5346d8a92000"><div class="ttname"><a href="classCharacter.html#ac39374642038bc8b3dff5346d8a92000">Character::vitamins_mod</a></div><div class="ttdeci">void vitamins_mod(const std::map&lt; vitamin_id, int &gt; &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00662">consumption.cpp:662</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac5fec9c4de042aabbc37168bbcbb4ce5"><div class="ttname"><a href="classCharacter.html#ac5fec9c4de042aabbc37168bbcbb4ce5">Character::update_enchantment_mutations</a></div><div class="ttdeci">void update_enchantment_mutations()</div><div class="ttdoc">Updates the mutations from enchantments.</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l00380">character_body.cpp:380</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac6f590f28f979103633d198e32524c06"><div class="ttname"><a href="classCharacter.html#ac6f590f28f979103633d198e32524c06">Character::is_prone</a></div><div class="ttdeci">bool is_prone() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02184">character.cpp:2184</a></div></div>
<div class="ttc" id="aclassCharacter_html_aca01eca93aac95d4ddcbc1fe47ea5110"><div class="ttname"><a href="classCharacter.html#aca01eca93aac95d4ddcbc1fe47ea5110">Character::get_heartrate_effect_mod</a></div><div class="ttdeci">int get_heartrate_effect_mod() const</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01380">character_body.cpp:1380</a></div></div>
<div class="ttc" id="aclassCharacter_html_aca04618a096cdf167a88143d66d4aa0a"><div class="ttname"><a href="classCharacter.html#aca04618a096cdf167a88143d66d4aa0a">Character::vitamin_rate</a></div><div class="ttdeci">time_duration vitamin_rate(const vitamin_id &amp;vit) const</div><div class="ttdoc">Get vitamin usage rate (minutes per unit) accounting for bionics, mutations and effects.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00565">consumption.cpp:565</a></div></div>
<div class="ttc" id="aclassCharacter_html_acc82e3ba51a76736d0e6c58d97a629f9"><div class="ttname"><a href="classCharacter.html#acc82e3ba51a76736d0e6c58d97a629f9">Character::effect_vitamin_mod</a></div><div class="ttdeci">std::map&lt; vitamin_id, int &gt; effect_vitamin_mod(const std::map&lt; vitamin_id, int &gt; &amp;)</div><div class="ttdoc">Modify vitamin intake (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00595">consumption.cpp:595</a></div></div>
<div class="ttc" id="aclassCharacter_html_acda9c561191689a3bdf5ecbd7474ccd3"><div class="ttname"><a href="classCharacter.html#acda9c561191689a3bdf5ecbd7474ccd3">Character::mutation_loss_effect</a></div><div class="ttdeci">void mutation_loss_effect(const trait_id &amp;mut)</div><div class="ttdoc">Handles what happens when you lose a mutation.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00583">mutation.cpp:583</a></div></div>
<div class="ttc" id="aclassCharacter_html_acedff8cd2fbf1962d5d0651b26c965a9"><div class="ttname"><a href="classCharacter.html#acedff8cd2fbf1962d5d0651b26c965a9">Character::respiration_rate</a></div><div class="ttdeci">float respiration_rate</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l04031">character.h:4031</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad34f73a380f10a167d5a301594a08ea7"><div class="ttname"><a href="classCharacter.html#ad34f73a380f10a167d5a301594a08ea7">Character::floor_warmth</a></div><div class="ttdeci">units::temperature_delta floor_warmth(const tripoint &amp;pos) const</div><div class="ttdoc">Final warmth from the floor.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09268">character.cpp:9268</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad4a6dd5ac7fae2ac49fb3ed28c47e3cb"><div class="ttname"><a href="classCharacter.html#ad4a6dd5ac7fae2ac49fb3ed28c47e3cb">Character::mutations_to_remove</a></div><div class="ttdeci">std::vector&lt; trait_id &gt; mutations_to_remove</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l03922">character.h:3922</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad5a4b3a6d42ca7483b4db66a209de350"><div class="ttname"><a href="classCharacter.html#ad5a4b3a6d42ca7483b4db66a209de350">Character::get_daily_sleep</a></div><div class="ttdeci">time_duration get_daily_sleep() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04574">character.cpp:4574</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad616e0deca97e35dbbc76e35da1831ee"><div class="ttname"><a href="classCharacter.html#ad616e0deca97e35dbbc76e35da1831ee">Character::temp_equalizer</a></div><div class="ttdeci">void temp_equalizer(const bodypart_id &amp;bp1, const bodypart_id &amp;bp2)</div><div class="ttdoc">Equalizes heat between body parts.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05534">character.cpp:5534</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad70d441e74ceb7f972ec2f88bcaeba14"><div class="ttname"><a href="classCharacter.html#ad70d441e74ceb7f972ec2f88bcaeba14">Character::log_activity_level</a></div><div class="ttdeci">virtual void log_activity_level(float)</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l03001">character.h:3001</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad8801271966e104b24bcd19dfc735b95"><div class="ttname"><a href="classCharacter.html#ad8801271966e104b24bcd19dfc735b95">Character::climate_control_strength</a></div><div class="ttdeci">std::pair&lt; int, int &gt; climate_control_strength() const</div><div class="ttdoc">Returns strength of any climate control affecting character, for heating and chilling respectively.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03902">character.cpp:3902</a></div></div>
<div class="ttc" id="aclassCharacter_html_ada3998df8603ef742373dbc228ac7820"><div class="ttname"><a href="classCharacter.html#ada3998df8603ef742373dbc228ac7820">Character::update_heartrate_index</a></div><div class="ttdeci">void update_heartrate_index()</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01385">character_body.cpp:1385</a></div></div>
<div class="ttc" id="aclassCharacter_html_add870e576ff59aa6943af286576219e9"><div class="ttname"><a href="classCharacter.html#add870e576ff59aa6943af286576219e9">Character::enchantment_cache</a></div><div class="ttdeci">pimpl&lt; enchant_cache &gt; enchantment_cache</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l04105">character.h:4105</a></div></div>
<div class="ttc" id="aclassCharacter_html_addcf2c54cf8c3920f66328e2441830fb"><div class="ttname"><a href="classCharacter.html#addcf2c54cf8c3920f66328e2441830fb">Character::worn_with_flag</a></div><div class="ttdeci">bool worn_with_flag(const flag_id &amp;flag, const bodypart_id &amp;bp) const</div><div class="ttdoc">Returns true if the player is wearing an item with the given flag.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l00548">character_attire.cpp:548</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae411805e21f6e2adcca747c5c61b9be0"><div class="ttname"><a href="classCharacter.html#ae411805e21f6e2adcca747c5c61b9be0">Character::vitamin_mod</a></div><div class="ttdeci">int vitamin_mod(const vitamin_id &amp;vit, int qty)</div><div class="ttdoc">Add or subtract vitamins from character storage pools.</div><div class="ttdef"><b>Definition:</b> <a href="consumption_8cpp_source.html#l00624">consumption.cpp:624</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae462e10544f067dd4e0b91da1064b81f"><div class="ttname"><a href="classCharacter.html#ae462e10544f067dd4e0b91da1064b81f">Character::get_respiration_effect_mod</a></div><div class="ttdeci">int get_respiration_effect_mod() const</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01575">character_body.cpp:1575</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae69d15c326c6243a9d5e7c2d4bf99b5b"><div class="ttname"><a href="classCharacter.html#ae69d15c326c6243a9d5e7c2d4bf99b5b">Character::get_all_armor_type</a></div><div class="ttdeci">std::map&lt; bodypart_id, int &gt; get_all_armor_type(const damage_type_id &amp;dt, const std::map&lt; bodypart_id, std::vector&lt; const item * &gt;&gt; &amp;clothing_map) const</div><div class="ttdef"><b>Definition:</b> <a href="character__armor_8cpp_source.html#l00093">character_armor.cpp:93</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae6bcae1e1d30b35e0152b5e1bd615f5e"><div class="ttname"><a href="classCharacter.html#ae6bcae1e1d30b35e0152b5e1bd615f5e">Character::set_thirst</a></div><div class="ttdeci">void set_thirst(int nthirst)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04536">character.cpp:4536</a></div></div>
<div class="ttc" id="aclassCharacter_html_aeb515d0fba62b5051045b206ade7ee31"><div class="ttname"><a href="classCharacter.html#aeb515d0fba62b5051045b206ade7ee31">Character::update_health</a></div><div class="ttdeci">virtual void update_health()</div><div class="ttdoc">Handles health fluctuations over time.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04820">character.cpp:4820</a></div></div>
<div class="ttc" id="aclassCharacter_html_aec78049b0ee4401d3a4c073663735aad"><div class="ttname"><a href="classCharacter.html#aec78049b0ee4401d3a4c073663735aad">Character::has_flag</a></div><div class="ttdeci">virtual bool has_flag(const mon_flag_id &amp;) const</div><div class="ttdoc">This is to prevent clang complaining about overloading a virtual function, the creature version uses ...</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00752">creature.h:752</a></div></div>
<div class="ttc" id="aclassCharacter_html_aeec57f9be2ff6c4dea96f2fd5e1d44f0"><div class="ttname"><a href="classCharacter.html#aeec57f9be2ff6c4dea96f2fd5e1d44f0">Character::addiction_level</a></div><div class="ttdeci">int addiction_level(const addiction_id &amp;type) const</div><div class="ttdoc">Returns the intensity of the specified addiction.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l02089">suffer.cpp:2089</a></div></div>
<div class="ttc" id="aclassCharacter_html_aeed55362be6677861a62ce2c49960810"><div class="ttname"><a href="classCharacter.html#aeed55362be6677861a62ce2c49960810">Character::update_bodytemp</a></div><div class="ttdeci">void update_bodytemp()</div><div class="ttdoc">Maintains body temperature.</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l00439">character_body.cpp:439</a></div></div>
<div class="ttc" id="aclassCharacter_html_aefe5432750eb1c2c65fea628fd9878a7"><div class="ttname"><a href="classCharacter.html#aefe5432750eb1c2c65fea628fd9878a7">Character::get_stamina_max</a></div><div class="ttdeci">int get_stamina_max() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06815">character.cpp:6815</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00111">mutation.cpp:111</a></div></div>
<div class="ttc" id="aclassCharacter_html_af0951239e610a5fe3d74853b857b4c5a"><div class="ttname"><a href="classCharacter.html#af0951239e610a5fe3d74853b857b4c5a">Character::set_heartrate_effect_mod</a></div><div class="ttdeci">void set_heartrate_effect_mod(int mod)</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01370">character_body.cpp:1370</a></div></div>
<div class="ttc" id="aclassCharacter_html_af2ff32cce5f17bcf04be958121abe524"><div class="ttname"><a href="classCharacter.html#af2ff32cce5f17bcf04be958121abe524">Character::magic</a></div><div class="ttdeci">pimpl&lt; known_magic &gt; magic</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02485">character.h:2485</a></div></div>
<div class="ttc" id="aclassCharacter_html_af57e8ba9aafdd6960677af16d90ce0c0"><div class="ttname"><a href="classCharacter.html#af57e8ba9aafdd6960677af16d90ce0c0">Character::update_stamina</a></div><div class="ttdeci">void update_stamina(int turns)</div><div class="ttdoc">Regenerates stamina.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07023">character.cpp:7023</a></div></div>
<div class="ttc" id="aclassCharacter_html_af5e36191325bfbc72b0e624284cfebae"><div class="ttname"><a href="classCharacter.html#af5e36191325bfbc72b0e624284cfebae">Character::update_body</a></div><div class="ttdeci">void update_body()</div><div class="ttdoc">Updates all &quot;biology&quot; by one turn.</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l00216">character_body.cpp:216</a></div></div>
<div class="ttc" id="aclassCharacter_html_af8647bc6f18ace0dbeccd5dff8b45500"><div class="ttname"><a href="classCharacter.html#af8647bc6f18ace0dbeccd5dff8b45500">Character::calc_sleep_recovery_rate</a></div><div class="ttdeci">void calc_sleep_recovery_rate(needs_rates &amp;rates) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l05170">character.cpp:5170</a></div></div>
<div class="ttc" id="aclassCharacter_html_afb4c5e855922e1745579b05214cb766e"><div class="ttname"><a href="classCharacter.html#afb4c5e855922e1745579b05214cb766e">Character::set_respiration_effect_mod</a></div><div class="ttdeci">void set_respiration_effect_mod(int mod)</div><div class="ttdef"><b>Definition:</b> <a href="character__body_8cpp_source.html#l01585">character_body.cpp:1585</a></div></div>
<div class="ttc" id="aclassCharacter_html_afe38a8ce69919ba90f4704b2392f7e63"><div class="ttname"><a href="classCharacter.html#afe38a8ce69919ba90f4704b2392f7e63">Character::heart_rate_effect_mod</a></div><div class="ttdeci">int heart_rate_effect_mod</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l04050">character.h:4050</a></div></div>
<div class="ttc" id="aclassCreature_html_a04c1983abeefbf67db1e3f2b2a9b58ab"><div class="ttname"><a href="classCreature.html#a04c1983abeefbf67db1e3f2b2a9b58ab">Creature::set_value</a></div><div class="ttdeci">void set_value(const std::string &amp;key, const std::string &amp;value)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01949">creature.cpp:1949</a></div></div>
<div class="ttc" id="aclassCreature_html_a14ecbd8f044628463354090421a805b4"><div class="ttname"><a href="classCreature.html#a14ecbd8f044628463354090421a805b4">Creature::global_omt_location</a></div><div class="ttdeci">tripoint_abs_omt global_omt_location() const</div><div class="ttdoc">Returns the location of the creature in global overmap terrain coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l03242">creature.cpp:3242</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a3c6e764ace1edd0dadf641bacd1bec"><div class="ttname"><a href="classCreature.html#a1a3c6e764ace1edd0dadf641bacd1bec">Creature::mod_part_temp_cur</a></div><div class="ttdeci">void mod_part_temp_cur(const bodypart_id &amp;id, units::temperature_delta mod)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02435">creature.cpp:2435</a></div></div>
<div class="ttc" id="aclassCreature_html_a1a65722d07102550f16d17ebd79e2743"><div class="ttname"><a href="classCreature.html#a1a65722d07102550f16d17ebd79e2743">Creature::pos</a></div><div class="ttdeci">tripoint pos() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00178">creature.cpp:178</a></div></div>
<div class="ttc" id="aclassCreature_html_a1ba25d990e8532dd2b0331bfc6cc694c"><div class="ttname"><a href="classCreature.html#a1ba25d990e8532dd2b0331bfc6cc694c">Creature::get_effect_dur</a></div><div class="ttdeci">time_duration get_effect_dur(const efftype_id &amp;eff_id, const bodypart_id &amp;bp=bodypart_str_id::NULL_ID()) const</div><div class="ttdoc">Returns the duration of the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01863">creature.cpp:1863</a></div></div>
<div class="ttc" id="aclassCreature_html_a1c6d98c5a339561c989ba3e1ca34eeb8"><div class="ttname"><a href="classCreature.html#a1c6d98c5a339561c989ba3e1ca34eeb8">Creature::remove_effect</a></div><div class="ttdeci">bool remove_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp)</div><div class="ttdoc">Removes a listed effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01722">creature.cpp:1722</a></div></div>
<div class="ttc" id="aclassCreature_html_a2acb6e1e19bcb775748403d07d8dc3f0"><div class="ttname"><a href="classCreature.html#a2acb6e1e19bcb775748403d07d8dc3f0">Creature::get_value</a></div><div class="ttdeci">std::string get_value(const std::string &amp;key) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01959">creature.cpp:1959</a></div></div>
<div class="ttc" id="aclassCreature_html_a2d8cf3a723e8cc8df3666fc49540ce94"><div class="ttname"><a href="classCreature.html#a2d8cf3a723e8cc8df3666fc49540ce94">Creature::mod_part_wetness</a></div><div class="ttdeci">void mod_part_wetness(const bodypart_id &amp;id, int mod)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02430">creature.cpp:2430</a></div></div>
<div class="ttc" id="aclassCreature_html_a303fcc58869f10f44be1d598ed1aa26f"><div class="ttname"><a href="classCreature.html#a303fcc58869f10f44be1d598ed1aa26f">Creature::bleed</a></div><div class="ttdeci">virtual void bleed() const</div><div class="ttdoc">Adds an appropriate blood splatter.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00230">creature.cpp:230</a></div></div>
<div class="ttc" id="aclassCreature_html_a3261de1530798f5b934a71b9a4e17f5b"><div class="ttname"><a href="classCreature.html#a3261de1530798f5b934a71b9a4e17f5b">Creature::get_location</a></div><div class="ttdeci">tripoint_abs_ms get_location() const</div><div class="ttdoc">Returns the location of the creature in map square coordinates (the most detailed coordinate system),...</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l03232">creature.cpp:3232</a></div></div>
<div class="ttc" id="aclassCreature_html_a371a35ce9173bd2c444cb08c64726560"><div class="ttname"><a href="classCreature.html#a371a35ce9173bd2c444cb08c64726560">Creature::set_part_frostbite_timer</a></div><div class="ttdeci">void set_part_frostbite_timer(const bodypart_id &amp;id, int set)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02391">creature.cpp:2391</a></div></div>
<div class="ttc" id="aclassCreature_html_a3efb920d8e3d22ee766b62012ad0f9cd"><div class="ttname"><a href="classCreature.html#a3efb920d8e3d22ee766b62012ad0f9cd">Creature::as_avatar</a></div><div class="ttdeci">virtual avatar * as_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00280">creature.h:280</a></div></div>
<div class="ttc" id="aclassCreature_html_a4537397ede1aea8ecec28183252aabe3"><div class="ttname"><a href="classCreature.html#a4537397ede1aea8ecec28183252aabe3">Creature::get_all_body_parts</a></div><div class="ttdeci">std::vector&lt; bodypart_id &gt; get_all_body_parts(get_body_part_flags=get_body_part_flags::none) const</div><div class="ttdoc">Returns body parts this creature have.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02627">creature.cpp:2627</a></div></div>
<div class="ttc" id="aclassCreature_html_a4a302365853bfdd5351a384c4cc823e1"><div class="ttname"><a href="classCreature.html#a4a302365853bfdd5351a384c4cc823e1">Creature::set_part_wetness</a></div><div class="ttdeci">void set_part_wetness(const bodypart_id &amp;id, int set)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02376">creature.cpp:2376</a></div></div>
<div class="ttc" id="aclassCreature_html_a4b42a11004d8092e0453f9122632de99"><div class="ttname"><a href="classCreature.html#a4b42a11004d8092e0453f9122632de99">Creature::get_part_wetness_percentage</a></div><div class="ttdeci">float get_part_wetness_percentage(const bodypart_id &amp;id) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02337">creature.cpp:2337</a></div></div>
<div class="ttc" id="aclassCreature_html_a50eb7b6f001c10c9ee253ad8b85f57a9"><div class="ttname"><a href="classCreature.html#a50eb7b6f001c10c9ee253ad8b85f57a9">Creature::set_part_temp_cur</a></div><div class="ttdeci">void set_part_temp_cur(const bodypart_id &amp;id, units::temperature set)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02381">creature.cpp:2381</a></div></div>
<div class="ttc" id="aclassCreature_html_a5619a04558f7cf1ea1fb24bcbca84cab"><div class="ttname"><a href="classCreature.html#a5619a04558f7cf1ea1fb24bcbca84cab">Creature::get_part_temp_conv</a></div><div class="ttdeci">units::temperature get_part_temp_conv(const bodypart_id &amp;id) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02322">creature.cpp:2322</a></div></div>
<div class="ttc" id="aclassCreature_html_a5a2346f549de9c87e8f2afeec1e71366"><div class="ttname"><a href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">Creature::is_underwater</a></div><div class="ttdeci">virtual bool is_underwater() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00292">creature.cpp:292</a></div></div>
<div class="ttc" id="aclassCreature_html_a617d9f695722c4865c7d60ef30438711"><div class="ttname"><a href="classCreature.html#a617d9f695722c4865c7d60ef30438711">Creature::get_part_frostbite_timer</a></div><div class="ttdeci">int get_part_frostbite_timer(const bodypart_id &amp;id) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02327">creature.cpp:2327</a></div></div>
<div class="ttc" id="aclassCreature_html_a666022fd3ed772fa109d273c20e8de55"><div class="ttname"><a href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">Creature::add_effect</a></div><div class="ttdeci">void add_effect(const effect &amp;eff, bool force=false, bool deferred=false)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00604">creature.h:604</a></div></div>
<div class="ttc" id="aclassCreature_html_a6ad06869ed97eb2701f5f74b7d36281e"><div class="ttname"><a href="classCreature.html#a6ad06869ed97eb2701f5f74b7d36281e">Creature::remove_value</a></div><div class="ttdeci">void remove_value(const std::string &amp;key)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01954">creature.cpp:1954</a></div></div>
<div class="ttc" id="aclassCreature_html_a6d140fa65e8f80987add3259db6cc170"><div class="ttname"><a href="classCreature.html#a6d140fa65e8f80987add3259db6cc170">Creature::set_all_parts_temp_cur</a></div><div class="ttdeci">void set_all_parts_temp_cur(units::temperature set)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02450">creature.cpp:2450</a></div></div>
<div class="ttc" id="aclassCreature_html_a7bf62f4f36b0475f1f39ea27f3beebb0"><div class="ttname"><a href="classCreature.html#a7bf62f4f36b0475f1f39ea27f3beebb0">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01770">creature.cpp:1770</a></div></div>
<div class="ttc" id="aclassCreature_html_a8d6c44f7a224dca20bd27befb6133db3"><div class="ttname"><a href="classCreature.html#a8d6c44f7a224dca20bd27befb6133db3">Creature::mod_part_frostbite_timer</a></div><div class="ttdeci">void mod_part_frostbite_timer(const bodypart_id &amp;id, int mod)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02445">creature.cpp:2445</a></div></div>
<div class="ttc" id="aclassCreature_html_a8e646d4365acc80cd729c95588974267"><div class="ttname"><a href="classCreature.html#a8e646d4365acc80cd729c95588974267">Creature::get_part_wetness</a></div><div class="ttdeci">int get_part_wetness(const bodypart_id &amp;id) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02312">creature.cpp:2312</a></div></div>
<div class="ttc" id="aclassCreature_html_a9689d4816bc2d1204c53c114190fde50"><div class="ttname"><a href="classCreature.html#a9689d4816bc2d1204c53c114190fde50">Creature::get_effect_int</a></div><div class="ttdeci">int get_effect_int(const efftype_id &amp;eff_id, const bodypart_id &amp;bp=bodypart_str_id::NULL_ID()) const</div><div class="ttdoc">Returns the intensity of the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01872">creature.cpp:1872</a></div></div>
<div class="ttc" id="aclassCreature_html_a9c0a2f5bc6bb8c450f9eddad749cf407"><div class="ttname"><a href="classCreature.html#a9c0a2f5bc6bb8c450f9eddad749cf407">Creature::last_updated</a></div><div class="ttdeci">time_point last_updated</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l01238">creature.h:1238</a></div></div>
<div class="ttc" id="aclassCreature_html_aa8d3d8f5a3260c5b54e4973e957f356d"><div class="ttname"><a href="classCreature.html#aa8d3d8f5a3260c5b54e4973e957f356d">Creature::get_effect</a></div><div class="ttdeci">const effect &amp; get_effect(const efftype_id &amp;eff_id, const bodypart_id &amp;bp=bodypart_str_id::NULL_ID()) const</div><div class="ttdoc">Return the effect that matches the given arguments exactly.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01852">creature.cpp:1852</a></div></div>
<div class="ttc" id="aclassCreature_html_aad6dc5532f233030d367ed67e0ea6613"><div class="ttname"><a href="classCreature.html#aad6dc5532f233030d367ed67e0ea6613">Creature::get_part_hp_max</a></div><div class="ttdeci">int get_part_hp_max(const bodypart_id &amp;id) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02282">creature.cpp:2282</a></div></div>
<div class="ttc" id="aclassCreature_html_ab901ee8b150fdad01ff2028ec8dba84c"><div class="ttname"><a href="classCreature.html#ab901ee8b150fdad01ff2028ec8dba84c">Creature::get_part_hp_cur</a></div><div class="ttdeci">int get_part_hp_cur(const bodypart_id &amp;id) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02277">creature.cpp:2277</a></div></div>
<div class="ttc" id="aclassCreature_html_ac209d32cbfd3774af3d5c0500e2fae52"><div class="ttname"><a href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">Creature::is_avatar</a></div><div class="ttdeci">virtual bool is_avatar() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00265">creature.h:265</a></div></div>
<div class="ttc" id="aclassCreature_html_acb022e34c016f883fb785ab8af715bd0"><div class="ttname"><a href="classCreature.html#acb022e34c016f883fb785ab8af715bd0">Creature::get_part_temp_cur</a></div><div class="ttdeci">units::temperature get_part_temp_cur(const bodypart_id &amp;id) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02317">creature.cpp:2317</a></div></div>
<div class="ttc" id="aclassCreature_html_ad698149db2e025cddd1e774770fc7de8"><div class="ttname"><a href="classCreature.html#ad698149db2e025cddd1e774770fc7de8">Creature::set_part_temp_conv</a></div><div class="ttdeci">void set_part_temp_conv(const bodypart_id &amp;id, units::temperature set)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02386">creature.cpp:2386</a></div></div>
<div class="ttc" id="aclassCreature_html_ad783dabe159958ef84fda098adc655fe"><div class="ttname"><a href="classCreature.html#ad783dabe159958ef84fda098adc655fe">Creature::set_all_parts_temp_conv</a></div><div class="ttdeci">void set_all_parts_temp_conv(units::temperature set)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02460">creature.cpp:2460</a></div></div>
<div class="ttc" id="aclassCreature_html_ae751e29e56563f0aed6fbb462cdca9c4"><div class="ttname"><a href="classCreature.html#ae751e29e56563f0aed6fbb462cdca9c4">Creature::get_part_drench_capacity</a></div><div class="ttdeci">int get_part_drench_capacity(const bodypart_id &amp;id) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02307">creature.cpp:2307</a></div></div>
<div class="ttc" id="aclassCreature_html_ae8f80dc1205c60890a41fb5d34ea97a6"><div class="ttname"><a href="classCreature.html#ae8f80dc1205c60890a41fb5d34ea97a6">Creature::mod_part_temp_conv</a></div><div class="ttdeci">void mod_part_temp_conv(const bodypart_id &amp;id, units::temperature_delta mod)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02440">creature.cpp:2440</a></div></div>
<div class="ttc" id="aclassactivity__tracker_html_a0ab89419aa2f00e1eb991e4d9b096d3e"><div class="ttname"><a href="classactivity__tracker.html#a0ab89419aa2f00e1eb991e4d9b096d3e">activity_tracker::try_reduce_weariness</a></div><div class="ttdeci">void try_reduce_weariness(int bmr, float sleepiness_mod, float sleepiness_regen_mod)</div><div class="ttdef"><b>Definition:</b> <a href="activity__tracker_8cpp_source.html#l00022">activity_tracker.cpp:22</a></div></div>
<div class="ttc" id="aclassactivity__tracker_html_a3bacbd18e39f1c0cdc2a632f7f720201"><div class="ttname"><a href="classactivity__tracker.html#a3bacbd18e39f1c0cdc2a632f7f720201">activity_tracker::average_activity</a></div><div class="ttdeci">float average_activity() const</div><div class="ttdef"><b>Definition:</b> <a href="activity__tracker_8cpp_source.html#l00099">activity_tracker.cpp:99</a></div></div>
<div class="ttc" id="aclassactivity__tracker_html_a5586030bfb3a6ec4e7498908261086b8"><div class="ttname"><a href="classactivity__tracker.html#a5586030bfb3a6ec4e7498908261086b8">activity_tracker::new_turn</a></div><div class="ttdeci">void new_turn(bool sleeping=false)</div><div class="ttdef"><b>Definition:</b> <a href="activity__tracker_8cpp_source.html#l00125">activity_tracker.cpp:125</a></div></div>
<div class="ttc" id="aclassactivity__tracker_html_aea0585398142fd539a42038988f80c98"><div class="ttname"><a href="classactivity__tracker.html#aea0585398142fd539a42038988f80c98">activity_tracker::reset_activity_level</a></div><div class="ttdeci">void reset_activity_level()</div><div class="ttdef"><b>Definition:</b> <a href="activity__tracker_8cpp_source.html#l00150">activity_tracker.cpp:150</a></div></div>
<div class="ttc" id="aclassavatar_html_a0698f21d33da87261681237fef7b5002"><div class="ttname"><a href="classavatar.html#a0698f21d33da87261681237fef7b5002">avatar::advance_daily_calories</a></div><div class="ttdeci">void advance_daily_calories()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01584">avatar.cpp:1584</a></div></div>
<div class="ttc" id="aclassavatar_html_a4c07a102dc6e18b31eea927c5297bf01"><div class="ttname"><a href="classavatar.html#a4c07a102dc6e18b31eea927c5297bf01">avatar::update_cardio_acc</a></div><div class="ttdeci">void update_cardio_acc() override</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l01551">avatar.cpp:1551</a></div></div>
<div class="ttc" id="aclasseffect_html"><div class="ttname"><a href="classeffect.html">effect</a></div><div class="ttdef"><b>Definition:</b> <a href="effect_8h_source.html#l00260">effect.h:261</a></div></div>
<div class="ttc" id="aclasseffect_html_a11dfe5a38fa2a63bf309b491f64051e0"><div class="ttname"><a href="classeffect.html#a11dfe5a38fa2a63bf309b491f64051e0">effect::get_max_intensity</a></div><div class="ttdeci">int get_max_intensity() const</div><div class="ttdoc">Returns the maximum intensity of an effect.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01192">effect.cpp:1192</a></div></div>
<div class="ttc" id="aclasseffect_html_a34c766f51dc0f89ebdab09c344bb506b"><div class="ttname"><a href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">effect::get_duration</a></div><div class="ttdeci">time_duration get_duration() const</div><div class="ttdoc">Returns the remaining duration of an effect.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01068">effect.cpp:1068</a></div></div>
<div class="ttc" id="aclasseffect_html_a39ebd2ec5b2faacde7483e0c07240baa"><div class="ttname"><a href="classeffect.html#a39ebd2ec5b2faacde7483e0c07240baa">effect::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns true if the effect is the result of effect(), ie.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00767">effect.cpp:767</a></div></div>
<div class="ttc" id="aclasseffect_html_a5201a58434d343a00ce457ce6602905c"><div class="ttname"><a href="classeffect.html#a5201a58434d343a00ce457ce6602905c">effect::get_max_duration</a></div><div class="ttdeci">time_duration get_max_duration() const</div><div class="ttdoc">Returns the maximum duration of an effect.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01072">effect.cpp:1072</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id&lt; body_part_type &gt;</a></div></div>
<div class="ttc" id="aclassint__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">int_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00026">ammo_effect.cpp:26</a></div></div>
<div class="ttc" id="aclassint__id_html_a88b1e0c550f4d6f36cac7a73feca7f01"><div class="ttname"><a href="classint__id.html#a88b1e0c550f4d6f36cac7a73feca7f01">int_id::id</a></div><div class="ttdeci">const string_id&lt; T &gt; &amp; id() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00033">ammo_effect.cpp:33</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00195">item.h:196</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00345">map.h:346</a></div></div>
<div class="ttc" id="aclassmap_html_aa487d96256c3d35db7a1bf273156b64a"><div class="ttname"><a href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">map::veh_at</a></div><div class="ttdeci">optional_vpart_position veh_at(const tripoint &amp;p) const</div><div class="ttdoc">Checks if tile is occupied by vehicle and by which part.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01316">map.cpp:1316</a></div></div>
<div class="ttc" id="aclassmap_html_af0e872a5d0a7bf1e9745aeb18d3b5e44"><div class="ttname"><a href="classmap.html#af0e872a5d0a7bf1e9745aeb18d3b5e44">map::has_flag_ter</a></div><div class="ttdeci">bool has_flag_ter(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l03107">map.cpp:3107</a></div></div>
<div class="ttc" id="aclassmap_html_af55e014aab791bbe4c8630361c1311dd"><div class="ttname"><a href="classmap.html#af55e014aab791bbe4c8630361c1311dd">map::furn</a></div><div class="ttdeci">furn_id furn(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01722">map.cpp:1722</a></div></div>
<div class="ttc" id="aclassnc__color_html"><div class="ttname"><a href="classnc__color.html">nc_color</a></div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00347">color.h:348</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html"><div class="ttname"><a href="classoptional__vpart__position.html">optional_vpart_position</a></div><div class="ttdoc">Simple wrapper to forward functions that may return a std::optional to vpart_position.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00124">vpart_position.h:125</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html_a4c78451e42e97753079ecd2a54c7143d"><div class="ttname"><a href="classoptional__vpart__position.html#a4c78451e42e97753079ecd2a54c7143d">optional_vpart_position::part_with_feature</a></div><div class="ttdeci">std::optional&lt; vpart_reference &gt; part_with_feature(const std::string &amp;f, bool unbroken) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02698">vehicle.cpp:2698</a></div></div>
<div class="ttc" id="aclassoutfit_html_a087ea131fcd9e1682ed2e35a0e9febbc"><div class="ttname"><a href="classoutfit.html#a087ea131fcd9e1682ed2e35a0e9febbc">outfit::clothing_wetness_mult</a></div><div class="ttdeci">float clothing_wetness_mult(const bodypart_id &amp;bp) const</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l02629">character_attire.cpp:2629</a></div></div>
<div class="ttc" id="aclassoutfit_html_ab919d43f3403e3fa0d7df1a847d3a606"><div class="ttname"><a href="classoutfit.html#ab919d43f3403e3fa0d7df1a847d3a606">outfit::warmth</a></div><div class="ttdeci">std::map&lt; bodypart_id, int &gt; warmth(const Character &amp;guy) const</div><div class="ttdoc">Returns warmth provided by armor, etc.</div><div class="ttdef"><b>Definition:</b> <a href="character__attire_8cpp_source.html#l01991">character_attire.cpp:1991</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_aa9fbf966291f6b82de9c540262324aba"><div class="ttname"><a href="classovermapbuffer.html#aa9fbf966291f6b82de9c540262324aba">overmapbuffer::ter</a></div><div class="ttdeci">const oter_id &amp; ter(const tripoint_abs_omt &amp;p)</div><div class="ttdoc">Returns the overmap terrain at the given OMT coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00780">overmapbuffer.cpp:780</a></div></div>
<div class="ttc" id="aclassstomach__contents_html_a52e4721f4afcc99ddb28d261fc90cc32"><div class="ttname"><a href="classstomach__contents.html#a52e4721f4afcc99ddb28d261fc90cc32">stomach_contents::contains</a></div><div class="ttdeci">units::volume contains() const</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00316">stomach.cpp:316</a></div></div>
<div class="ttc" id="aclassstomach__contents_html_a5c9cbe0f4330c8b1d41e8088181d6772"><div class="ttname"><a href="classstomach__contents.html#a5c9cbe0f4330c8b1d41e8088181d6772">stomach_contents::digest</a></div><div class="ttdeci">food_summary digest(const Character &amp;owner, const needs_rates &amp;metabolic_rates, int five_mins, int half_hours)</div><div class="ttdoc">Processes food and outputs nutrients that are finished processing Metabolic rates are required becaus...</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00329">stomach.cpp:329</a></div></div>
<div class="ttc" id="aclassstomach__contents_html_a93a1500302155581c1846aa84314b81b"><div class="ttname"><a href="classstomach__contents.html#a93a1500302155581c1846aa84314b81b">stomach_contents::capacity</a></div><div class="ttdeci">units::volume capacity(const Character &amp;owner) const</div><div class="ttdoc">Calculates the capacity of this stomach.</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00305">stomach.cpp:305</a></div></div>
<div class="ttc" id="aclassstomach__contents_html_a96eccd372c5b0f42ca47bfd7bfeabaec"><div class="ttname"><a href="classstomach__contents.html#a96eccd372c5b0f42ca47bfd7bfeabaec">stomach_contents::ingest</a></div><div class="ttdeci">void ingest(const food_summary &amp;ingested)</div><div class="ttdoc">Directly adds food to stomach contents.</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00321">stomach.cpp:321</a></div></div>
<div class="ttc" id="aclassstomach__contents_html_aa5cf12fa92df9630e78c4cf5af74d616"><div class="ttname"><a href="classstomach__contents.html#aa5cf12fa92df9630e78c4cf5af74d616">stomach_contents::get_calories</a></div><div class="ttdeci">int get_calories() const</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00442">stomach.cpp:442</a></div></div>
<div class="ttc" id="aclassstomach__contents_html_ace65447c3d3c8aea9d16531303d58a24"><div class="ttname"><a href="classstomach__contents.html#ace65447c3d3c8aea9d16531303d58a24">stomach_contents::time_since_ate</a></div><div class="ttdeci">time_duration time_since_ate() const</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00457">stomach.cpp:457</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; bionic_data &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a1b2100ed077789ba45aaf5081791b36c"><div class="ttname"><a href="classstring__id.html#a1b2100ed077789ba45aaf5081791b36c">string_id&lt; furn_t &gt;::NULL_ID</a></div><div class="ttdeci">static const string_id&lt; furn_t &gt; &amp; NULL_ID()</div><div class="ttdoc">Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.</div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00196">calendar.h:197</a></div></div>
<div class="ttc" id="aclasstime__point_html"><div class="ttname"><a href="classtime__point.html">time_point</a></div><div class="ttdoc">A point in the game time.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00459">calendar.h:460</a></div></div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00231">ui.h:232</a></div></div>
<div class="ttc" id="aclassuilist_html_a0baa34622db6972a59d47d478bfd21d6"><div class="ttname"><a href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">uilist::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00525">ui.h:525</a></div></div>
<div class="ttc" id="aclassuilist_html_a18fd9765355d9e418bc2c399048e0645"><div class="ttname"><a href="classuilist.html#a18fd9765355d9e418bc2c399048e0645">uilist::addentry</a></div><div class="ttdeci">void addentry(const std::string &amp;txt)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01210">ui.cpp:1210</a></div></div>
<div class="ttc" id="aclassuilist_html_a1a7ee6e719a4f1bba45fc94e29a19166"><div class="ttname"><a href="classuilist.html#a1a7ee6e719a4f1bba45fc94e29a19166">uilist::desc_enabled</a></div><div class="ttdeci">bool desc_enabled</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00451">ui.h:451</a></div></div>
<div class="ttc" id="aclassuilist_html_a7a5f0a055d59c6465d3da0856847a5a1"><div class="ttname"><a href="classuilist.html#a7a5f0a055d59c6465d3da0856847a5a1">uilist::set_selected</a></div><div class="ttdeci">void set_selected(int index)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01264">ui.cpp:1264</a></div></div>
<div class="ttc" id="aclassuilist_html_adc2a36afdfede40aa5927aa8c3b0d526"><div class="ttname"><a href="classuilist.html#adc2a36afdfede40aa5927aa8c3b0d526">uilist::addentry_desc</a></div><div class="ttdeci">void addentry_desc(const std::string &amp;txt, const std::string &amp;desc)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01227">ui.cpp:1227</a></div></div>
<div class="ttc" id="aclassuilist_html_ae4ae08b4f010935825c956ea705065aa"><div class="ttname"><a href="classuilist.html#ae4ae08b4f010935825c956ea705065aa">uilist::hilight_disabled</a></div><div class="ttdeci">bool hilight_disabled</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00467">ui.h:467</a></div></div>
<div class="ttc" id="aclassuilist_html_af59dd3fdde04746dbc5cb52b355577ce"><div class="ttname"><a href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">uilist::text</a></div><div class="ttdeci">std::string text</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00419">ui.h:419</a></div></div>
<div class="ttc" id="aclassuilist_html_afac67857b05ede5fe30cdd0feb3caf93"><div class="ttname"><a href="classuilist.html#afac67857b05ede5fe30cdd0feb3caf93">uilist::textwidth</a></div><div class="ttdeci">int textwidth</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00441">ui.h:441</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00028">units.h:29</a></div></div>
<div class="ttc" id="aclassvitamin_html"><div class="ttname"><a href="classvitamin.html">vitamin</a></div><div class="ttdef"><b>Definition:</b> <a href="vitamin_8h_source.html#l00034">vitamin.h:35</a></div></div>
<div class="ttc" id="aclassvitamin_html_abed8d50d1b8805a7f7ce49ce09ab1b7a"><div class="ttname"><a href="classvitamin.html#abed8d50d1b8805a7f7ce49ce09ab1b7a">vitamin::all</a></div><div class="ttdeci">static const std::map&lt; vitamin_id, vitamin &gt; &amp; all()</div><div class="ttdoc">Get all currently loaded vitamins.</div><div class="ttdef"><b>Definition:</b> <a href="vitamin_8cpp_source.html#l00101">vitamin.cpp:101</a></div></div>
<div class="ttc" id="aclassvitamin_html_acfc2222126afc9c1040c1d71fb75ebe1"><div class="ttname"><a href="classvitamin.html#acfc2222126afc9c1040c1d71fb75ebe1">vitamin::min</a></div><div class="ttdeci">int min() const</div><div class="ttdoc">Lower bound for deficiency of this vitamin.</div><div class="ttdef"><b>Definition:</b> <a href="vitamin_8h_source.html#l00070">vitamin.h:70</a></div></div>
<div class="ttc" id="aclassvitamin_html_ad77f86e9d837ddf8f19e5f38664743f0"><div class="ttname"><a href="classvitamin.html#ad77f86e9d837ddf8f19e5f38664743f0">vitamin::type</a></div><div class="ttdeci">const vitamin_type &amp; type() const</div><div class="ttdef"><b>Definition:</b> <a href="vitamin_8h_source.html#l00043">vitamin.h:43</a></div></div>
<div class="ttc" id="aclassweather__generator_html_a458f992d029de9f8f06bca1ac448819c"><div class="ttname"><a href="classweather__generator.html#a458f992d029de9f8f06bca1ac448819c">weather_generator::get_water_temperature</a></div><div class="ttdeci">units::temperature get_water_temperature() const</div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8cpp_source.html#l00249">weather_gen.cpp:249</a></div></div>
<div class="ttc" id="aclassweather__manager_html"><div class="ttname"><a href="classweather__manager.html">weather_manager</a></div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00198">weather.h:199</a></div></div>
<div class="ttc" id="aclassweather__manager_html_a410734bb787ca2653905ca7a1c704b88"><div class="ttname"><a href="classweather__manager.html#a410734bb787ca2653905ca7a1c704b88">weather_manager::winddirection</a></div><div class="ttdeci">int winddirection</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00210">weather.h:210</a></div></div>
<div class="ttc" id="aclassweather__manager_html_a65e0974692317dee8098564d9952ec88"><div class="ttname"><a href="classweather__manager.html#a65e0974692317dee8098564d9952ec88">weather_manager::weather_precise</a></div><div class="ttdeci">pimpl&lt; w_point &gt; weather_precise</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00216">weather.h:216</a></div></div>
<div class="ttc" id="aclassweather__manager_html_ae21ca8b6895d5b684f224a35590e54a5"><div class="ttname"><a href="classweather__manager.html#ae21ca8b6895d5b684f224a35590e54a5">weather_manager::windspeed</a></div><div class="ttdeci">int windspeed</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00211">weather.h:211</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a0f25678be1fc95cb81381a004493a4cc"><div class="ttname"><a href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a></div><div class="ttdeci">std::string colorize(const std::string &amp;text, const nc_color &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00742">color.cpp:742</a></div></div>
<div class="ttc" id="acolor_8h_html"><div class="ttname"><a href="color_8h.html">color.h</a></div></div>
<div class="ttc" id="acolor_8h_html_a0d06dc49b9761bbc54607397213728bb"><div class="ttname"><a href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a></div><div class="ttdeci">#define c_white</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00016">color.h:16</a></div></div>
<div class="ttc" id="acolor_8h_html_a1b1e3c0bef566a83c3535e38a93ad733"><div class="ttname"><a href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a></div><div class="ttdeci">#define c_light_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00017">color.h:17</a></div></div>
<div class="ttc" id="acolor_8h_html_a1cb87e74156596960610fd0a9ace766d"><div class="ttname"><a href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a></div><div class="ttdeci">#define c_green</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00020">color.h:20</a></div></div>
<div class="ttc" id="acolor_8h_html_a2236aa1fe66b707a104f19ad45c23230"><div class="ttname"><a href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a></div><div class="ttdeci">#define c_light_green</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00026">color.h:26</a></div></div>
<div class="ttc" id="acolor_8h_html_a2740fd73e1b9184c904d95a580c5ea7b"><div class="ttname"><a href="color_8h.html#a2740fd73e1b9184c904d95a580c5ea7b">c_blue</a></div><div class="ttdeci">#define c_blue</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00021">color.h:21</a></div></div>
<div class="ttc" id="acolor_8h_html_a81e80ab9142609903b4788a6bb31ae45"><div class="ttname"><a href="color_8h.html#a81e80ab9142609903b4788a6bb31ae45">c_yellow</a></div><div class="ttdeci">#define c_yellow</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00030">color.h:30</a></div></div>
<div class="ttc" id="acolor_8h_html_aab11865a3631a7ce78da82b7fb386b71"><div class="ttname"><a href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a></div><div class="ttdeci">#define c_light_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00025">color.h:25</a></div></div>
<div class="ttc" id="acolor_8h_html_af0a87eaef36305269f4506dfa34d94c0"><div class="ttname"><a href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a></div><div class="ttdeci">#define c_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00019">color.h:19</a></div></div>
<div class="ttc" id="acreature_8h_html"><div class="ttname"><a href="creature_8h.html">creature.h</a></div></div>
<div class="ttc" id="acreature_8h_html_ac54f8023b2f6c4c85f60252cf47cc28d"><div class="ttname"><a href="creature_8h.html#ac54f8023b2f6c4c85f60252cf47cc28d">bp</a></div><div class="ttdeci">bodypart_id bp</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00238">creature.h:238</a></div></div>
<div class="ttc" id="acreature_8h_html_aeb8b361a289bc1747bf10888c18fbfaea5d7454274f566bb1a128ed016e6bc787"><div class="ttname"><a href="creature_8h.html#aeb8b361a289bc1747bf10888c18fbfaea5d7454274f566bb1a128ed016e6bc787">get_body_part_flags::only_main</a></div><div class="ttdeci">@ only_main</div></div>
<div class="ttc" id="adisplay_8h_html"><div class="ttname"><a href="display_8h.html">display.h</a></div></div>
<div class="ttc" id="adisplay_8h_html_ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f"><div class="ttname"><a href="display_8h.html#ad55df0d7f625a78f1afc728ee1a6d6a4a3d801aa532c1cec3ee82d87a99fdf63f">bodygraph_var::temp</a></div><div class="ttdeci">@ temp</div></div>
<div class="ttc" id="aeffect_8cpp_html_a6808486532950de6a750b0546f7de64b"><div class="ttname"><a href="effect_8cpp.html#a6808486532950de6a750b0546f7de64b">texitify_healing_power</a></div><div class="ttdeci">std::string texitify_healing_power(const int power)</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01734">effect.cpp:1734</a></div></div>
<div class="ttc" id="aeffect_8cpp_html_ab3f9733465480023c82f4f0e18aae7dc"><div class="ttname"><a href="effect_8cpp.html#ab3f9733465480023c82f4f0e18aae7dc">colorize_bleeding_intensity</a></div><div class="ttdeci">nc_color colorize_bleeding_intensity(const int intensity)</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01779">effect.cpp:1779</a></div></div>
<div class="ttc" id="aeffect_8h_html"><div class="ttname"><a href="effect_8h.html">effect.h</a></div></div>
<div class="ttc" id="aenums_8h_html"><div class="ttname"><a href="enums_8h.html">enums.h</a></div></div>
<div class="ttc" id="aenums_8h_html_a02646717f97faa05c11dbda0aac2c716a857af22f119fefbfa24769ed2ad6d5e7"><div class="ttname"><a href="enums_8h.html#a02646717f97faa05c11dbda0aac2c716a857af22f119fefbfa24769ed2ad6d5e7">ot_match_type::contains</a></div><div class="ttdeci">@ contains</div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00348">enums.h:348</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a></div><div class="ttdeci">@ m_warning</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00351">enums.h:351</a></div></div>
<div class="ttc" id="aflag_8cpp_html_ad12eb85cdd376a51aa3859ca5894377b"><div class="ttname"><a href="flag_8cpp.html#ad12eb85cdd376a51aa3859ca5894377b">flag_SPLINT</a></div><div class="ttdeci">const flag_id flag_SPLINT(&quot;SPLINT&quot;)</div></div>
<div class="ttc" id="aflag_8h_html"><div class="ttname"><a href="flag_8h.html">flag.h</a></div></div>
<div class="ttc" id="agame_8cpp_html_a20e1e24b746d8844d2e554086ba3b3bb"><div class="ttname"><a href="game_8cpp.html#a20e1e24b746d8844d2e554086ba3b3bb">get_weather</a></div><div class="ttdeci">weather_manager &amp; get_weather()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13866">game.cpp:13866</a></div></div>
<div class="ttc" id="agame_8cpp_html_a36df7132ccbfa295fabff9ba6251dd5f"><div class="ttname"><a href="game_8cpp.html#a36df7132ccbfa295fabff9ba6251dd5f">get_best_fire</a></div><div class="ttdeci">int get_best_fire(const tripoint &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l01650">game.cpp:1650</a></div></div>
<div class="ttc" id="agame_8cpp_html_abe70ab885639c40fb92f3adf812ebaf6"><div class="ttname"><a href="game_8cpp.html#abe70ab885639c40fb92f3adf812ebaf6">get_heat_radiation</a></div><div class="ttdeci">units::temperature_delta get_heat_radiation(const tripoint &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l01614">game.cpp:1614</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00382">game.cpp:382</a></div></div>
<div class="ttc" id="agame_8cpp_html_afa1063326b0c16b43c6f3dc8c3df403d"><div class="ttname"><a href="game_8cpp.html#afa1063326b0c16b43c6f3dc8c3df403d">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l13822">game.cpp:13822</a></div></div>
<div class="ttc" id="agame_8h_html"><div class="ttname"><a href="game_8h.html">game.h</a></div></div>
<div class="ttc" id="agame__constants_8h_html"><div class="ttname"><a href="game__constants_8h.html">game_constants.h</a></div></div>
<div class="ttc" id="agroup__UI_html_ga7604af7545244003f0a52ac87ce37979"><div class="ttname"><a href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">uilist::query</a></div><div class="ttdeci">void query(bool loop=true, int timeout=-1)</div><div class="ttdoc">Handle input and update display.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l01032">ui.cpp:1032</a></div></div>
<div class="ttc" id="agroup__UI_html_ga93f381e783bfe32daea2b16b8f99c749"><div class="ttname"><a href="group__UI.html#ga93f381e783bfe32daea2b16b8f99c749">uilist::init</a></div><div class="ttdeci">void init()</div><div class="ttdoc">Sane defaults on initialization.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00245">ui.cpp:245</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga090dd5274c7af40d32814a41f2e16fe0"><div class="ttname"><a href="group__Weather.html#ga090dd5274c7af40d32814a41f2e16fe0">weather_manager::get_cur_weather_gen</a></div><div class="ttdeci">const weather_generator &amp; get_cur_weather_gen() const</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00895">weather.cpp:895</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga3b6c37e7f8086254c46acb9572ea97d1"><div class="ttname"><a href="group__Weather.html#ga3b6c37e7f8086254c46acb9572ea97d1">get_local_humidity</a></div><div class="ttdeci">int get_local_humidity(double humidity, const weather_type_id &amp;weather, bool sheltered)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00772">weather.cpp:772</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga41d8c01f9a844c01ed5bd8a7d3ad805b"><div class="ttname"><a href="group__Weather.html#ga41d8c01f9a844c01ed5bd8a7d3ad805b">get_local_windpower</a></div><div class="ttdeci">int get_local_windpower(int windpower, const oter_id &amp;omter, const tripoint_abs_ms &amp;location, const int &amp;winddirection, bool sheltered)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00786">weather.cpp:786</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga8db4da91fa5a84dc3a064b99963cf846"><div class="ttname"><a href="group__Weather.html#ga8db4da91fa5a84dc3a064b99963cf846">get_local_windchill</a></div><div class="ttdeci">units::temperature_delta get_local_windchill(units::temperature temperature, double humidity, double wind_mph)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00636">weather.cpp:636</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga92e3dd986a664a399dffe62d2ebe2139"><div class="ttname"><a href="group__Weather.html#ga92e3dd986a664a399dffe62d2ebe2139">weather_manager::get_temperature</a></div><div class="ttdeci">units::temperature get_temperature(const tripoint &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00957">weather.cpp:957</a></div></div>
<div class="ttc" id="agroup__Weather_html_gad83f21ad25e9b3edcd48ada9130cd512"><div class="ttname"><a href="group__Weather.html#gad83f21ad25e9b3edcd48ada9130cd512">incident_sun_irradiance</a></div><div class="ttdeci">float incident_sun_irradiance(const weather_type_id &amp;wtype, const time_point &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00143">weather.cpp:143</a></div></div>
<div class="ttc" id="amagic_8h_html"><div class="ttname"><a href="magic_8h.html">magic.h</a></div></div>
<div class="ttc" id="amagic__enchantment_8h_html"><div class="ttname"><a href="magic__enchantment_8h.html">magic_enchantment.h</a></div></div>
<div class="ttc" id="amake__static_8h_html"><div class="ttname"><a href="make__static_8h.html">make_static.h</a></div></div>
<div class="ttc" id="amake__static_8h_html_ad8ea997925f9b41fffbf138f4c05e09f"><div class="ttname"><a href="make__static_8h.html#ad8ea997925f9b41fffbf138f4c05e09f">STATIC</a></div><div class="ttdeci">#define STATIC(expr)</div><div class="ttdoc">The purpose of this macro is to provide a concise syntax for creation of inline literals (std::string...</div><div class="ttdef"><b>Definition:</b> <a href="make__static_8h_source.html#l00031">make_static.h:31</a></div></div>
<div class="ttc" id="amap_8h_html"><div class="ttname"><a href="map_8h.html">map.h</a></div></div>
<div class="ttc" id="amapdata_8h_html"><div class="ttname"><a href="mapdata_8h.html">mapdata.h</a></div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054a7de97a0bb289f6e3177be7916d329c93"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054a7de97a0bb289f6e3177be7916d329c93">ter_furn_flag::TFLAG_SHALLOW_WATER</a></div><div class="ttdeci">@ TFLAG_SHALLOW_WATER</div></div>
<div class="ttc" id="amapdata_8h_html_a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1"><div class="ttname"><a href="mapdata_8h.html#a2edbbfd25069897b3062331e48224054ac6e19e1c41724be67b2bff2870539ca1">ter_furn_flag::TFLAG_DEEP_WATER</a></div><div class="ttdeci">@ TFLAG_DEEP_WATER</div></div>
<div class="ttc" id="amath__parser__func_8h_html_a204ca52ef1b97d079c45e1cb6407f73b"><div class="ttname"><a href="math__parser__func_8h.html#a204ca52ef1b97d079c45e1cb6407f73b">floor</a></div><div class="ttdeci">double floor(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00095">math_parser_func.h:95</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a24f6ac6e06720c7cdf972a6083847132"><div class="ttname"><a href="math__parser__func_8h.html#a24f6ac6e06720c7cdf972a6083847132">abs</a></div><div class="ttdeci">double abs(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00030">math_parser_func.h:30</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a9009aa9e5eb1323238ebddffd8e1aedf"><div class="ttname"><a href="math__parser__func_8h.html#a9009aa9e5eb1323238ebddffd8e1aedf">max</a></div><div class="ttdeci">double max(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00035">math_parser_func.h:35</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_a993dede52d23a9a3d15b01a342391ef4"><div class="ttname"><a href="math__parser__func_8h.html#a993dede52d23a9a3d15b01a342391ef4">min</a></div><div class="ttdeci">double min(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00043">math_parser_func.h:43</a></div></div>
<div class="ttc" id="amath__parser__func_8h_html_aeb3bbc4ec861ea58cbfca028920e4cc6"><div class="ttname"><a href="math__parser__func_8h.html#aeb3bbc4ec861ea58cbfca028920e4cc6">sqrt</a></div><div class="ttdeci">double sqrt(std::vector&lt; double &gt; const &amp;params)</div><div class="ttdef"><b>Definition:</b> <a href="math__parser__func_8h_source.html#l00061">math_parser_func.h:61</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00997">messages.cpp:997</a></div></div>
<div class="ttc" id="amessages_8h_html"><div class="ttname"><a href="messages_8h.html">messages.h</a></div></div>
<div class="ttc" id="amorale__types_8cpp_html_ab4cb4741ce3812b07717e4eff93ab493"><div class="ttname"><a href="morale__types_8cpp.html#ab4cb4741ce3812b07717e4eff93ab493">MORALE_COMFY</a></div><div class="ttdeci">const morale_type MORALE_COMFY(&quot;morale_comfy&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_ac24628e1ae610080c72e7f73dd720279"><div class="ttname"><a href="morale__types_8cpp.html#ac24628e1ae610080c72e7f73dd720279">MORALE_PYROMANIA_NEARFIRE</a></div><div class="ttdeci">const morale_type MORALE_PYROMANIA_NEARFIRE(&quot;morale_pyromania_nearfire&quot;)</div></div>
<div class="ttc" id="amorale__types_8cpp_html_ae932ffaaef9c3a4092fc8727141405bf"><div class="ttname"><a href="morale__types_8cpp.html#ae932ffaaef9c3a4092fc8727141405bf">MORALE_PYROMANIA_NOFIRE</a></div><div class="ttdeci">const morale_type MORALE_PYROMANIA_NOFIRE(&quot;morale_pyromania_nofire&quot;)</div></div>
<div class="ttc" id="amorale__types_8h_html"><div class="ttname"><a href="morale__types_8h.html">morale_types.h</a></div></div>
<div class="ttc" id="anamespaceanonymous__namespace_02item__tname_8cpp_03_html_adcb746021134c9e452666998837b63fc"><div class="ttname"><a href="namespaceanonymous__namespace_02item__tname_8cpp_03.html#adcb746021134c9e452666998837b63fc">anonymous_namespace{item_tname.cpp}::wetness</a></div><div class="ttdeci">std::string wetness(item const &amp;it, unsigned int, segment_bitset const &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="item__tname_8cpp_source.html#l00475">item_tname.cpp:475</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a356df28513f4d655ae35c312ab6e7d55"><div class="ttname"><a href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a></div><div class="ttdeci">bool once_every(const time_duration &amp;event_frequency)</div><div class="ttdoc">Predicate to handle rate-limiting.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00753">calendar.cpp:753</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00038">calendar.cpp:38</a></div></div>
<div class="ttc" id="anamespacecharacter__weight__category_html_a4796dc02b0d31bbc649f0d96a93fd600"><div class="ttname"><a href="namespacecharacter__weight__category.html#a4796dc02b0d31bbc649f0d96a93fd600">character_weight_category::normal</a></div><div class="ttdeci">constexpr float normal</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00213">game_constants.h:213</a></div></div>
<div class="ttc" id="anamespacecharacter__weight__category_html_a9c7c7934ca11833d32605b6af00f4572"><div class="ttname"><a href="namespacecharacter__weight__category.html#a9c7c7934ca11833d32605b6af00f4572">character_weight_category::overweight</a></div><div class="ttdeci">constexpr float overweight</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00214">game_constants.h:214</a></div></div>
<div class="ttc" id="anamespacecharacter__weight__category_html_aa0f298c7e2726e5eddd1879b7288b748"><div class="ttname"><a href="namespacecharacter__weight__category.html#aa0f298c7e2726e5eddd1879b7288b748">character_weight_category::underweight</a></div><div class="ttdeci">constexpr float underweight</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00212">game_constants.h:212</a></div></div>
<div class="ttc" id="anamespacecharacter__weight__category_html_ae41f48d3a0de12bbab86abc5d741f978"><div class="ttname"><a href="namespacecharacter__weight__category.html#ae41f48d3a0de12bbab86abc5d741f978">character_weight_category::emaciated</a></div><div class="ttdeci">constexpr float emaciated</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00211">game_constants.h:211</a></div></div>
<div class="ttc" id="anamespacedisplay_html_a42ead77b39f9e1cb2b4cb0b078104b89"><div class="ttname"><a href="namespacedisplay.html#a42ead77b39f9e1cb2b4cb0b078104b89">display::limb_color</a></div><div class="ttdeci">nc_color limb_color(const Character &amp;u, const bodypart_id &amp;bp, bool bleed, bool bite, bool infect)</div><div class="ttdef"><b>Definition:</b> <a href="display_8cpp_source.html#l00857">display.cpp:857</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">enchant_vals::mod</a></div><div class="ttdeci">mod</div><div class="ttdef"><b>Definition:</b> <a href="magic__enchantment_8h_source.html#l00031">magic_enchantment.h:31</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998a49899af3c1ba00e126383e9d8f09996b"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a49899af3c1ba00e126383e9d8f09996b">enchant_vals::mod::SLEEPINESS_REGEN</a></div><div class="ttdeci">@ SLEEPINESS_REGEN</div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998aa3b3cee6d351386a5e2706cd86a8ed99"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998aa3b3cee6d351386a5e2706cd86a8ed99">enchant_vals::mod::SLEEPINESS</a></div><div class="ttdeci">@ SLEEPINESS</div></div>
<div class="ttc" id="anamespaceiuse_html_a87919f860221208970b40d2ec859fd55"><div class="ttname"><a href="namespaceiuse.html#a87919f860221208970b40d2ec859fd55">iuse::mycus</a></div><div class="ttdeci">std::optional&lt; int &gt; mycus(Character *, item *, const tripoint &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="iuse_8cpp_source.html#l01424">iuse.cpp:1424</a></div></div>
<div class="ttc" id="anamespaceunits_html_a345181745bb0299d6f6f8f96d4f4acdc"><div class="ttname"><a href="namespaceunits.html#a345181745bb0299d6f6f8f96d4f4acdc">units::from_kelvin_delta</a></div><div class="ttdeci">constexpr quantity&lt; units::temperature_delta::value_type, temperature_delta_in_kelvin_tag &gt; from_kelvin_delta(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00472">units.h:472</a></div></div>
<div class="ttc" id="anamespaceunits_html_a70f92b42412609565a84bf9a7ff422a0"><div class="ttname"><a href="namespaceunits.html#a70f92b42412609565a84bf9a7ff422a0">units::from_fahrenheit_delta</a></div><div class="ttdeci">constexpr quantity&lt; units::temperature_delta::value_type, temperature_delta_in_kelvin_tag &gt; from_fahrenheit_delta(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00495">units.h:495</a></div></div>
<div class="ttc" id="anamespaceunits_html_a9a5827312b56a57d423cb19197bcc358"><div class="ttname"><a href="namespaceunits.html#a9a5827312b56a57d423cb19197bcc358">units::to_celsius</a></div><div class="ttdeci">constexpr value_type to_celsius(const quantity&lt; value_type, temperature_in_kelvin_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00433">units.h:433</a></div></div>
<div class="ttc" id="anamespaceunits_html_ab48631971d0388e681d061f87a88fcfa"><div class="ttname"><a href="namespaceunits.html#ab48631971d0388e681d061f87a88fcfa">units::from_celsius_delta</a></div><div class="ttdeci">constexpr quantity&lt; units::temperature_delta::value_type, temperature_delta_in_kelvin_tag &gt; from_celsius_delta(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00487">units.h:487</a></div></div>
<div class="ttc" id="anamespaceunits_html_ae31e6d9c71949a72ee41be4be6f1afcd"><div class="ttname"><a href="namespaceunits.html#ae31e6d9c71949a72ee41be4be6f1afcd">units::to_fahrenheit</a></div><div class="ttdeci">constexpr value_type to_fahrenheit(const quantity&lt; value_type, temperature_in_kelvin_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00440">units.h:440</a></div></div>
<div class="ttc" id="anamespaceunits_html_aeb8137b871270efbb596a5881aa67527"><div class="ttname"><a href="namespaceunits.html#aeb8137b871270efbb596a5881aa67527">units::to_fahrenheit_delta</a></div><div class="ttdeci">constexpr value_type to_fahrenheit_delta(const quantity&lt; value_type, temperature_delta_in_kelvin_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l00509">units.h:509</a></div></div>
<div class="ttc" id="anamespaceunits_html_afdbb046eecc8c9d147d1058ae56e7ff0"><div class="ttname"><a href="namespaceunits.html#afdbb046eecc8c9d147d1058ae56e7ff0">units::abs</a></div><div class="ttdeci">constexpr units::temperature_delta abs(units::temperature_delta x)</div><div class="ttdef"><b>Definition:</b> <a href="units_8h_source.html#l01190">units.h:1190</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_aafdcbf1eb3398c6e92cf3b71f6c8ad03"><div class="ttname"><a href="output_8cpp.html#aafdcbf1eb3398c6e92cf3b71f6c8ad03">get_hp_bar</a></div><div class="ttdeci">std::pair&lt; std::string, nc_color &gt; get_hp_bar(const int cur_hp, const int max_hp, const bool is_mon)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02657">output.cpp:2657</a></div></div>
<div class="ttc" id="aoutput_8h_html"><div class="ttname"><a href="output_8h.html">output.h</a></div></div>
<div class="ttc" id="aovermapbuffer_8cpp_html_ab3cf8344ec3e473f9ce96a33dc3425af"><div class="ttname"><a href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a></div><div class="ttdeci">overmapbuffer overmap_buffer</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00051">overmapbuffer.cpp:51</a></div></div>
<div class="ttc" id="aovermapbuffer_8h_html"><div class="ttname"><a href="overmapbuffer_8h.html">overmapbuffer.h</a></div></div>
<div class="ttc" id="apimpl_8h_html"><div class="ttname"><a href="pimpl_8h.html">pimpl.h</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00108">rng.cpp:108</a></div></div>
<div class="ttc" id="arng_8cpp_html_acd19ae79e3590a99c9eaf0389318b686"><div class="ttname"><a href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a></div><div class="ttdeci">int roll_remainder(double value)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00134">rng.cpp:134</a></div></div>
<div class="ttc" id="arng_8h_html"><div class="ttname"><a href="rng_8h.html">rng.h</a></div></div>
<div class="ttc" id="astomach_8h_html"><div class="ttname"><a href="stomach_8h.html">stomach.h</a></div></div>
<div class="ttc" id="astring__formatter_8h_html"><div class="ttname"><a href="string__formatter_8h.html">string_formatter.h</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00417">string_formatter.h:417</a></div></div>
<div class="ttc" id="astructbody__part__type_html_a501bada99ae2a3ee588bd614c98c9f1b"><div class="ttname"><a href="structbody__part__type.html#a501bada99ae2a3ee588bd614c98c9f1b">body_part_type::fire_warmth_bonus</a></div><div class="ttdeci">units::temperature_delta fire_warmth_bonus</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00292">bodypart.h:292</a></div></div>
<div class="ttc" id="astructbody__part__type_html_a567ff9b8a8e0580957c138a586a7afaa"><div class="ttname"><a href="structbody__part__type.html#a567ff9b8a8e0580957c138a586a7afaa">body_part_type::temp_min</a></div><div class="ttdeci">units::temperature_delta temp_min</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00308">bodypart.h:308</a></div></div>
<div class="ttc" id="astructbody__part__type_html_ab2d8ca27584109b9d36424f1f4dd92fe"><div class="ttname"><a href="structbody__part__type.html#ab2d8ca27584109b9d36424f1f4dd92fe">body_part_type::connected_to</a></div><div class="ttdeci">bodypart_str_id connected_to</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00229">bodypart.h:229</a></div></div>
<div class="ttc" id="astructbody__part__type_html_ab85049855e0444e73df6af10413de9e6"><div class="ttname"><a href="structbody__part__type.html#ab85049855e0444e73df6af10413de9e6">body_part_type::drying_rate</a></div><div class="ttdeci">float drying_rate</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00313">bodypart.h:313</a></div></div>
<div class="ttc" id="astructbody__part__type_html_ab88f4c72186cad27609e877dd46d2c33"><div class="ttname"><a href="structbody__part__type.html#ab88f4c72186cad27609e877dd46d2c33">body_part_type::main_part</a></div><div class="ttdeci">bodypart_str_id main_part</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00226">bodypart.h:226</a></div></div>
<div class="ttc" id="astructbody__part__type_html_afd43ba79d412b38476f718534904fce7"><div class="ttname"><a href="structbody__part__type.html#afd43ba79d412b38476f718534904fce7">body_part_type::has_flag</a></div><div class="ttdeci">bool has_flag(const json_character_flag &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00257">bodypart.cpp:257</a></div></div>
<div class="ttc" id="astructbody__part__type_html_afd523ff71db9b39b9218f0590570a414"><div class="ttname"><a href="structbody__part__type.html#afd523ff71db9b39b9218f0590570a414">body_part_type::temp_max</a></div><div class="ttdeci">units::temperature_delta temp_max</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00310">bodypart.h:310</a></div></div>
<div class="ttc" id="astructfood__summary_html"><div class="ttname"><a href="structfood__summary.html">food_summary</a></div><div class="ttdef"><b>Definition:</b> <a href="stomach_8h_source.html#l00100">stomach.h:100</a></div></div>
<div class="ttc" id="astructfood__summary_html_a095be6f7ae52f5d095c41281e4f73dd1"><div class="ttname"><a href="structfood__summary.html#a095be6f7ae52f5d095c41281e4f73dd1">food_summary::water</a></div><div class="ttdeci">units::volume water</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8h_source.html#l00101">stomach.h:101</a></div></div>
<div class="ttc" id="astructfood__summary_html_a98ff8c8827e0da9ef2563f999867f86e"><div class="ttname"><a href="structfood__summary.html#a98ff8c8827e0da9ef2563f999867f86e">food_summary::nutr</a></div><div class="ttdeci">nutrients nutr</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8h_source.html#l00103">stomach.h:103</a></div></div>
<div class="ttc" id="astructfurn__t_html_a902f269d07d55a20d61d3335cc893a62"><div class="ttname"><a href="structfurn__t.html#a902f269d07d55a20d61d3335cc893a62">furn_t::bonus_fire_warmth_feet</a></div><div class="ttdeci">units::temperature_delta bonus_fire_warmth_feet</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00655">mapdata.h:655</a></div></div>
<div class="ttc" id="astructmutation__branch_html"><div class="ttname"><a href="structmutation__branch.html">mutation_branch</a></div><div class="ttdef"><b>Definition:</b> <a href="mutation_8h_source.html#l00172">mutation.h:172</a></div></div>
<div class="ttc" id="astructneeds__rates_html"><div class="ttname"><a href="structneeds__rates.html">needs_rates</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00497">character.h:497</a></div></div>
<div class="ttc" id="astructneeds__rates_html_a537fb128d773bdfedddacda084367e3a"><div class="ttname"><a href="structneeds__rates.html#a537fb128d773bdfedddacda084367e3a">needs_rates::hunger</a></div><div class="ttdeci">float hunger</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00499">character.h:499</a></div></div>
<div class="ttc" id="astructneeds__rates_html_a753a5b2301d9278f8b29d42df3b1eb53"><div class="ttname"><a href="structneeds__rates.html#a753a5b2301d9278f8b29d42df3b1eb53">needs_rates::recovery</a></div><div class="ttdeci">float recovery</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00501">character.h:501</a></div></div>
<div class="ttc" id="astructneeds__rates_html_ad1c618eb1d5d9b3b98155bcbe952a098"><div class="ttname"><a href="structneeds__rates.html#ad1c618eb1d5d9b3b98155bcbe952a098">needs_rates::thirst</a></div><div class="ttdeci">float thirst</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00498">character.h:498</a></div></div>
<div class="ttc" id="astructnutrients_html_a27fef4783e99c7f2471a9fabcabe19b5"><div class="ttname"><a href="structnutrients.html#a27fef4783e99c7f2471a9fabcabe19b5">nutrients::kcal</a></div><div class="ttdeci">int kcal() const</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00118">stomach.cpp:118</a></div></div>
<div class="ttc" id="astructnutrients_html_a5bbbdebac3455bf17563f7f8754e1a10"><div class="ttname"><a href="structnutrients.html#a5bbbdebac3455bf17563f7f8754e1a10">nutrients::vitamins</a></div><div class="ttdeci">std::map&lt; vitamin_id, int &gt; vitamins() const</div><div class="ttdef"><b>Definition:</b> <a href="stomach_8cpp_source.html#l00047">stomach.cpp:47</a></div></div>
<div class="ttc" id="astructw__point_html"><div class="ttname"><a href="structw__point.html">w_point</a></div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8h_source.html#l00017">weather_gen.h:17</a></div></div>
<div class="ttc" id="atranslation_8h_html"><div class="ttname"><a href="translation_8h.html">translation.h</a></div></div>
<div class="ttc" id="atranslations_8h_html"><div class="ttname"><a href="translations_8h.html">translations.h</a></div></div>
<div class="ttc" id="atranslations_8h_html_ab92bb4161a6308b302d283816975c3a6"><div class="ttname"><a href="translations_8h.html#ab92bb4161a6308b302d283816975c3a6">_</a></div><div class="ttdeci">#define _(STRING)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00089">translations.h:89</a></div></div>
<div class="ttc" id="atype__id_8h_html"><div class="ttname"><a href="type__id_8h.html">type_id.h</a></div></div>
<div class="ttc" id="atype__id_8h_html_a119965745ae171b731d18a45ec6ee424"><div class="ttname"><a href="type__id_8h.html#a119965745ae171b731d18a45ec6ee424">damage_type_id</a></div><div class="ttdeci">string_id&lt; damage_type &gt; damage_type_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00071">type_id.h:71</a></div></div>
<div class="ttc" id="aui_8h_html"><div class="ttname"><a href="ui_8h.html">ui.h</a></div></div>
<div class="ttc" id="aui_8h_html_a06d5f3667ed71fa40939c4e7367e30ce"><div class="ttname"><a href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a></div><div class="ttdeci">const int MENU_AUTOASSIGN</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00038">ui.h:38</a></div></div>
<div class="ttc" id="aunits_8h_html"><div class="ttname"><a href="units_8h.html">units.h</a></div></div>
<div class="ttc" id="aveh__type_8h_html"><div class="ttname"><a href="veh__type_8h.html">veh_type.h</a></div></div>
<div class="ttc" id="avehicle_8h_html"><div class="ttname"><a href="vehicle_8h.html">vehicle.h</a></div></div>
<div class="ttc" id="avitamin_8h_html"><div class="ttname"><a href="vitamin_8h.html">vitamin.h</a></div></div>
<div class="ttc" id="avitamin_8h_html_ae396a2f322817bcd5b6c0883c52c0e38"><div class="ttname"><a href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38">vitamin_type</a></div><div class="ttdeci">vitamin_type</div><div class="ttdef"><b>Definition:</b> <a href="vitamin_8h_source.html#l00021">vitamin.h:21</a></div></div>
<div class="ttc" id="avitamin_8h_html_ae396a2f322817bcd5b6c0883c52c0e38a7de90f4165664a5c6990c3e8fec46e3b"><div class="ttname"><a href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38a7de90f4165664a5c6990c3e8fec46e3b">vitamin_type::DRUG</a></div><div class="ttdeci">@ DRUG</div></div>
<div class="ttc" id="avitamin_8h_html_ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd"><div class="ttname"><a href="vitamin_8h.html#ae396a2f322817bcd5b6c0883c52c0e38a9da05f9e5f04b3b84b4c59f02a36d9dd">vitamin_type::VITAMIN</a></div><div class="ttdeci">@ VITAMIN</div></div>
<div class="ttc" id="avpart__position_8h_html"><div class="ttname"><a href="vpart__position_8h.html">vpart_position.h</a></div></div>
<div class="ttc" id="aweather_8h_html"><div class="ttname"><a href="weather_8h.html">weather.h</a></div></div>
<div class="ttc" id="aweather_8h_html_a12cce423aaf8408c2447cbcf82620956"><div class="ttname"><a href="weather_8h.html#a12cce423aaf8408c2447cbcf82620956">BODYWET_PERCENT_SOAKED</a></div><div class="ttdeci">constexpr float BODYWET_PERCENT_SOAKED</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00053">weather.h:53</a></div></div>
<div class="ttc" id="aweather_8h_html_a192f85471c11eb34255865b8d429bc21"><div class="ttname"><a href="weather_8h.html#a192f85471c11eb34255865b8d429bc21">BODYTEMP_VERY_HOT</a></div><div class="ttdeci">constexpr units::temperature BODYTEMP_VERY_HOT</div><div class="ttdoc">Level 3 hotness.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00040">weather.h:40</a></div></div>
<div class="ttc" id="aweather_8h_html_a386d267aeeaabb81cf4e19e61127e840"><div class="ttname"><a href="weather_8h.html#a386d267aeeaabb81cf4e19e61127e840">BODYTEMP_FREEZING</a></div><div class="ttdeci">constexpr units::temperature BODYTEMP_FREEZING</div><div class="ttdoc">This value means frostbite occurs at the warmest temperature of 1C. If changed, the temp_conv calcula...</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00030">weather.h:30</a></div></div>
<div class="ttc" id="aweather_8h_html_a447b0a37d377ef3455dc0a154c3d1b0c"><div class="ttname"><a href="weather_8h.html#a447b0a37d377ef3455dc0a154c3d1b0c">BODYTEMP_VERY_COLD</a></div><div class="ttdeci">constexpr units::temperature BODYTEMP_VERY_COLD</div><div class="ttdoc">Frostbite timer will not improve while below this point.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00032">weather.h:32</a></div></div>
<div class="ttc" id="aweather_8h_html_a73d8da6de438a650cedd7eab20c89b3c"><div class="ttname"><a href="weather_8h.html#a73d8da6de438a650cedd7eab20c89b3c">BODYTEMP_SCORCHING</a></div><div class="ttdeci">constexpr units::temperature BODYTEMP_SCORCHING</div><div class="ttdoc">Additional Threshold before speed is impacted by heat.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00042">weather.h:42</a></div></div>
<div class="ttc" id="aweather_8h_html_aa08ed5af6f28c1fdf8c6927e0ad78cde"><div class="ttname"><a href="weather_8h.html#aa08ed5af6f28c1fdf8c6927e0ad78cde">BODYTEMP_COLD</a></div><div class="ttdeci">constexpr units::temperature BODYTEMP_COLD</div><div class="ttdoc">Normal body temperature.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00034">weather.h:34</a></div></div>
<div class="ttc" id="aweather_8h_html_ab95846d85630066250f5bf05f06f51db"><div class="ttname"><a href="weather_8h.html#ab95846d85630066250f5bf05f06f51db">BODYTEMP_NORM</a></div><div class="ttdeci">constexpr units::temperature BODYTEMP_NORM</div><div class="ttdoc">Level 1 hotness.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00036">weather.h:36</a></div></div>
<div class="ttc" id="aweather_8h_html_abd1400294a14a4d8ad1a2e41813b0f6e"><div class="ttname"><a href="weather_8h.html#abd1400294a14a4d8ad1a2e41813b0f6e">BODYTEMP_HOT</a></div><div class="ttdeci">constexpr units::temperature BODYTEMP_HOT</div><div class="ttdoc">Level 2 hotness.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00038">weather.h:38</a></div></div>
<div class="ttc" id="aweather_8h_html_abfbacbfb50d91cc86fc1b1e00e8fce95"><div class="ttname"><a href="weather_8h.html#abfbacbfb50d91cc86fc1b1e00e8fce95">BODYWET_PERCENT_WET</a></div><div class="ttdeci">constexpr float BODYWET_PERCENT_WET</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00051">weather.h:51</a></div></div>
<div class="ttc" id="aweather_8h_html_ad073aa70d5b0e9ac6614117b2db52155"><div class="ttname"><a href="weather_8h.html#ad073aa70d5b0e9ac6614117b2db52155">BODYTEMP_THRESHOLD</a></div><div class="ttdeci">constexpr units::temperature_delta BODYTEMP_THRESHOLD</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00045">weather.h:45</a></div></div>
<div class="ttc" id="aweather__gen_8h_html"><div class="ttname"><a href="weather__gen_8h.html">weather_gen.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 7 2024 08:48:26 for Cataclysm DDA by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
